
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Keycloak - Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Keycloak is an open source identity and access management solution">
    <meta name="author" content="Keycloak Team">
    <meta name="keywords" content="sso,idm,openid connect,saml,kerberos,ldap">

    <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/css/prettify.css" rel="stylesheet">
    <link href="resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="resources/css/keycloak.css" rel="stylesheet">
    <link href="resources/css/tabzilla.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="resources/js/html5shiv.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="resources/favicon.ico">

    <script src="resources/js/jquery-1.11.1.min.js"></script>
    <script src="resources/js/bootstrap.min.js"></script>
    <script src="resources/js/prettify.js"></script>
    <script src="resources/js/jbossorg-tabzilla.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-79404298-1', 'auto');
        ga('send', 'pageview');

    </script>
    <script id="dpal" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
</head>
<body onload="prettyPrint()">
<div id="wrap">

<div class="dropup">
    <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
    <script>
        window.addEventListener('load', function() {
            renderTabzilla("Keycloak", "http://www.keycloak.org", true );
        }, false);
    </script>
</div><header class="main-header">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-3 col-xs-12 keycloak-logo-div navbar-header">
                <button type="button" class=" pull-right  navbar-toggle collapsed" data-toggle="collapse" data-target="#mainBtnTarget" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="index.html" title="Keycloak" class="keycloak-logo-a">
                    <img class="keycloak-logo" src="resources/images/keycloak_logo_480x108.png" border="0" alt="Keycloak"/>
                </a>
            </div>
            <div id="mainBtnTarget" class="col-md-9 col-sm-9 col-xs-12 collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="about.html">About</a></li>
                    <li><a href="documentation.html">Docs</a></li>
                    <li><a href="downloads.html">Downloads</a></li>
                    <li><a href="community.html">Community</a></li>
                    <li><a href="security.html">Security</a></li>
                    <li><a href="support.html">Support</a></li>
                    <li><a href="search.html">Search</a></li>
                    <li><a href="blog.html">Blog</a></li>
                </ul>
            </div>
        </div>
    </div>
</header>

<div class="page-section">
    <div class="container">
        <a style="float: right;" href="rss.xml"><img src="resources/images/rss.png"/></a>
                <h1><a href="2019/03/w3c-web-authentication-(webauthn).html">W3C Web Authentication (WebAuthn)</a></h1>

                <p class="blog-date">Wednesday, March 06 2019, posted by Stian Thorgersen</p>

                <div class="blog blog-container">

<p>
W3C Web Authentication (WebAuthn) was recently made an official web standard. This is a great step towards making a safer and
simpler authentication experience for users.
</p>

<p>
Where traditional authentication, such as password and OTP, rely on having shared secrets between the user and the
web application, this is not the case with WebAuthn. WebAuthn uses public key-based credentials resulting in the web
application not having access to the users secrets anymore. The keys are also unique per web application which eliminates
the risk of phishing attacks.
</p>

<p>
WebAuthn provides a standard protocol for web applications to authenticate via a number of devices through a relatively
simple challenge/response. All major browser vendors now have support for WebAuthn and FIDO2, where FIDO2 is the specification
that enables the browser to communicate with different hardware devices.
</p>

<p>
WebAuthn can be used both as a two factor mechanism as well as enable passwordless authentication. There are already
an healthy amount of devices that can be used together with WebAuthn. There are a number of security keys like
<a href="https://www.yubico.com/">YubiKey</a>, <a href="https://thinc.ensurity.com/">ThinC</a> and
<a href="https://cloud.google.com/titan-security-key/">Titan</a>. A lot of new laptops also come with built-in
fingerprint scanners, and it Android also recently made it possible to use the fingerprint scanners on Android 7+ devices with WebAuthn.
</p>

<p>
We are of course planning on bringing WebAuthn support to Keycloak in the near future. The team behind <a href="https://github.com/webauthn4j/webauthn4j">webauthn4j</a>
has been hard at work greating a quality Java library for WebAuthn and will hopefully soon have an extension to
Keycloak ready.
</p>

<p>
We will first focus on two-factor authentication with WebAuth and as part of this we will bring a number of improvements
to Keycloak around two-factor authentication. For more details check the
<a href="https://github.com/keycloak/keycloak-community/blob/master/design/web-authn-two-factor.md">design document</a>.
</p>

<p>
Later, we will also bring the passwordless experience to Keycloak. This will also introduce Keycloak to the identity
first login flows. By asking for the users identity first Keycloak can provide smarter decisions on how to authenticate
a user based on the users preferences. For example requesting the user to press the button on their security key instead
of asking for a password.
</p>

<p>
Resources:
<ul>
<li><a href="https://www.w3.org/TR/webauthn/">W3C Specification</a></li>
<li><a href="https://fidoalliance.org/w3c-and-fido-alliance-finalize-web-standard-for-secure-passwordless-logins/">W3C and FIDO Alliance Finalize Web Standard for Secure, Passwordless Logins</a></li>
<li><a href="https://www.wired.com/story/android-passwordless-login-fido2/">Android is helping kill passwords on a billion devices</a></li>
</ul>
</p>
                </div>



                <h1><a href="2019/03/keycloak-500-released.html">Keycloak 5.0.0 released</a></h1>

                <p class="blog-date">Wednesday, March 06 2019</p>

                <div class="blog blog-container">
<p>To download the release go to <a href="https://www.keycloak.org/downloads.html">Keycloak downloads</a>.</p>

<p>
    For details on what is included in the release check out the <a href="https://www.keycloak.org/docs/latest/release_notes/index.html">Release notes</a>.
    The full list of resolved issues are available in <a href="https://issues.jboss.org/issues/?jql=project%20%3D%20keycloak%20and%20fixVersion%20%3D%205.0.0">JIRA</a>
</p>

<p>Before you upgrade remember to backup your database and check the <a href="https://www.keycloak.org/docs/latest/upgrading/index.html">upgrade guide</a> for anything that may have changed.</p>                </div>















                <h1><a href="2018/06/keycloak-on-kubernetes.html">Keycloak on Kubernetes</a></h1>

                <p class="blog-date">Wednesday, June 27 2018, posted by Stian Thorgersen</p>

                <div class="blog blog-container">

<p>
If you'd like to get started with using Keycloak on Kubernetes check out <a href="https://youtu.be/A_BYZ7hHWXE">this screencast</a>.
If you'd rather try it out yourself check out <a href="https://github.com/stianst/demo-kubernetes">this GitHub repository</a> that contains the instructions as well as all the bits you'll need to reproduce what is shown in the screencast.
</p>                </div>



                <h1><a href="2018/06/keycloak-cordova-browser-tabs-support.html">Keycloak Cordova Browser Tabs support</a></h1>

                <p class="blog-date">Thursday, June 21 2018, posted by Stian Thorgersen</p>

                <div class="blog blog-container">

<p>
Thanks to <a href="https://github.com/gtudan">gtudan</a> we finally have support for browser tabs for Cordova in our JavaScript adapter. This enables using a system browser tab to do the login flows to Keycloak, which brings better security and also single sign-on and single sign-out to mobile applications secured with Keycloak.
</p>

<p>
This will be included in Keycloak 4.1.0.Final which will be released soon. In the meantime check this <a href="https://youtu.be/HKulxXDYJSs">screen-cast</a> to see this in action!
</p>                </div>



                <h1><a href="2018/06/red-hat-single-sign-on-in-keynote-demo-on-red-hat-summit.html">Red Hat Single Sign-On in Keynote demo on Red Hat Summit!</a></h1>

                <p class="blog-date">Sunday, June 17 2018, posted by Marek Posolda</p>

                <div class="blog blog-container">

<p>Red Hat Summit is one of the most important events during the year. Many geeks, Red Hat employees and customers have great opportunity to meet, learn new things and attend lots of interesting presentations and trainings. During the summit this year, there were few breakout sessions, which were solely about Keycloak and Red Hat SSO. You can take a look at <a href="http://blog.keycloak.org/2018/05/red-hat-single-sign-on-red-hat-summit.html">this blogpost</a> for more details.

<p>One of the most important parts of Red Hat Summit are Keynote demos, which show the main bullet points and strategies going forward. Typically they also contain the demos of the most interesting technologies, which Red Hat uses.

<p>On the Thursday morning keynote, there was <a href="https://www.youtube.com/watch?v=hu2BmE1Wk_Q&feature=youtu.be&t=385">this demo</a> to show the Hybrid Cloud with 3 clouds (Azure, Amazon, Private) in action! There were many technologies and interesting projects involved. Among others, let's name <a href="https://www.redhat.com/en/technologies/jboss-middleware/data-grid">Red Hat JBoss Data Grid (JDG)</a>, <a href="https://openwhisk.apache.org/">OpenWhisk</a> or <a href="https://www.gluster.org/">Gluster FS</a>. The <a href="https://access.redhat.com/products/red-hat-single-sign-on">RH-SSO</a> (Red Hat product based on Keycloak project) had a honor to be used as well.

<h2>Red Hat SSO setup details</h2>

<p>The frontend of the demo was the simple mobile game. RH-SSO was used at the very first stage to authenticate users to the mobile game. Each attendee had an opportunity to try it by yourself. In total, we had 1200 players of the game.

<p>There was loadbalancer up-front and every user was automatically forwarded to one of the 3 clouds. The mobile application used <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/securing_applications_and_services_guide/openid_connect_3#javascript_adapter">RH-SSO Javascript adapter</a> (keycloak.js) to communicate with RH-SSO.

<p>With Javascript application, whole OpenID Connect login flow happens within browser and hence can rely on sticky session. So since Javascript adapter is used, you may think that we can do just "easy" setup and let the RH-SSO instances across all 3 clouds to be independent of each other and have each of them to use separate RDBMS and infinispan caches. See the image below  for what such a setup would look like:

<img src="https://www.keycloak.org/resources/images/blog/cross-dc-blog-architecture-rhsso.png" />

<p>With this setup, every cloud is aware just about the users and sessions created on itself. This is fine with sticky session, but it won’t work for failover scenarios in case if one of the 3 clouds is broken/removed. There are also other issues with it - for example that admins and users see just sessions created on particular cloud. There are also potential security issues. For example when admin disables user on one cloud, user would still be enabled on other clouds as changes to user won’t be propagated to other clouds.

<p>So we rather want to show more proper setup aware of the replication. Also because one part of the demo was showing failover in action. One of the 3 clouds (Amazon) was killed and users, who were previously logged in Amazon, were redirected to one of the remaining 2 clouds. The point was that the end user won't be able to recognize any change. Hence users previously logged in Amazon must be still able to refresh their tokens in Azure or Private cloud. This in turn meant that the data (both users, user sessions and caches) need to be aware of all 3 clouds.

<p>In Keycloak 3.X, we added support for <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/server_installation_and_configuration_guide/operating-mode#crossdc-mode">Cross-datacenter (Cross-site) setup</a> with usage of external JDG servers to replicate data among datacenters (tech preview in RH-SSO 7.2). The demo was using exactly this setup. Each site had JDG server and all 3 sites communicate with each other through those JDG servers. This is standard JDG Cross-DC setup. See the picture below for what the demo looked like:

<img src="https://www.keycloak.org/resources/images/blog/cross-dc-blog-actual-setup-architecture-rhsso.png" />

<p>The JDG servers were not used during the demo just for the purpose of the RH-SSO, but also for the purpose of other parts of the demo. The details are described in the <a href="https://developers.redhat.com/blog/2018/06/19/red-hat-data-grid-on-three-clouds/">JDG setup blog by  Sebastian Łaskawiec</a>. The JDG servers were setup with ASYNC backups, which was more effective and was completely fine for the purpose of the demo due the fact that mobile application was using keycloak.js adapter. See <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/server_installation_and_configuration_guide/operating-mode#backups">RH-SSO docs</a> for more details.

<h2>Red Hat SSO customizations</h2>

<p>The RH-SSO was using standard <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_middleware_for_openshift/3/html/red_hat_single_sign-on_for_openshift/">RH-SSO openshift image</a> . For Cross-DC setup, we needed to do configuration changes as described in the <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/server_installation_and_configuration_guide/operating-mode#crossdc-mode">RHSSO documentation</a> . Also few other customizations were done.

<h3>JDG User Storage</h3>

<p>RH-SSO Cross-DC setup currently requires both replicated RDBMS and replicated JDG server. When preparing to demo, we figured that using the clustered RDBMS in OpenShift replicated across all 3 clouds, is not very straightforward thing to setup.

<p>Fortunately RH-SSO is highly customizable platform and among other things, it provides supported <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/server_administration_guide/user-storage-federation">User Storage SPI</a> , which allows customers to plug their own storage for RH-SSO users. So instead of setup of replicated RDBMS, we created custom JDG User Storage. So users of the example realm were saved inside JDG instead of the RDBMS Database.

<p>Lessons learned is, that we want to make the Keycloak/RH-SSO Cross-DC setup simpler for administrators. Hence we're considering removing the need for replicated RDBMS entirely and instead store all realms and users metadata within JDG. So just replicated JDG would be a requirement for Cross-DC setup.

<h3>Other customizations</h3>

<p>For the purpose of the demo, we did custom login theme. We also did Email-Only authenticator, which allows to register user just by providing their email address. This is obviously not very secure, but it's pretty neat for the example purpose. Keynote users were also able to login with <a href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.2/html/server_administration_guide/identity_broker#google">Google Identity Provider</a>  or <a href="https://developers.redhat.com/">Red Hat Developers OpenID Connect Identity Provider</a>, which was useful for users, who already had an account in those services.

<img src="https://www.keycloak.org/resources/images/blog/login-screen.png" />

<p>If you want to try all these things in action, you can try to checkout our <a href="https://github.com/rhdemo/rh-sso">Demo Project on Github</a> and deploy it to your own openshift cluster! If you have 3 clouds, even better! You can try the full setup including JDG to try exactly the setup we used during keynote demo.








                </div>




        <h3>For older entries go <a href="blog-archive.html">here</a>.</h3>
    </div>
</div>
		</div>
		<div id="push"></div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-9 col-xs-12">
                    <a href="http://www.redhat.com/" target="_blank">
                        <img alt="redhatlogo-white" src="resources/images/redhatlogo-white.png" width="130">
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
            _satellite.pageBottom();
        }
    </script>
  </body>
</html>