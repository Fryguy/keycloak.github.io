<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Server Developer Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Themes | Server Developer Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../topics/custom-attributes.html" />
    
    
    <link rel="prev" href="../topics/admin-rest-api.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="3"
        data-chapter-title="Themes"
        data-filepath="topics/themes.adoc"
        data-basepath=".."
        data-revision="Wed Feb 08 2017 07:51:10 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/preface.html">
            
                
                    <a href="../topics/preface.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Preface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/admin-rest-api.html">
            
                
                    <a href="../topics/admin-rest-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Admin REST API
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3" data-path="topics/themes.html">
            
                
                    <a href="../topics/themes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Themes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/custom-attributes.html">
            
                
                    <a href="../topics/custom-attributes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Custom User Attributes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/providers.html">
            
                
                    <a href="../topics/providers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Service Provider Interfaces (SPI)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/extensions.html">
            
                
                    <a href="../topics/extensions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Extending Server
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/auth-spi.html">
            
                
                    <a href="../topics/auth-spi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Authentication SPI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/events.html">
            
                
                    <a href="../topics/events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Event Listener SPI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/user-storage.html">
            
                
                    <a href="../topics/user-storage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        User Storage SPI
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/user-storage/provider-interfaces.html">
            
                
                    <a href="../topics/user-storage/provider-interfaces.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Provider Interfaces
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="topics/user-storage/provider-capability-interfaces.html">
            
                
                    <a href="../topics/user-storage/provider-capability-interfaces.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Provider Capability Interfaces
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="topics/user-storage/model-interfaces.html">
            
                
                    <a href="../topics/user-storage/model-interfaces.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Model Interfaces
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="topics/user-storage/packaging.html">
            
                
                    <a href="../topics/user-storage/packaging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Packaging and Deployment
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="topics/user-storage/simple-example.html">
            
                
                    <a href="../topics/user-storage/simple-example.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Simple Read-Only, Lookup Example
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="topics/user-storage/configuration.html">
            
                
                    <a href="../topics/user-storage/configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.6.</b>
                        
                        Configuration Techniques
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="topics/user-storage/registration-query.html">
            
                
                    <a href="../topics/user-storage/registration-query.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.7.</b>
                        
                        Add/Remove User and Query Capability interfaces
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.8" data-path="topics/user-storage/augmenting.html">
            
                
                    <a href="../topics/user-storage/augmenting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.8.</b>
                        
                        Augmenting External Storage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.9" data-path="topics/user-storage/import.html">
            
                
                    <a href="../topics/user-storage/import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.9.</b>
                        
                        Import Implementation Strategy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.10" data-path="topics/user-storage/cache.html">
            
                
                    <a href="../topics/user-storage/cache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.10.</b>
                        
                        User Caches
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.11" data-path="topics/user-storage/javaee.html">
            
                
                    <a href="../topics/user-storage/javaee.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.11.</b>
                        
                        Leveraging Java EE
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.12" data-path="topics/user-storage/rest.html">
            
                
                    <a href="../topics/user-storage/rest.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.12.</b>
                        
                        REST Management API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.13" data-path="topics/user-storage/migration.html">
            
                
                    <a href="../topics/user-storage/migration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.13.</b>
                        
                        Migrating from an Earlier User Federation SPI
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Server Developer Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect1">
<h2 id="_themes">Themes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Keycloak provides theme support for web pages and emails. This allows customizing the look and feel of end-user facing pages so they can be
integrated with your applications.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/login-sunrise.png" alt="login sunrise.png">
</div>
<div class="title">Login page with sunrise example theme</div>
</div>
<div class="sect2">
<h3 id="_theme_types">Theme Types</h3>
<div class="paragraph">
<p>A theme can provide one or more types to customize different aspects of Keycloak. The types available are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Account - Account management</p>
</li>
<li>
<p>Admin - Admin console</p>
</li>
<li>
<p>Email - Emails</p>
</li>
<li>
<p>Login - Login forms</p>
</li>
<li>
<p>Welcome - Welcome page</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configure_theme">Configure Theme</h3>
<div class="paragraph">
<p>All theme types, except welcome, are configured through the <code>Admin Console</code>. To change the theme used for a realm open the <code>Admin Console</code>, select
your realm from the drop-down box in the top left corner. Under <code>Realm Settings</code> click <code>Themes</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To set the theme for the <code>master</code> admin console you need to set the admin console theme for the <code>master</code> realm. To see the changes to the admin console
refresh the page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To change the welcome theme you need to edit <code>standalone.xml</code>, <code>standalone-ha.xml</code>, or <code>domain.xml</code>.
For more information on where the <code>standalone.xml</code>, <code>standalone-ha.xml</code>, or <code>domain.xml</code> file resides see the <a href="https://keycloak.gitbooks.io/server-installation-and-configuration/content/" target="_blank">Server Installation and Configuration Guide</a>.</p>
</div>
<div class="paragraph">
<p>Add <code>welcomeTheme</code> to the theme element, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">theme</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-title">welcomeTheme</span>&gt;</span>custom-theme<span class="hljs-tag">&lt;/<span class="hljs-title">welcomeTheme</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-title">theme</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the server is running you need to restart the server for the changes to the welcome theme to take effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="_default_themes">Default Themes</h3>
<div class="paragraph">
<p>Keycloak comes bundled with default themes in the server&#x2019;s root <code>themes</code> directory. To simplify upgrading you should not edit the bundled themes
directly. Instead create your own theme that extends one of the bundle themes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_theme">Creating a Theme</h3>
<div class="paragraph">
<p>A theme consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML templates (<a href="http://freemarker.org" target="_blank">Freemarker Templates</a>)</p>
</li>
<li>
<p>Images</p>
</li>
<li>
<p>Message bundles</p>
</li>
<li>
<p>Stylesheets</p>
</li>
<li>
<p>Scripts</p>
</li>
<li>
<p>Theme properties</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unless you plan to replace every single page you should extend another theme. Most likely you will want to extend the Keycloak theme, but you could also
consider extending the base theme if you are significantly changing the look and feel of the pages. The base theme primarily consists of HTML templates and
message bundles, while the Keycloak theme primarily contains images and stylesheets.</p>
</div>
<div class="paragraph">
<p>When extending a theme you can override individual resources (templates, stylesheets, etc.). If you decide to override HTML templates bear in mind that you may
need to update your custom template when upgrading to a new release.</p>
</div>
<div class="paragraph">
<p>While creating a theme it&#x2019;s a good idea to disable caching as this makes it possible to edit theme resources directly from the <code>themes</code> directory without
restarting Keycloak. To do this edit <code>standalone.xml</code>. For <code>theme</code> set <code>staticMaxAge</code> to <code>-1</code> and both
<code>cacheTemplates</code> and <code>cacheThemes</code> to <code>false</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">theme</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">staticMaxAge</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-title">staticMaxAge</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cacheThemes</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">cacheThemes</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cacheTemplates</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">cacheTemplates</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-title">theme</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember to re-enable caching in production as it will significantly impact performance.</p>
</div>
<div class="paragraph">
<p>To create a new theme start by creating a new directory in the <code>themes</code> directory. The name of the directory becomes the name of the theme. For example to
create a theme called <code>mytheme</code> create the directory <code>themes/mytheme</code>.</p>
</div>
<div class="paragraph">
<p>Inside the theme directory create a directory for each of the types your theme is going to provide. For example to add the login type to the <code>mytheme</code>
theme create the directory <code>themes/mytheme/login</code>.</p>
</div>
<div class="paragraph">
<p>For each type create a file <code>theme.properties</code> which allows setting some configuration for the theme. For example to configure the theme <code>themes/mytheme/login</code>
that we just created to extend the base theme and import some common resources create the file <code>themes/mytheme/login/theme.properties</code> with following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>parent=base
import=common/keycloak</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have now created a theme with support for the login type. To check that it works open the admin console. Select your realm and click on <code>Themes</code>.
For <code>Login Theme</code> select <code>mytheme</code> and click <code>Save</code>. Then open the login page for the realm.</p>
</div>
<div class="paragraph">
<p>You can do this either by login through your application or by opening the Account Management console (<code>/realms/{realm name}/account</code>).</p>
</div>
<div class="paragraph">
<p>To see the effect of changing the parent theme, set <code>parent=keycloak</code> in <code>theme.properties</code> and refresh the login page.</p>
</div>
<div class="sect3">
<h4 id="_theme_properties">Theme Properties</h4>
<div class="paragraph">
<p>Theme properties are set in the file <code>&lt;THEME TYPE&gt;/theme.properties</code> in the theme directory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>parent - Parent theme to extend</p>
</li>
<li>
<p>import - Import resources from another theme</p>
</li>
<li>
<p>styles - Space-separated list of styles to include</p>
</li>
<li>
<p>locales - Comma-separated list of supported locales</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are a list of properties that can be used to change the css class used for certain element types. For a list of these properties look at the theme.properties
file in the corresponding type of the keycloak theme (<code>themes/keycloak/&lt;THEME TYPE&gt;/theme.properties</code>).</p>
</div>
<div class="paragraph">
<p>You can also add your own custom properties and use them from custom templates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_stylesheets">Stylesheets</h4>
<div class="paragraph">
<p>A theme can have one or more stylesheets, to add a stylesheet create a file in the <code>&lt;THEME TYPE&gt;/resources/css</code> directory of your theme. Then add it to the <code>styles</code>
property in <code>theme.properties</code>.</p>
</div>
<div class="paragraph">
<p>For example to add <code>styles.css</code> to the <code>mytheme</code> create <code>themes/mytheme/login/resources/css/styles.css</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-css" data-lang="css"><span class="hljs-class">.login-pf</span> <span class="hljs-tag">body</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> DimGrey none</span></span>;
}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then edit <code>themes/mytheme/login/theme.properties</code> and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>styles=css/styles.css</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see the changes open the login page for your realm. You will notice that the only styles being applied are those from your custom stylesheet. To include the
styles from the parent theme you need to load the styles from that theme as well. Do this by editing <code>themes/mytheme/login/theme.properties</code> and changing <code>styles</code>
to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>styles=lib/patternfly/css/patternfly.css lib/zocial/zocial.css css/login.css css/styles.css</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To override styles from the parent stylesheets it&#x2019;s important that your stylesheet is listed last.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_scripts">Scripts</h4>
<div class="paragraph">
<p>A theme can have one or more scripts, to add a script create a file in the <code>&lt;THEME TYPE&gt;/resources/js</code> directory of your theme. Then add it to the <code>scripts</code>
property in <code>theme.properties</code>.</p>
</div>
<div class="paragraph">
<p>For example to add <code>script.js</code> to the <code>mytheme</code> create <code>themes/mytheme/login/resources/js/script.js</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">alert(<span class="hljs-string">&apos;Hello&apos;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then edit <code>themes/mytheme/login/theme.properties</code> and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>scripts=js/script.js</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_images">Images</h4>
<div class="paragraph">
<p>To make images available to the theme add them to the <code>&lt;THEME TYPE&gt;/resources/img</code> directory of your theme. These can be used from within stylesheets or
directly in HTML templates.</p>
</div>
<div class="paragraph">
<p>For example to add an image to the <code>mytheme</code> copy an image to <code>themes/mytheme/login/resources/img/image.jpg</code>.</p>
</div>
<div class="paragraph">
<p>You can then use this image from within a custom stylesheet with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-css" data-lang="css"><span class="hljs-tag">body</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">background-image</span>:<span class="hljs-value"> <span class="hljs-function">url</span>(<span class="hljs-string">&apos;../img/image.jpg&apos;</span>)</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">background-size</span>:<span class="hljs-value"> cover</span></span>;
}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or to use directly in HTML templates add the following to a custom HTML template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html"><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;${url.resourcesPath}/img/image.jpg&quot;</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_messages">Messages</h4>
<div class="paragraph">
<p>Text in the templates are loaded from message bundles. A theme that extends another theme will inherit all messages from the parents message bundle and you can
override individual messages by adding <code>&lt;THEME TYPE&gt;/messages/messages_en.properties</code> to your theme.</p>
</div>
<div class="paragraph">
<p>For example to replace <code>Username</code> on the login form with <code>Your Username</code> for the <code>mytheme</code> create the file
<code>themes/mytheme/login/messages/messages_en.properties</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>usernameOrEmail=Your Username</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within a message values like <code>{0}</code> and <code>{1}</code> are replaced with arguments when the message is used. For example {0} in <code>Log in to {0}</code> is replaced with the name
of the realm.</p>
</div>
</div>
<div class="sect3">
<h4 id="_internationalization">Internationalization</h4>
<div class="paragraph">
<p>Keycloak supports internationalization. To enable internationalization for a realm see <a href="https://keycloak.gitbooks.io/server-adminstration-guide/content/" target="_blank">Server Administration Guide</a>. This
section describes how you can add your own language.</p>
</div>
<div class="paragraph">
<p>To add a new language create the file <code>&lt;THEME TYPE&gt;/messages/messages_&lt;LOCALE&gt;</code> in the directory of your theme. Then add it to the <code>locales</code> property in
<code>&lt;THEME TYPE&gt;/theme.properties</code>. For a language to be available to users the realms <code>login</code>, <code>account</code> and <code>email</code> theme has to support the language, so you
need to add your language for those theme types.</p>
</div>
<div class="paragraph">
<p>For example, to add Norwegian translations to the <code>mytheme</code> theme create the file <code>themes/mytheme/login/messages/messages_no.properties</code> with the
following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>usernameOrEmail=Brukernavn
password=Passord</code></pre>
</div>
</div>
<div class="paragraph">
<p>All messages you don&#x2019;t provide a translation for will use the default English translation.</p>
</div>
<div class="paragraph">
<p>Then edit <code>themes/mytheme/login/theme.properties</code> and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>locales=en,no</code></pre>
</div>
</div>
<div class="paragraph">
<p>You also need to do the same for the <code>account</code> and <code>email</code> theme types. To do this create <code>themes/mytheme/account/messages/messages_no.properties</code> and
<code>themes/mytheme/email/messages/messages_no.properties</code>. Leaving these files empty will result in the English messages being used. Then copy
<code>themes/mytheme/login/theme.properties</code> to <code>themes/mytheme/account/theme.properties</code> and <code>themes/mytheme/email/theme.properties</code>.</p>
</div>
<div class="paragraph">
<p>Finally you need to add a translation for the language selector. This is done by adding a message to the English translation. To do this add the following to
<code>themes/mytheme/account/messages/messages_en.properties</code> and <code>themes/mytheme/login/messages/messages_en.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>locale_no=Norsk</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default message properties files should be encoded using ISO-8859-1. It&#x2019;s also possible to specify the encoding using a special header. For example to use UTF-8 encoding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># encoding: UTF-8
usernameOrEmail=....</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_html_templates">HTML Templates</h4>
<div class="paragraph">
<p>Keycloak uses <a href="http://freemarker.org" target="_blank">Freemarker Templates</a> in order to generate HTML. You can override individual templates in your own theme by
creating <code>&lt;THEME TYPE&gt;/&lt;TEMPLATE&gt;.ftl</code>. For a list of templates used see <code>themes/base/&lt;THEME TYPE&gt;</code>.</p>
</div>
<div class="paragraph">
<p>When creating a custom template it is a good idea to copy the template from the base theme to your own theme, then applying the modifications you need. Bear in
mind when upgrading to a new version of Keycloak you may need to update your custom templates to apply changes to the original template if
applicable.</p>
</div>
<div class="paragraph">
<p>For example to create a custom login form for the <code>mytheme</code> theme copy <code>themes/base/login/login.ftl</code> to <code>themes/mytheme/login</code> and open it in an editor.
After the first line (&lt;#import &#x2026;&#x200B;&gt;) add <code>&lt;h1&gt;HELLO WORLD!&lt;/h1&gt;</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html"><span class="hljs-tag">&lt;<span class="hljs-title">#import</span> &quot;<span class="hljs-attribute">template.ftl</span>&quot; <span class="hljs-attribute">as</span> <span class="hljs-attribute">layout</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>HELLO WORLD!<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check out the <a href="http://freemarker.org/docs/index.html" target="_blank">FreeMarker Manual</a> for more details on how to edit templates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_emails">Emails</h4>
<div class="paragraph">
<p>To edit the subject and contents for emails, for example password recovery email, add a message bundle to the <code>email</code> type of your theme. There&#x2019;s three messages for each email. One for the subject, one for the plain text body and one for the html body.</p>
</div>
<div class="paragraph">
<p>To see all emails available take a look at <code>themes/base/email/messages/messages_en.properties</code>.</p>
</div>
<div class="paragraph">
<p>For example to change the password recovery email for the <code>mytheme</code> theme create <code>themes/mytheme/email/messages/messages_en.properties</code> with the following
content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>passwordResetSubject=My password recovery
passwordResetBody=Reset password link: {0}
passwordResetBodyHtml=&lt;a href=&quot;{0}&quot;&gt;Reset password&lt;/a&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying_themes">Deploying Themes</h3>
<div class="paragraph">
<p>Themes can be deployed to Keycloak by copying the theme directory to <code>themes</code> or it can be deployed as an archive. During development copying the
theme to the <code>themes</code> directory, but in production you may want to consider using an <code>archive</code>. An <code>archive</code> makes it simpler to have a versioned copy of
the theme, especially when you have multiple instances of Keycloak for example with clustering.</p>
</div>
<div class="paragraph">
<p>To deploy a theme as an archive you need to create a ZIP archive with the theme resources. You also need to add a file <code>META-INF/keycloak-themes.json</code> to the
archive that lists the available themes in the archive as well as what types each theme provides.</p>
</div>
<div class="paragraph">
<p>For example for the <code>mytheme</code> theme create <code>mytheme.zip</code> with the contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>META-INF/keycloak-themes.json</p>
</li>
<li>
<p>theme/mytheme/login/theme.properties</p>
</li>
<li>
<p>theme/mytheme/login/login.ftl</p>
</li>
<li>
<p>theme/mytheme/login/resources/css/styles.css</p>
</li>
<li>
<p>theme/mytheme/login/resources/img/image.png</p>
</li>
<li>
<p>theme/mytheme/login/messages/messages_en.properties</p>
</li>
<li>
<p>theme/mytheme/email/messages/messages_en.properties</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The contents of <code>META-INF/keycloak-themes.json</code> in this case would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
    &quot;themes&quot;: [{
        &quot;name&quot; : &quot;mytheme&quot;,
        &quot;types&quot;: [ &quot;login&quot;, &quot;email&quot; ]
    }]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A single archive can contain multiple themes and each theme can support one or more types.</p>
</div>
<div class="paragraph">
<p>The deploy the archive to Keycloak you can either manually create a module in <code>modules</code> or use the <code>jboss-cli</code> command. It&#x2019;s simplest to use
<code>jboss-cli</code> as it creates the required directories and module descriptor for you.</p>
</div>
<div class="paragraph">
<p>To deploy <code>mytheme.zip</code> on Linux run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/jboss-cli.sh --command=<span class="hljs-string">&quot;module add --name=org.example.mytheme --resources=mytheme.zip&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On Windows run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>bin\jboss-cli.bat --command=&quot;module add --name=org.example.mytheme --resources=mytheme.zip&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command creates <code>modules/org/example/mytheme/main</code> directory with the <code>mytheme.zip</code> archive and <code>module.xml</code>.</p>
</div>
<div class="paragraph">
<p>To manually create the module create the directory <code>modules/org/keycloak/example/mytheme/main</code>, copy <code>mytheme.zip</code> to this directory and create the file
<code>modules/org/keycloak/example/mytheme/main/module.xml</code> with the contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-pi">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">module</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">&quot;urn:jboss:module:1.3&quot;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;org.keycloak.example.themes&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">resource-root</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">&quot;mytheme.zip&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">resources</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">module</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You also need to register the module with Keycloak. This is done by editing <code>standalone.xml</code>, <code>standalone-ha.xml</code>, or <code>domain.xml</code>.
For more information on where the <code>standalone.xml</code>, <code>standalone-ha.xml</code>, or <code>domain.xml</code> file resides see the <a href="https://keycloak.gitbooks.io/server-installation-and-configuration/content/" target="_blank">Server Installation and Configuration Guide</a>.</p>
</div>
<div class="paragraph">
<p>Then find the <code>theme</code> tag under <code>keycloak-server</code> subsystem and add the module to <code>theme/modules/module</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">theme</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-title">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">module</span>&gt;</span>org.example.mytheme<span class="hljs-tag">&lt;/<span class="hljs-title">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">modules</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">theme</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the server is running you need to restart the server after changing <code>standalone.xml</code>, <code>standalone-ha.xml</code>, or <code>domain.xml</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the same theme is deployed to both the <code>themes</code> directory and as a module the version in the <code>themes</code> directory is used.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../topics/admin-rest-api.html" class="navigation navigation-prev " aria-label="Previous page: Admin REST API"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../topics/custom-attributes.html" class="navigation navigation-next " aria-label="Next page: Custom User Attributes"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Server Developer Guide -->
</html>
