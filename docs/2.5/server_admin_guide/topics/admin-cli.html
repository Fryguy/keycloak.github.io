<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Server Administration Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Admin CLI | Server Administration Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../topics/MigrationFromOlderVersions.html" />
    
    
    <link rel="prev" href="../topics/threat/sql.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="20"
        data-chapter-title="Admin CLI"
        data-filepath="topics/admin-cli.adoc"
        data-basepath=".."
        data-revision="Wed Feb 08 2017 07:51:06 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview.html">
            
                
                    <a href="../topics/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/features.html">
            
                
                    <a href="../topics/overview/features.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Features
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="topics/overview/how.html">
            
                
                    <a href="../topics/overview/how.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        How Does Security Work?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="topics/overview/concepts.html">
            
                
                    <a href="../topics/overview/concepts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Core Concepts and Terms
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/initialization.html">
            
                
                    <a href="../topics/initialization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Server Initialization
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/admin-console.html">
            
                
                    <a href="../topics/admin-console.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Admin Console
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/realms/master.html">
            
                
                    <a href="../topics/realms/master.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        The Master Realm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/realms/create.html">
            
                
                    <a href="../topics/realms/create.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Creating a New Realm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="topics/realms/ssl.html">
            
                
                    <a href="../topics/realms/ssl.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Realm SSL Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="topics/realms/cache.html">
            
                
                    <a href="../topics/realms/cache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Clearing Server Caches
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="topics/realms/email.html">
            
                
                    <a href="../topics/realms/email.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Email Settings
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="topics/realms/themes.html">
            
                
                    <a href="../topics/realms/themes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Themes and Internationalization
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/users.html">
            
                
                    <a href="../topics/users.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        User Management
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/users/viewing.html">
            
                
                    <a href="../topics/users/viewing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Viewing Users
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="topics/users/create-user.html">
            
                
                    <a href="../topics/users/create-user.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Creating New Users
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="topics/users/attributes.html">
            
                
                    <a href="../topics/users/attributes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        User Attributes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="topics/users/credentials.html">
            
                
                    <a href="../topics/users/credentials.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Credentials
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="topics/users/required-actions.html">
            
                
                    <a href="../topics/users/required-actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Required Actions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="topics/users/impersonation.html">
            
                
                    <a href="../topics/users/impersonation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Impersonation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="topics/users/user-registration.html">
            
                
                    <a href="../topics/users/user-registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        User Registration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.7.1" data-path="topics/users/recaptcha.html">
            
                
                    <a href="../topics/users/recaptcha.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.1.</b>
                        
                        Recaptcha Support
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/login-settings.html">
            
                
                    <a href="../topics/login-settings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Login Page Settings
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="topics/login-settings/forgot-password.html">
            
                
                    <a href="../topics/login-settings/forgot-password.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Forgot Password
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="topics/login-settings/remember-me.html">
            
                
                    <a href="../topics/login-settings/remember-me.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Remember Me
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/authentication.html">
            
                
                    <a href="../topics/authentication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Authentication
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="topics/authentication/password-policies.html">
            
                
                    <a href="../topics/authentication/password-policies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Password Policies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="topics/authentication/otp-policies.html">
            
                
                    <a href="../topics/authentication/otp-policies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        OTP Policies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="topics/authentication/flows.html">
            
                
                    <a href="../topics/authentication/flows.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Authentication Flows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="topics/authentication/kerberos.html">
            
                
                    <a href="../topics/authentication/kerberos.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Kerberos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/sso-protocols.html">
            
                
                    <a href="../topics/sso-protocols.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        SSO Protocols
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="topics/sso-protocols/oidc.html">
            
                
                    <a href="../topics/sso-protocols/oidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        OpenID Connect
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="topics/sso-protocols/saml.html">
            
                
                    <a href="../topics/sso-protocols/saml.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        SAML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="topics/sso-protocols/saml-vs-oidc.html">
            
                
                    <a href="../topics/sso-protocols/saml-vs-oidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        OIDC vs. SAML
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/clients.html">
            
                
                    <a href="../topics/clients.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Managing Clients
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="topics/clients/client-oidc.html">
            
                
                    <a href="../topics/clients/client-oidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        OIDC Clients
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="topics/clients/oidc/confidential.html">
            
                
                    <a href="../topics/clients/oidc/confidential.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                        Confidential Client Credentials
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="topics/clients/oidc/service-accounts.html">
            
                
                    <a href="../topics/clients/oidc/service-accounts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.2.</b>
                        
                        Service Accounts
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="topics/clients/client-saml.html">
            
                
                    <a href="../topics/clients/client-saml.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        SAML Clients
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="topics/clients/saml/idp-initiated-login.html">
            
                
                    <a href="../topics/clients/saml/idp-initiated-login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                        IDP Initiated Login
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="topics/clients/saml/entity-descriptors.html">
            
                
                    <a href="../topics/clients/saml/entity-descriptors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                        SAML Entity Descriptors
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="topics/clients/client-link.html">
            
                
                    <a href="../topics/clients/client-link.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Client Links
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="topics/clients/protocol-mappers.html">
            
                
                    <a href="../topics/clients/protocol-mappers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Token and Assertion Mappings
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="topics/clients/installation.html">
            
                
                    <a href="../topics/clients/installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Generating Client Adapter Config
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="topics/clients/client-templates.html">
            
                
                    <a href="../topics/clients/client-templates.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.</b>
                        
                        Client Templates
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/roles.html">
            
                
                    <a href="../topics/roles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Roles
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/roles/realm-roles.html">
            
                
                    <a href="../topics/roles/realm-roles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Realm Roles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="topics/roles/client-roles.html">
            
                
                    <a href="../topics/roles/client-roles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Client Roles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="topics/roles/composite.html">
            
                
                    <a href="../topics/roles/composite.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Composite Roles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="topics/roles/user-role-mappings.html">
            
                
                    <a href="../topics/roles/user-role-mappings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        User Role Mappings
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.4.1" data-path="topics/roles/user-role-mappings/default-roles.html">
            
                
                    <a href="../topics/roles/user-role-mappings/default-roles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.1.</b>
                        
                        Default Roles
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="topics/roles/client-scope.html">
            
                
                    <a href="../topics/roles/client-scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Client Scope
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="topics/groups.html">
            
                
                    <a href="../topics/groups.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Groups
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="topics/groups/groups-vs-roles.html">
            
                
                    <a href="../topics/groups/groups-vs-roles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Groups Vs. Roles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="topics/groups/default-groups.html">
            
                
                    <a href="../topics/groups/default-groups.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Default Groups
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="topics/admin-console-permissions.html">
            
                
                    <a href="../topics/admin-console-permissions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Admin Console Access Control and Permissions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1" data-path="topics/admin-console-permissions/master-realm.html">
            
                
                    <a href="../topics/admin-console-permissions/master-realm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                        Master Realm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="topics/admin-console-permissions/per-realm.html">
            
                
                    <a href="../topics/admin-console-permissions/per-realm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.2.</b>
                        
                        Dedicated Realm Admin Consoles
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="12" data-path="topics/realms/keys.html">
            
                
                    <a href="../topics/realms/keys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Realm Keys
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="topics/identity-broker.html">
            
                
                    <a href="../topics/identity-broker.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Identity Brokering
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.1" data-path="topics/identity-broker/overview.html">
            
                
                    <a href="../topics/identity-broker/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.1.</b>
                        
                        Brokering Overview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="topics/identity-broker/default-provider.html">
            
                
                    <a href="../topics/identity-broker/default-provider.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.2.</b>
                        
                        Default Provider
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="topics/identity-broker/configuration.html">
            
                
                    <a href="../topics/identity-broker/configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.3.</b>
                        
                        General Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4" data-path="topics/identity-broker/social-login.html">
            
                
                    <a href="../topics/identity-broker/social-login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.</b>
                        
                        Social Login
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.4.1" data-path="topics/identity-broker/social/google.html">
            
                
                    <a href="../topics/identity-broker/social/google.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.1.</b>
                        
                        Google
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.2" data-path="topics/identity-broker/social/facebook.html">
            
                
                    <a href="../topics/identity-broker/social/facebook.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.2.</b>
                        
                        Facebook
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.3" data-path="topics/identity-broker/social/twitter.html">
            
                
                    <a href="../topics/identity-broker/social/twitter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.3.</b>
                        
                        Twitter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.4" data-path="topics/identity-broker/social/github.html">
            
                
                    <a href="../topics/identity-broker/social/github.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.4.</b>
                        
                        Github
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.5" data-path="topics/identity-broker/social/linked-in.html">
            
                
                    <a href="../topics/identity-broker/social/linked-in.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.5.</b>
                        
                        Linked-In
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.6" data-path="topics/identity-broker/social/microsoft.html">
            
                
                    <a href="../topics/identity-broker/social/microsoft.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.6.</b>
                        
                        Microsoft
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4.7" data-path="topics/identity-broker/social/stack-overflow.html">
            
                
                    <a href="../topics/identity-broker/social/stack-overflow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.7.</b>
                        
                        Stack Overflow
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13.5" data-path="topics/identity-broker/oidc.html">
            
                
                    <a href="../topics/identity-broker/oidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.5.</b>
                        
                        OIDC Providers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.6" data-path="topics/identity-broker/saml.html">
            
                
                    <a href="../topics/identity-broker/saml.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.6.</b>
                        
                        SAML Providers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.7" data-path="topics/identity-broker/suggested.html">
            
                
                    <a href="../topics/identity-broker/suggested.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.7.</b>
                        
                        Client Suggested Identity Provider
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.8" data-path="topics/identity-broker/mappers.html">
            
                
                    <a href="../topics/identity-broker/mappers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.8.</b>
                        
                        Mapping Claims and Assertions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.9" data-path="topics/identity-broker/session-data.html">
            
                
                    <a href="../topics/identity-broker/session-data.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.9.</b>
                        
                        Available User Session Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.10" data-path="topics/identity-broker/first-login-flow.html">
            
                
                    <a href="../topics/identity-broker/first-login-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.10.</b>
                        
                        First Login Flow
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.11" data-path="topics/identity-broker/tokens.html">
            
                
                    <a href="../topics/identity-broker/tokens.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.11.</b>
                        
                        Retrieving External IDP Tokens
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="14" data-path="topics/sessions.html">
            
                
                    <a href="../topics/sessions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        User Session Management
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="14.1" data-path="topics/sessions/administering.html">
            
                
                    <a href="../topics/sessions/administering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.1.</b>
                        
                        Administering Sessions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14.2" data-path="topics/sessions/revocation.html">
            
                
                    <a href="../topics/sessions/revocation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.2.</b>
                        
                        Revocation Policies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14.3" data-path="topics/sessions/timeouts.html">
            
                
                    <a href="../topics/sessions/timeouts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.3.</b>
                        
                        Session and Token Timeouts
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14.4" data-path="topics/sessions/offline.html">
            
                
                    <a href="../topics/sessions/offline.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.4.</b>
                        
                        Offline Access
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="15" data-path="topics/user-federation.html">
            
                
                    <a href="../topics/user-federation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        User Storage Federation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1" data-path="topics/user-federation/ldap.html">
            
                
                    <a href="../topics/user-federation/ldap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                        LDAP/AD Integration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="topics/user-federation/sssd.html">
            
                
                    <a href="../topics/user-federation/sssd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.2.</b>
                        
                        SSSD and FreeIPA/IdM Integration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.3" data-path="topics/user-federation/custom.html">
            
                
                    <a href="../topics/user-federation/custom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.3.</b>
                        
                        Custom Providers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="16" data-path="topics/events.html">
            
                
                    <a href="../topics/events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Auditing and Events
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="topics/events/login.html">
            
                
                    <a href="../topics/events/login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        Login Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="topics/events/admin.html">
            
                
                    <a href="../topics/events/admin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Admin Events
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="topics/export-import.html">
            
                
                    <a href="../topics/export-import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Export and Import
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="topics/account.html">
            
                
                    <a href="../topics/account.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        User Account Service
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="topics/threat.html">
            
                
                    <a href="../topics/threat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        Threat Model Mitigation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="19.1" data-path="topics/threat/brute-force.html">
            
                
                    <a href="../topics/threat/brute-force.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.1.</b>
                        
                        Password Guess, Brute Force Attacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.2" data-path="topics/threat/clickjacking.html">
            
                
                    <a href="../topics/threat/clickjacking.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.2.</b>
                        
                        Clickjacking
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.3" data-path="topics/threat/ssl.html">
            
                
                    <a href="../topics/threat/ssl.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.3.</b>
                        
                        SSL/HTTPS Requirement
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.4" data-path="topics/threat/csrf.html">
            
                
                    <a href="../topics/threat/csrf.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.4.</b>
                        
                        CSRF
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.5" data-path="topics/threat/redirect.html">
            
                
                    <a href="../topics/threat/redirect.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.5.</b>
                        
                        Unspecific Redirect URIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.6" data-path="topics/threat/compromised-tokens.html">
            
                
                    <a href="../topics/threat/compromised-tokens.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.6.</b>
                        
                        Compromised Access and Refresh tokens
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.7" data-path="topics/threat/compromised-codes.html">
            
                
                    <a href="../topics/threat/compromised-codes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.7.</b>
                        
                        Compromised Access Codes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.8" data-path="topics/threat/open-redirect.html">
            
                
                    <a href="../topics/threat/open-redirect.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.8.</b>
                        
                        Open Redirectors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.9" data-path="topics/threat/password-db-compromised.html">
            
                
                    <a href="../topics/threat/password-db-compromised.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.9.</b>
                        
                        Password database compromised
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.10" data-path="topics/threat/scope.html">
            
                
                    <a href="../topics/threat/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.10.</b>
                        
                        Limiting Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19.11" data-path="topics/threat/sql.html">
            
                
                    <a href="../topics/threat/sql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.11.</b>
                        
                        SQL Injection Attacks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="20" data-path="topics/admin-cli.html">
            
                
                    <a href="../topics/admin-cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        Admin CLI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="topics/MigrationFromOlderVersions.html">
            
                
                    <a href="../topics/MigrationFromOlderVersions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        Migration from older versions
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Server Administration Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect1">
<h2 id="_admin_cli">Admin CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In previous chapters we have described how to use the Keycloak Admin Console to perform administrative tasks.
All those tasks can also be performed from command line by using Admin CLI command line tool.</p>
</div>
<div class="sect2">
<h3 id="_installing_admin_cli">Installing Admin CLI</h3>
<div class="paragraph">
<p>Admin CLI is packaged inside Keycloak Server distribution. You can find execution scripts inside <code>bin</code> directory.</p>
</div>
<div class="paragraph">
<p>The Linux script is called <code>kcadm.sh</code>, and the one for Windows is called <code>kcadm.bat</code>.</p>
</div>
<div class="paragraph">
<p>In order to setup the client to be used from any location on the filesystem you may want to add Keycloak server directory to your PATH.</p>
</div>
<div class="paragraph">
<p>On Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ export PATH=$PATH:$KEYCLOAK_HOME/bin
$ kcadm.sh</pre>
</div>
</div>
<div class="paragraph">
<p>On Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; set PATH=%PATH%;%KEYCLOAK_HOME%\bin
c:\&gt; kcadm</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To avoid unnecessary repetition the rest of this document will only give Windows examples in places where difference
in command line is more than just in <code>kcadm</code> command name.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_admin_cli">Using Admin CLI</h3>
<div class="paragraph">
<p>Usually a user will first start an authenticated session by providing credentials, then perform some CRUD operations.</p>
</div>
<div class="paragraph">
<p>For example on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh config credentials --server http://localhost:8080/auth --realm demo --user admin --client admin
$ kcadm.sh create realms -s realm=demorealm -s enabled=true -o
$ CID=$(kcadm.sh create clients -r demorealm -s clientId=my_client -s &apos;redirectUris=[&quot;http://localhost:8980/myapp/*&quot;]&apos; -i)
$ kcadm.sh get clients/$CID/installation/providers/keycloak-oidc-keycloak-json</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm config credentials --server http://localhost:8080/auth --realm demo --user admin --client admin
c:\&gt; kcadm create realms -s realm=demorealm -s enabled=true -o
c:\&gt; kcadm create clients -r demorealm -s clientId=my_client -s &quot;redirectUris=[\&quot;http://localhost:8980/myapp/*\&quot;]&quot; -i &gt; clientid.txt
c:\&gt; set /p CID=&lt;clientid.txt
c:\&gt; kcadm get clients/%CID%/installation/providers/keycloak-oidc-keycloak-json</pre>
</div>
</div>
<div class="paragraph">
<p>In a production environment Keycloak has to be accessed with <code>https:</code> to avoid exposing tokens to network sniffers. If server&#x2019;s
certificate is not issued by one of the trusted CAs that are included in Java&#x2019;s default certificate truststore, then you will
need to prepare a truststore.jks file, and instruct <code>Admin CLI</code> to use it.</p>
</div>
<div class="paragraph">
<p>For example on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh config truststore --trustpass $PASSWORD ~/.keycloak/truststore.jks</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm config truststore --trustpass %PASSWORD% %HOMEPATH%\.keycloak\truststore.jks</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authenticating">Authenticating</h3>
<div class="paragraph">
<p>Admin CLI works by making HTTP requests to Admin REST endpoints. Access to them is protected and requires authentication.</p>
</div>
<div class="paragraph">
<p>When logging in with <code>Admin CLI</code> you specify a server endpoint url, and a realm. Then you specify a username,
or alternatively you can only specify a client id, which will result in special service account being used. In the first case,
a password for the specified user has to be used at login. In the latter case there is no user password - only client secret
or a <code>Signed JWT</code> is used.</p>
</div>
<div class="paragraph">
<p>The account that logs in needs to have proper permissions in order to be able to invoke Admin REST API operations.
Specifically - <code>realm-admin</code> role of <code>realm-management</code> client is required for user to administer the realm within which the user is defined.</p>
</div>
<div class="paragraph">
<p>There are two primary mechanisms to authenticate. One is by using <code>kcadm config credentials</code> to start an authenticated session:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh config credentials --server http://localhost:8080/auth --realm master --user admin --password admin</pre>
</div>
</div>
<div class="paragraph">
<p>This approach maintains an authenticated session between <code>kcadm</code> command invocations by saving the obtained access token, and
associated refresh token, possibly other secrets as well in a private configuration file. By default this file is called <code>kcadm.config</code>
and is located under user&#x2019;s home directory - it&#x2019;s full pathname is <code>$HOME/.keycloak/kcadm.config</code> (on Windows it&#x2019;s <code>%HOMEPATH%\.keycloak\kcadm.config</code>).
The file can be named something else by using <code>-c, --config</code> option.</p>
</div>
<div class="paragraph">
<p>See <a href="fake/.html#_working_with_alternative_configurations">next chapter</a> for more info on configuration file.</p>
</div>
<div class="paragraph">
<p>Another approach is to authenticate with each command invocation for the duration of that invocation only. This approach results
in more load on the server, and more time spent with round-trips obtaining tokens, but has a benefit of not needing to save any
tokens between invocations, thus nothing is saved to disk.</p>
</div>
<div class="paragraph">
<p>For example, when performing an operation we specify all the information required for authentication:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms --no-config --server http://localhost:8080/auth --realm master --user admin --password admin</pre>
</div>
</div>
<div class="paragraph">
<p>See built-in help for more information on using <code>Admin CLI</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh help</pre>
</div>
</div>
<div class="paragraph">
<p>See <code>kcadm.sh config credentials --help</code> for more information about starting an authenticated session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_alternative_configurations">Working with alternative configurations</h3>
<div class="paragraph">
<p>By default, <code>Admin CLI</code> automatically maintains a configuration file at a default location - <code>.keycloak/kcadm.config</code>
under user&#x2019;s home directory.</p>
</div>
<div class="paragraph">
<p>You can use <code>--config</code> option at any time to point to a different file / location. This way you can mantain multiple authenticated
sessions in parallel. It is safest to perform operations tied to a single config file from a single thread.</p>
</div>
<div class="paragraph">
<p>Make sure to not make a config file visible to other users on the system as it contains access tokens, and secrets that should be kept private.</p>
</div>
<div class="paragraph">
<p>You may want to avoid storing any secrets at all inside a config file for the price of less convenience and having to do more token requests.
In that case you can use <code>--no-config</code> option with all your commands. You will have to specify all authentication info with each
<code>kcadm</code> invocation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_operations_and_resource_uris">Basic operations, and resource URIs</h3>
<div class="paragraph">
<p>Admin CLI allows you to perform CRUD operations against Admin REST API endpoints in quite a generic way, with additional commands
that simplify performing certain actions.</p>
</div>
<div class="paragraph">
<p>Main usage pattern is the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create ENDPOINT [ARGUMENTS]
$ kcadm.sh get ENDPOINT [ARGUMENTS]
$ kcadm.sh update ENDPOINT [ARGUMENTS]
$ kcadm.sh delete ENDPOINT [ARGUMENTS]</pre>
</div>
</div>
<div class="paragraph">
<p>Where operations <code>create</code>, <code>get</code>, <code>update</code>, and <code>delete</code> are mapped to HTTP verbs POST, GET, PUT, and DELETE, respectively.
ENDPOINT is a target resource URI, and can either be absolute - starting with &apos;http:&apos; or &apos;https:&apos;, or relative - used to compose an absolute URL
of the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>SERVER_URI/admin/realms/REALM/ENDPOINT</pre>
</div>
</div>
<div class="paragraph">
<p>For example, if the server we authenticate against is <code>http://localhost:8080/auth</code>, and realm is <code>master</code>, then using <code>users</code> as ENDPOINT
will result in the following resource URL: <code>http://localhost:8080/auth/admin/realms/master/users</code>.</p>
</div>
<div class="paragraph">
<p>If we set ENDPOINT to <code>clients</code> the effective resource URI would be: <code>http://localhost:8080/auth/admin/realms/master/clients</code>.</p>
</div>
<div class="paragraph">
<p>There is <code>realms</code> endpoint which is treated slightly differently since it is the container for realms. It resolves simply to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>SERVER_URI/admin/realms</pre>
</div>
</div>
<div class="paragraph">
<p>There is also <code>serverinfo</code> which is treated the same way since it is independent of realms.</p>
</div>
<div class="paragraph">
<p>When authenticating as a user with realm-admin powers you may need to perform operations on multiple different realms. In that case
you can specify <code>-r, --target-realm</code> option to tell explicitly which realm the operation should be executed against.
Instead of using REALM as specified via <code>--realm</code> option of <code>kcadm.sh config credentials</code>, the TARGET_REALM will be used:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>SERVER_URI/admin/realms/TARGET_REALM/ENDPOINT</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh config credentials --server http://localhost:8080/auth --realm master --user admin --password admin
$ kcadm.sh create users -s username=testuser -s enabled=true -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>In this example we first start a session authenticated as <code>admin</code> user in <code>master</code> realm. Then we perform a POST call against the following
resource URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://localhost:8080/auth/admin/realms/demorealm/users</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_realm_operations">Realm operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating a new realm</dt>
<dd>
<p>A new realm can be created by specifying individual attributes on command line. They will be converted into a JSON document
and sent to the server:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create realms -s realm=demorealm -s enabled=true</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Realm is not enabled by default. By enabling it, it can be used for authentication immediately.</p>
</div>
<div class="paragraph">
<p>A description for a new object can be in JSON format as well:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create realms -f demorealm.json</pre>
</div>
</div>
<div class="paragraph">
<p>JSON document with realm attributes can be sent directly from file or piped to standard input.</p>
</div>
<div class="paragraph">
<p>For example on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create realms -f - &lt;&lt; EOF
{ &quot;realm&quot;: &quot;demorealm&quot;, &quot;enabled&quot;: true }
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; echo { &quot;realm&quot;: &quot;demorealm&quot;, &quot;enabled&quot;: true } | kcadm create realms -f -</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing existing realms</dt>
<dd>
<p>The following will return a list of all the realms:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note, that the list of realms returned is additionally filtered on the server to only return realms the user has permissions for.</p>
</div>
<div class="paragraph">
<p>Often that is too much information as we may only be interested in realm name, or - for example - if it is enabled or not.
You can specify the attributes to return by using <code>--fields</code> option:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms --fields realm,enabled</pre>
</div>
</div>
<div class="paragraph">
<p>You may even display the result as comma separated values:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms --fields realm --format csv --noquotes</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting a specific realm</dt>
<dd>
<p>As is common for REST web services, in order to get an individual item of a collection, append an id to collection URI:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms/master</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Updating a realm</dt>
<dd>
<p>There are several options when updating any resource. You can first get current state of resource, and save it into a file,
then edit that file, and send it to server for update. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms/demorealm &gt; demorealm.json
$ vi demorealm.json
$ kcadm.sh update realms/demorealm -f demorealm.json</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This way the resource on the server will be updated with all the attributes in the sent JSON document.</p>
</div>
<div class="paragraph">
<p>Another option is to perform the update on-the-fly using <code>-s, --set</code> options to set new values:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update realms/demorealm -s enabled=false</pre>
</div>
</div>
<div class="paragraph">
<p>That would only update <code>enabled</code> attribute to <code>false</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deleting a realm</dt>
<dd>
<p>It&#x2019;s very simple to delete a realm:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete realms/demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Turning on all login page options for the realm</dt>
<dd>
<p>Set the attributes controlling specific capabilites to <code>true</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update realms/demorealm -s registrationAllowed=true -s registrationEmailAsUsername=true -s rememberMe=true -s verifyEmail=true -s resetPasswordAllowed=true -s editUsernameAllowed=true</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing the realm keys</dt>
<dd>
<p>It&#x2019;s very simple to list the realm keys for a specific realm:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get keys -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Generating new realm keys</dt>
<dd>
<p>To add a new RSA generated keypair, first get <code>id</code> of the target realm. For example, to get <code>id</code> for a realm whose <code>realm</code> attribute is &apos;demorealm&apos;:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms/demorealm --fields id --format csv --noquotes</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Then add a new key provider with higher priority than any of the existing providers as revealed by <code>kcadm.sh get keys -r demorealm</code>:</p>
</div>
<div class="paragraph">
<p>For example on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=rsa-generated -s providerId=rsa-generated -s providerType=org.keycloak.keys.KeyProvider -s parentId=959844c1-d149-41d7-8359-6aa527fca0b0 -s &apos;config.priority=[&quot;101&quot;]&apos; -s &apos;config.enabled=[&quot;true&quot;]&apos; -s &apos;config.active=[&quot;true&quot;]&apos; -s &apos;config.keySize=[&quot;2048&quot;]&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm create components -r demorealm -s name=rsa-generated -s providerId=rsa-generated -s providerType=org.keycloak.keys.KeyProvider -s parentId=959844c1-d149-41d7-8359-6aa527fca0b0 -s &quot;config.priority=[\&quot;101\&quot;]&quot; -s &quot;config.enabled=[\&quot;true\&quot;]&quot; -s &quot;config.active=[\&quot;true\&quot;]&quot; -s &quot;config.keySize=[\&quot;2048\&quot;]&quot;</pre>
</div>
</div>
<div class="paragraph">
<p>Attribute <code>parentId</code> should be set to the value of target realm&#x2019;s <code>id</code>.</p>
</div>
<div class="paragraph">
<p>The newly added key should now become the active key as revealed by <code>kcadm.sh get keys -r demorealm</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding new realm keys from Java Key Store file</dt>
<dd>
<p>To add a new keypair already prepared as a JKS file on the server, add a new key provider as follows:</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For exmple on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=java-keystore -s providerId=java-keystore -s providerType=org.keycloak.keys.KeyProvider -s parentId=959844c1-d149-41d7-8359-6aa527fca0b0 -s &apos;config.priority=[&quot;101&quot;]&apos; -s &apos;config.enabled=[&quot;true&quot;]&apos; -s &apos;config.active=[&quot;true&quot;]&apos; -s &apos;config.keystore=[&quot;/opt/keycloak/keystore.jks&quot;]&apos; -s &apos;config.keystorePassword=[&quot;secret&quot;]&apos; -s &apos;config.keyPassword=[&quot;secret&quot;]&apos; -s &apos;config.alias=[&quot;localhost&quot;]&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm create components -r demorealm -s name=java-keystore -s providerId=java-keystore -s providerType=org.keycloak.keys.KeyProvider -s parentId=959844c1-d149-41d7-8359-6aa527fca0b0 -s &quot;config.priority=[\&quot;101\&quot;]&quot; -s &quot;config.enabled=[\&quot;true\&quot;]&quot; -s &quot;config.active=[\&quot;true\&quot;]&quot; -s &quot;config.keystore=[\&quot;/opt/keycloak/keystore.jks\&quot;]&quot; -s &quot;config.keystorePassword=[\&quot;secret\&quot;]&quot; -s &quot;config.keyPassword=[\&quot;secret\&quot;]&quot; -s &quot;config.alias=[\&quot;localhost\&quot;]&quot;</pre>
</div>
</div>
<div class="paragraph">
<p>And change attribute values for <code>keystore</code>, <code>keystorePassword</code>, <code>keyPassword</code>, and <code>alias</code> to match your specific keystore.</p>
</div>
<div class="paragraph">
<p>Attribute <code>parentId</code> should be set to the value of target realm&#x2019;s <code>id</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Making key passive or disabling it</dt>
<dd>
<p>Identify the key you wish to make passive:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get keys -r demorealm</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Use <code>providerId</code> attribute of the key to construct an endpoint uri - <code>components/PROVIDER_ID</code>.</p>
</div>
<div class="paragraph">
<p>Then perform an <code>update</code>. For example on Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update components/PROVIDER_ID -r demorealm -s &apos;config.active=[&quot;false&quot;]&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm update components/PROVIDER_ID -r demorealm -s &quot;config.active=[\&quot;false\&quot;]&quot;</pre>
</div>
</div>
<div class="paragraph">
<p>Analogously, other key attributes can be updated.</p>
</div>
<div class="paragraph">
<p>To disable the key set new <code>enabled</code> value, for example: <code>&apos;config.enabled=[&quot;false&quot;]&apos;</code></p>
</div>
<div class="paragraph">
<p>To change key&#x2019;s priority set new <code>priority</code> value, for example: <code>&apos;config.priority=[&quot;110&quot;]&apos;</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deleting an old key</dt>
<dd>
<p>Make sure that the key you are deleting has been passive for some time, and then disabled for some time in order to prevent any existing tokens
held by applications and users from abruptly failing to work.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Identify the key you wish to make passive:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get keys -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>providerId</code> of that key to perform a delete. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete components/PROVIDER_ID -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuring event logging for a realm</dt>
<dd>
<p>Use <code>update</code> against <code>events/config</code> endpoint.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Attribute &apos;eventsListeners&apos; sets the list of EventListenerProviderFactory &apos;id&#x2019;s specifying all the event listeners receiving events.
Separately from that there are attributes that control a built-in event storage which allows querying of past events via Admin REST API.
There is separate control over logging of service calls - &apos;eventsEnabled&apos;, and auditing events triggered during Admin Console or Admin REST API - &apos;adminEventsEnabled&apos;.
You may want to limit the time when old events expire so that your database doesn&#x2019;t get filled up - &apos;eventsExpiration&apos; is set to time-to-live expressed in seconds.</p>
</div>
<div class="paragraph">
<p>For example, this is how you set a built-in event listener that will receive all the events and log them through jboss-logging (error events are logged as <code>WARN</code>, others as <code>DEBUG</code>, using a logger called <code>org.keycloak.events</code>):</p>
</div>
<div class="paragraph">
<p>On Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update events/config -r demorealm -s &apos;eventsListeners=[&quot;jboss-logging&quot;]&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm update events/config -r demorealm -s &quot;eventsListeners=[\&quot;jboss-logging\&quot;]&quot;</pre>
</div>
</div>
<div class="paragraph">
<p>This is how you turn on storage of all available ERROR events - not auditing events - for 2 days so they can be retrieved via Admin REST:</p>
</div>
<div class="paragraph">
<p>On Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update events/config -r demorealm -s eventsEnabled=true -s &apos;enabledEventTypes=[&quot;LOGIN_ERROR&quot;,&quot;REGISTER_ERROR&quot;,&quot;LOGOUT_ERROR&quot;,&quot;CODE_TO_TOKEN_ERROR&quot;,&quot;CLIENT_LOGIN_ERROR&quot;,&quot;FEDERATED_IDENTITY_LINK_ERROR&quot;,&quot;REMOVE_FEDERATED_IDENTITY_ERROR&quot;,&quot;UPDATE_EMAIL_ERROR&quot;,&quot;UPDATE_PROFILE_ERROR&quot;,&quot;UPDATE_PASSWORD_ERROR&quot;,&quot;UPDATE_TOTP_ERROR&quot;,&quot;VERIFY_EMAIL_ERROR&quot;,&quot;REMOVE_TOTP_ERROR&quot;,&quot;SEND_VERIFY_EMAIL_ERROR&quot;,&quot;SEND_RESET_PASSWORD_ERROR&quot;,&quot;SEND_IDENTITY_PROVIDER_LINK_ERROR&quot;,&quot;RESET_PASSWORD_ERROR&quot;,&quot;IDENTITY_PROVIDER_FIRST_LOGIN_ERROR&quot;,&quot;IDENTITY_PROVIDER_POST_LOGIN_ERROR&quot;,&quot;CUSTOM_REQUIRED_ACTION_ERROR&quot;,&quot;EXECUTE_ACTIONS_ERROR&quot;,&quot;CLIENT_REGISTER_ERROR&quot;,&quot;CLIENT_UPDATE_ERROR&quot;,&quot;CLIENT_DELETE_ERROR&quot;]&apos; -s eventsExpiration=172800</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm update events/config -r demorealm -s eventsEnabled=true -s &quot;enabledEventTypes=[\&quot;LOGIN_ERROR\&quot;,\&quot;REGISTER_ERROR\&quot;,\&quot;LOGOUT_ERROR\&quot;,\&quot;CODE_TO_TOKEN_ERROR\&quot;,\&quot;CLIENT_LOGIN_ERROR\&quot;,\&quot;FEDERATED_IDENTITY_LINK_ERROR\&quot;,\&quot;REMOVE_FEDERATED_IDENTITY_ERROR\&quot;,\&quot;UPDATE_EMAIL_ERROR\&quot;,\&quot;UPDATE_PROFILE_ERROR\&quot;,\&quot;UPDATE_PASSWORD_ERROR\&quot;,\&quot;UPDATE_TOTP_ERROR\&quot;,\&quot;VERIFY_EMAIL_ERROR\&quot;,\&quot;REMOVE_TOTP_ERROR\&quot;,\&quot;SEND_VERIFY_EMAIL_ERROR\&quot;,\&quot;SEND_RESET_PASSWORD_ERROR\&quot;,\&quot;SEND_IDENTITY_PROVIDER_LINK_ERROR\&quot;,\&quot;RESET_PASSWORD_ERROR\&quot;,\&quot;IDENTITY_PROVIDER_FIRST_LOGIN_ERROR\&quot;,\&quot;IDENTITY_PROVIDER_POST_LOGIN_ERROR\&quot;,\&quot;CUSTOM_REQUIRED_ACTION_ERROR\&quot;,\&quot;EXECUTE_ACTIONS_ERROR\&quot;,\&quot;CLIENT_REGISTER_ERROR\&quot;,\&quot;CLIENT_UPDATE_ERROR\&quot;,\&quot;CLIENT_DELETE_ERROR\&quot;]&quot; -s eventsExpiration=172800</pre>
</div>
</div>
<div class="paragraph">
<p>This is how you reset stored event types to <code>all available event types</code> - setting to empty list is the same as enumerating all:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update events/config -r demorealm -s enabledEventTypes=[]</pre>
</div>
</div>
<div class="paragraph">
<p>And this is how you turn on auditing events:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update events/config -r demorealm -s adminEventsEnabled=true -s adminEventsDetailsEnabled=true</pre>
</div>
</div>
<div class="paragraph">
<p>Here is how you get the last 100 events - they are ordered from newest to oldest:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get events --offset 0 --limit 100</pre>
</div>
</div>
<div class="paragraph">
<p>Here is how you delete all saved events:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm delete events</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Flushing the caches</dt>
<dd>
<p>Use <code>create</code> operation, and one of the following endpoints: <code>clear-realm-cache</code>, <code>clear-user-cache</code>, <code>clear-keys-cache</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Set <code>realm</code> to the same value as target realm.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create clear-realm-cache -r demorealm -s realm=demorealm</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create clear-user-cache -r demorealm -s realm=demorealm</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create clear-keys-cache -r demorealm -s realm=demorealm</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_role_operations">Role operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating a realm role</dt>
<dd>
<p>To create a realm role use <code>roles</code> endpoint:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create roles -r demorealm -s name=user -s &apos;description=Regular user with limited set of permissions&apos;</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Creating a client role</dt>
<dd>
<p>To create a client role identify the client first - use <code>get</code> to list available clients:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients -r demorealm --fields id,clientId</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Then create a new role by using client&#x2019;s <code>id</code> attribute to construct an endpoint uri - <code>clients/ID/roles</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create clients/a95b6af3-0bdc-4878-ae2e-6d61a4eca9a0/roles -r demorealm -s name=editor -s &apos;description=Editor can edit, and publish any article&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing realm roles</dt>
<dd>
<p>To list existing realm roles use <code>get</code> command:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get roles -r demorealm</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can also use <code>get-roles</code> command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing client roles</dt>
<dd>
<p>Use special <code>get-roles</code> command, passing it either <code>clientId</code> (via <code>--cclientid</code> option) or <code>id</code> (via <code>--cid</code> option) to identify the client, and list defined roles:</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --cclientid realm-management</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use <code>get</code> but it may not be as convenient. First, you need to find an <code>id</code> of the client you&#x2019;re interested in - use <code>get</code>
to list available clients, for example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients -r demorealm --fields id,clientId</pre>
</div>
</div>
<div class="paragraph">
<p>Then use client&#x2019;s <code>id</code> attribute to construct an endpoint uri for listing client roles - <code>clients/ID/roles</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients/a95b6af3-0bdc-4878-ae2e-6d61a4eca9a0/roles -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting a specific realm role</dt>
<dd>
<p>Use <code>get</code> command, and role <code>name</code> to construct an endpoint uri for a specific realm role - <code>roles/ROLE_NAME</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get roles/user -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>user</code> is the name of existing role.</p>
</div>
<div class="paragraph">
<p>Alternatively, use special <code>get-roles</code> command, passing it role <code>name</code> (via <code>--rolename</code> option) or <code>id</code> (via <code>--roleid</code> option).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-role -r demorealm --rolename user</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting a specific client role</dt>
<dd>
<p>Use special <code>get-roles</code> command, passing it either <code>clientId</code> (via <code>--cclientid</code> option) or <code>id</code> (via <code>--cid</code> option) to identify the client,
and passing it either role <code>name</code> (via <code>--rolename</code> option) or &apos;id&apos; (via --roleid) to identify a specific client role:</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --cclientid realm-management --rolename manage-clients</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, use client&#x2019;s <code>id</code>, and role <code>name</code> to construct an endpoint uri for a specific client role - <code>clients/ID/roles/ROLE_NAME</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients/a95b6af3-0bdc-4878-ae2e-6d61a4eca9a0/roles/editor -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>editor</code> is the <code>name</code> of the role we&#x2019;re interested in.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Updating a realm role</dt>
<dd>
<p>Use <code>update</code> operation with the same endpoint uri as for getting a specific realm role. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update roles/user -r demorealm -s &apos;description=Role representing a regular user&apos;</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Updating a client role</dt>
<dd>
<p>Use <code>update</code> operation with the same endpoint uri as for getting a specific client role. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update clients/a95b6af3-0bdc-4878-ae2e-6d61a4eca9a0/roles/editor -r demorealm -s &apos;description=User that can edit, and publish articles&apos;</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Deleting a realm role</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific realm role. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete roles/user -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Deleting a client role</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific client role. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete clients/a95b6af3-0bdc-4878-ae2e-6d61a4eca9a0/roles/editor -r demorealm</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_client_operations">Client operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating a client</dt>
<dd>
<p>A new client can be created by using <code>create</code> command against <code>clients</code> endpoint. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create clients -r demorealm -s clientId=myapp -s enabled=true</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Listing clients</dt>
<dd>
<p>It&#x2019;s very easy to list existing clients. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients -r demorealm --fields id,clientId</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Here we filter the output to only list <code>id</code>, and <code>clientId</code> attributes.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting a specific client</dt>
<dd>
<p>Use client&#x2019;s <code>id</code> to construct an endpoint uri targeting specific client - <code>clients/ID</code>. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients/c7b8547f-e748-4333-95d0-410b76b3f4a3 -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Getting adapter configuration file (keycloak.json) for specific client</dt>
<dd>
<p>Use client&#x2019;s <code>id</code> to construct an endpoint uri targeting specific client - <code>clients/ID/installation/providers/keycloak-oidc-keycloak-json</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients/c7b8547f-e748-4333-95d0-410b76b3f4a3/installation/providers/keycloak-oidc-keycloak-json -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting Wildfly subsystem adapter configuration for specific client</dt>
<dd>
<p>Use client&#x2019;s <code>id</code> to construct an endpoint uri targeting specific client - <code>clients/ID/installation/providers/keycloak-oidc-jboss-subsystem</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get clients/c7b8547f-e748-4333-95d0-410b76b3f4a3/installation/providers/keycloak-oidc-jboss-subsystem -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Updating a client</dt>
<dd>
<p>Use <code>update</code> operation with the same endpoint uri as for getting a specific client. For example on Linux:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update clients/c7b8547f-e748-4333-95d0-410b76b3f4a3 -r demorealm -s enabled=false -s publicClient=true -s &apos;redirectUris=[&quot;http://localhost:8080/myapp/*&quot;]&apos; -s baseUrl=http://localhost:8080/myapp -s adminUrl=http://localhost:8080/myapp</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm update clients/c7b8547f-e748-4333-95d0-410b76b3f4a3 -r demorealm -s enabled=false -s publicClient=true -s &quot;redirectUris=[\&quot;http://localhost:8080/myapp/*\&quot;]&quot; -s baseUrl=http://localhost:8080/myapp -s adminUrl=http://localhost:8080/myapp</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deleting a client</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific client. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete clients/c7b8547f-e748-4333-95d0-410b76b3f4a3 -r demorealm</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_user_operations">User operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating a user</dt>
<dd>
<p>A new user can be created using <code>create</code> command agains <code>users</code> endpoint. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create users -r demorealm -s username=testuser -s enabled=true</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Listing users</dt>
<dd>
<p>Use <code>users</code> endpoint to list users. Number of users may be large, and you may want to limit how many are returned:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users -r demorealm --offset 0 --limit 1000</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>It&#x2019;s also possible to filter users by <code>username</code>, <code>firstName</code>, <code>lastName</code>, or <code>email</code>. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users -r demorealm -q email=google.com
$ kcadm.sh get users -r demorealm -q username=testuser</pre>
</div>
</div>
<div class="paragraph">
<p>Note that filtering doesn&#x2019;t use exact matching. For example, the above would match the value of <code>username</code> attribute against &apos;<strong>testuser</strong>&apos; pattern.</p>
</div>
<div class="paragraph">
<p>You can also filter across multiple attributes by specifying multiple <code>-q</code> options, which would return only users
that match condition for all the attributes.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting a specific user</dt>
<dd>
<p>Use user <code>id</code> to compose an endpoint uri matching a specific user - <code>users/USER_ID</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users/0ba7a3fd-6fd8-48cd-a60b-2e8fd82d56e2 -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Updating a user</dt>
<dd>
<p>Use <code>update</code> operation with the same endpoint uri as for getting a specific user. For example on Linux:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update users/0ba7a3fd-6fd8-48cd-a60b-2e8fd82d56e2 -r demorealm -s &apos;requiredActions=[&quot;VERIFY_EMAIL&quot;,&quot;UPDATE_PROFILE&quot;,&quot;CONFIGURE_TOTP&quot;,&quot;UPDATE_PASSWORD&quot;]&apos;</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; kcadm update users/0ba7a3fd-6fd8-48cd-a60b-2e8fd82d56e2 -r demorealm -s &quot;requiredActions=[\&quot;VERIFY_EMAIL\&quot;,\&quot;UPDATE_PROFILE\&quot;,\&quot;CONFIGURE_TOTP\&quot;,\&quot;UPDATE_PASSWORD\&quot;]&quot;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deleting a user</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific user. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete users/0ba7a3fd-6fd8-48cd-a60b-2e8fd82d56e2 -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Resetting user&#x2019;s password</dt>
<dd>
<p>There is a dedicated <code>set-password</code> command specifically to reset user&#x2019;s password. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh set-password -r demorealm --username testuser --password NEWPASSWORD --temporary</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>That will set a temporary password for the user, which they will have to change the next time they login.</p>
</div>
<div class="paragraph">
<p>You can use <code>--userid</code> if you want to specify the user by using <code>id</code> attribute.</p>
</div>
<div class="paragraph">
<p>The same can be achieved using the <code>update</code> operation against an endpoint constructed from one for getting a specific user - <code>users/USER_ID/reset-password</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update users/0ba7a3fd-6fd8-48cd-a60b-2e8fd82d56e2/reset-password -r demorealm -s type=password -s value=NEWPASSWORD -s temporary=true -n</pre>
</div>
</div>
<div class="paragraph">
<p>The last parameter (<code>-n</code>) forces a so called &apos;no-merge&apos; update which performs a PUT only, without first doing a GET to retrieve current
state of the resource. In this case it is necessary since <code>reset-password</code> endpoint doesn&#x2019;t support GET.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing assigned, available, and effective realm roles for a user</dt>
<dd>
<p>There is a dedicated <code>get-roles</code> command to simplify listing of both realm and client roles. It is an extension of <code>get</code> command thus it behaves
like <code>get</code> command with additional semantics for listing roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> realm roles for the user you can specify the target user by either <code>username</code> or <code>id</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, use additional <code>--effective</code> option.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser --effective</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the user, use <code>--available</code> option instead.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser --available</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also list roles by using <code>get</code> command.</p>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> realm roles for the user use user&#x2019;s <code>id</code> to construct an endpoint uri - users/USER_ID/role-mappings/realm.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/role-mappings/realm</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, append <code>/composite</code> to the previous endpoint uri - users/USER_ID/role-mappings/realm/composite.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/role-mappings/realm/composite</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the user, append <code>/available</code> instead - users/USER_ID/role-mappings/realm/available.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/role-mappings/realm/available</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing assigned, available, and effective client roles for a user</dt>
<dd>
<p>You can again use <code>get-roles</code> command to simplify listing of roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> client roles for the user you can specify the target user by either <code>username</code> (via --uusername option) or <code>id</code> (via --uid option),
and client by either <code>clientId</code> (via --cclientid option) or <code>id</code> (via --cid option).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser --cclientid realm-management</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, use additional <code>--effective</code> option.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser --cclientid realm-management --effective</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the user, use <code>--available</code> option instead.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --uusername testuser --cclientid realm-management --available</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also list roles by using <code>get</code> command.</p>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> client roles for the user use user&#x2019;s <code>id</code> and client&#x2019;s <code>id</code> to construct an endpoint uri - users/USER_ID/role-mappings/clients/ID.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> client roles, append <code>/composite</code> to the previous endpoint uri - users/USER_ID/role-mappings/clients/ID/composite.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5/composite</pre>
</div>
</div>
<div class="paragraph">
<p>To list client roles that can still be added to the user, append <code>/available</code> instead - users/USER_ID/role-mappings/clients/ID/available.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5/available</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding realm roles to a user</dt>
<dd>
<p>There is a dedicated <code>add-role</code> command that can be used for adding both realm roles, and client roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to add &apos;user&apos; role to user &apos;testuser&apos; :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh add-role --username testuser --rolename user -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to add a realm role to the user use user&#x2019;s <code>id</code> to construct an endpoint uri - <code>users/USER_ID/role-mapping/realm</code></p>
</div>
<div class="paragraph">
<p>Then use <code>create</code> operation against that endpoint uri, and send it a list of JSON objects each representing a role to add,
by having the same <code>id</code> attribute as any of available realm roles, and a matching <code>name</code> attribute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/realm -r demorealm -f - &lt;&lt; EOF
[{ &quot;id&quot;: &quot;63944125-1824-44cd-bb26-3eefa140e5b0&quot;, &quot;name&quot;: &quot;user&quot;}]
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; echo [{ &quot;id&quot;: &quot;63944125-1824-44cd-bb26-3eefa140e5b0&quot;, &quot;name&quot;: &quot;user&quot;}] | create users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/realm -r demorealm -f -</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Removing realm roles from a user</dt>
<dd>
<p>There is a dedicated <code>remove-role</code> command that can be used to remove both realm roles, and client roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to remove &apos;user&apos; role from user &apos;testuser&apos;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh remove-role --username testuser --rolename user -r demorealm</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to remove realm roles from the user use user&#x2019;s <code>id</code> to construct the same endpoint uri as for adding roles - <code>users/USER_ID/role-mapping/realm</code></p>
</div>
<div class="paragraph">
<p>Then use <code>delete</code> operation rather than <code>create</code> against that endpoint uri, and send it a list of JSON objects each representing a role to add,
by having the same <code>id</code> attribute as any of current realm roles, and a matching <code>name</code> attribute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/realm -r demorealm -f - &lt;&lt; EOF
[{ &quot;id&quot;: &quot;63944125-1824-44cd-bb26-3eefa140e5b0&quot;, &quot;name&quot;: &quot;user&quot;}]
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>Or on Windows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c:\&gt; echo [{ &quot;id&quot;: &quot;63944125-1824-44cd-bb26-3eefa140e5b0&quot;, &quot;name&quot;: &quot;user&quot;}] | delete users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/realm -r demorealm -f -</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding client roles to a user</dt>
<dd>
<p>There is a dedicated <code>add-realm</code> operation that can be used for adding both realm roles, and client roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to add to user <code>testuser</code> two roles defined on client <code>realm management</code> - <code>create-client</code> role and <code>view-users</code> role:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh add-role -r demorealm --uusername testuser --cclientid realm-management --rolename create-client --rolename view-users</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to add a client role to the user, use user&#x2019;s <code>id</code> and client&#x2019;s <code>id</code> to construct an endpoint uri - <code>users/USER_ID/role-mapping/clients/ID</code></p>
</div>
<div class="paragraph">
<p>Then use <code>create</code> operation against that endpoint uri and send it a list of JSON objects each representing a role to add,
by having the same <code>id</code> attribute as any of available client roles, and a matching <code>name</code> attribute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5 -r demorealm -f - &lt;&lt; EOF
[
  { &quot;id&quot;: &quot;12f80d1c-c861-4056-ac6b-27276e2966ec&quot;, &quot;name&quot;: &quot;create-client&quot;},
  { &quot;id&quot;: &quot;ce2e4694-1c9c-40f8-a0af-dea32a9984dc&quot;, &quot;name&quot;: &quot;view-users&quot;}
]
EOF</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Removing client roles from a user</dt>
<dd>
<p>There is a dedicated <code>remove-realm</code> operation that can be used for removing both realm roles, and client roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to remove from user <code>testuser</code> two roles defined on client <code>realm management</code> - <code>create-client</code> role and <code>view-users</code> role:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh remove-role -r demorealm --uusername testuser --cclientid realm-management --rolename create-client --rolename view-users</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to remove client roles from the user use user&#x2019;s <code>id</code> and client&#x2019;s <code>id</code> to construct the same endpoint uri as for adding client roles -  <code>users/USER_ID/role-mapping/clients/ID</code></p>
</div>
<div class="paragraph">
<p>Then use <code>delete</code> operation rather than <code>create</code> against that endpoint uri, and send it a list of JSON objects each representing a role to add,
by having the same <code>id</code> attribute as any of current client roles, and a matching <code>name</code> attribute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete users/c9c73648-9af4-4394-bc01-1c4a98a5c52f/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5 -r demorealm -f - &lt;&lt; EOF
[
  { &quot;id&quot;: &quot;12f80d1c-c861-4056-ac6b-27276e2966ec&quot;, &quot;name&quot;: &quot;create-client&quot;},
  { &quot;id&quot;: &quot;ce2e4694-1c9c-40f8-a0af-dea32a9984dc&quot;, &quot;name&quot;: &quot;view-users&quot;}
]
EOF</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing user&#x2019;s sessions</dt>
<dd>
<p>First identify user&#x2019;s <code>id</code> then use it to compose an endpoint uri - <code>users/ID/sessions</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Now use <code>get</code> to retrieve a list of user&#x2019;s sessions.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$kcadm get users/6da5ab89-3397-4205-afaa-e201ff638f9e/sessions</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Logging out user from specific session</dt>
<dd>
<p>To invalidate a session you only need session&#x2019;s <code>id</code>. You can get it by listing user&#x2019;s sessions.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Use session&#x2019;s <code>id</code> to compose an endpoint uri - <code>sessions/ID</code>.</p>
</div>
<div class="paragraph">
<p>The use <code>delete</code> to invalidate it. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete sessions/d0eaa7cc-8c5d-489d-811a-69d3c4ec84d1</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Logging out user from all sessions</dt>
<dd>
<p>You need user&#x2019;s <code>id</code> to construct an endpoint uri - <code>users/ID/logout</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Use &apos;create&apos; to send logout-from-all-sessions request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create users/6da5ab89-3397-4205-afaa-e201ff638f9e/logout -r demorealm -s realm=demorealm -s user=6da5ab89-3397-4205-afaa-e201ff638f9e</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_group_operations">Group operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating a group</dt>
<dd>
<p>Use <code>create</code> operation, and <code>groups</code> endpoint to create a new group:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create groups -r demorealm -s name=Group</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Listing groups</dt>
<dd>
<p>Use <code>get</code> operation, and <code>groups</code> endpoint to list groups:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get groups -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Getting a specific group</dt>
<dd>
<p>Use group&#x2019;s <code>id</code> to construct an endpoint uri - groups/GROUP_ID:</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get groups/51204821-0580-46db-8f2d-27106c6b5ded -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Updating a group</dt>
<dd>
<p>Use <code>update</code> operation with the same endpoint uri as for getting a specific group. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update groups/51204821-0580-46db-8f2d-27106c6b5ded -s &apos;attributes.email=[&quot;group@example.com&quot;]&apos; -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Deleting a group</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific group. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete groups/51204821-0580-46db-8f2d-27106c6b5ded -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Get groups for specific user</dt>
<dd>
<p>To get user&#x2019;s membership in groups, use user&#x2019;s <code>id</code> to compose a resource URI - <code>users/USER_ID/groups</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/groups -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding user to a group</dt>
<dd>
<p>To join user to a group use <code>update</code> operation against a resource uri composed from user&#x2019;s <code>id</code>, and group&#x2019;s <code>id</code> - users/USER_ID/groups/GROUP_ID.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/groups/ce01117a-7426-4670-a29a-5c118056fe20 -r demorealm -s realm=demorealm -s userId=b544f379-5fc4-49e5-8a8d-5cfb71f46f53 -s groupId=ce01117a-7426-4670-a29a-5c118056fe20 -n</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Removing user from a group</dt>
<dd>
<p>To remove user from a group use <code>delete</code> operation against the same resource uri as used for adding user to a group - users/USER_ID/groups/GROUP_ID.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete users/b544f379-5fc4-49e5-8a8d-5cfb71f46f53/groups/ce01117a-7426-4670-a29a-5c118056fe20 -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing assigned, available, and effective realm roles for a group</dt>
<dd>
<p>There is a dedicated &apos;get-roles&apos; command to simplify listing of roles. It is an extension of <code>get</code> command thus it behaves
like <code>get</code> command with additional semantics for listing roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> realm roles for the group you can specify the target group by <code>name</code> (via <code>--gname</code> option),
<code>path</code> (via <code>--gpath</code> option), or <code>id</code> (via <code>--gid</code> option).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, use additional <code>--effective</code> option.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group --effective</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the group, use <code>--available</code> option instead.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group --available</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also list roles by using <code>get</code> command.</p>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> realm roles for the group use group&#x2019;s <code>id</code> to construct an endpoint uri - <code>groups/GROUP_ID/role-mappings/realm</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/realm</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, append <code>/composite</code> to the previous endpoint uri - <code>groups/GROUP_ID/role-mappings/realm/composite</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/realm/composite</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the group, append <code>/available</code> instead - <code>groups/GROUP_ID/role-mappings/realm/available</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/realm/available</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing assigned, available, and effective client roles for a group</dt>
<dd>
<p>A dedicated &apos;get-roles&apos; command can be used to list for both realm roles and client roles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> client roles for the user you can specify the target group by either <code>name</code> (via --gname option) or <code>id</code> (via <code>--gid</code> option),
and client by either <code>clientId</code> (via <code>--cclientid</code> option) or <code>id</code> (via <code>--id</code> option).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group --cclientid realm-management</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> realm roles, use additional <code>--effective</code> option.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group --cclientid realm-management --effective</pre>
</div>
</div>
<div class="paragraph">
<p>To list realm roles that can still be added to the group, use <code>--available</code> option instead.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get-roles -r demorealm --gname Group --cclientid realm-management --available</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also list roles by using <code>get</code> command.</p>
</div>
<div class="paragraph">
<p>To list <strong>assigned</strong> client roles for the group use group&#x2019;s <code>id</code> and client&#x2019;s <code>id</code> to construct an endpoint uri - <code>groups/GROUP_ID/role-mappings/clients/ID</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5</pre>
</div>
</div>
<div class="paragraph">
<p>To list <strong>effective</strong> client roles, append <code>/composite</code> to the previous endpoint uri - <code>groups/GROUP_ID/role-mappings/clients/ID/composite</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5/composite</pre>
</div>
</div>
<div class="paragraph">
<p>To list client roles that can still be added to the user, append <code>/available</code> instead - <code>groups/GROUP_ID/role-mappings/clients/ID/available</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get -r demorealm groups/914e0cae-cae7-457a-bdf8-41eb92b6a94e/role-mappings/clients/70521f64-f3f2-4091-b2b6-9498a71fdaf5/available</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_identity_providers_operations">Identity Providers operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing available identity providers</dt>
<dd>
<p>Use <code>serverinfo</code> endpoint to list available identity providers. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get serverinfo -r demorealm --fields &apos;identityProviders(*)&apos;</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that <code>serverinfo</code> endpoint is handled similarly to <code>realms</code> endpoint in that it is not resolved into resource URI as
relative to target realm.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing configured identity providers</dt>
<dd>
<p>Use <code>identity-provider/instances</code> endpoint. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get identity-provider/instances -r demorealm --fields alias,providerId,enabled</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Getting a specific configured identity provider</dt>
<dd>
<p>To get a specific identity provider use an <code>alias</code> attribute of identity provider to construct an endpoint uri - <code>identity-provider/instances/ALIAS</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get identity-provider/instances/facebook -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Removing a specific configured identity provider</dt>
<dd>
<p>Use <code>delete</code> operation with the same endpoint uri as for getting a specific configured identity provider. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete identity-provider/instances/facebook -r demorealm</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a Keycloak OpenID Connect identity provider</dt>
<dd>
<p>For Keycloak OpenID Connect use <code>keycloak-oidc</code> as <code>providerId</code> when creating a new identity provider instance.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Provide config attributes <code>authorizationUrl</code>, <code>tokenUrl</code>, <code>clientId</code>, and <code>clientSecret</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=keycloak-oidc -s providerId=keycloak-oidc -s enabled=true -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.authorizationUrl=http://localhost:8180/auth/realms/demorealm/protocol/openid-connect/auth -s config.tokenUrl=http://localhost:8180/auth/realms/demorealm/protocol/openid-connect/token -s config.clientId=demo-oidc-provider -s config.clientSecret=secret</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuring an OpenID Connect identity provider</dt>
<dd>
<p>You configure the generic OpenID Connect provider the same way as Keycloak OpenID Connect provider, except that you set
<code>providerId</code> attribute value to <code>oidc</code>.</p>
</dd>
<dt class="hdlist1">Configuring a SAML 2 identity provider</dt>
<dd>
<p>Use <code>saml</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>singleSignOnServiceUrl</code>, <code>nameIDPolicyFormat</code>, and <code>signatureAlgorithm</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=saml -s providerId=saml -s enabled=true -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.singleSignOnServiceUrl=http://localhost:8180/auth/realms/saml-broker-realm/protocol/saml -s config.nameIDPolicyFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent -s config.signatureAlgorithm=RSA_SHA256</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuring a Facebook identity provider</dt>
<dd>
<p>Use <code>facebook</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from Facebook Developers application configuration page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=facebook -s providerId=facebook -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=FACEBOOK_CLIENT_ID -s config.clientSecret=FACEBOOK_CLIENT_SECRET</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a Google identity provider</dt>
<dd>
<p>Use <code>google</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from Google Developers application configuration page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=google -s providerId=google -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=GOOGLE_CLIENT_ID -s config.clientSecret=GOOGLE_CLIENT_SECRET</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a Twitter identity provider</dt>
<dd>
<p>Use <code>twitter</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from Twitter Application Management application configuration page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=google -s providerId=google -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=TWITTER_API_KEY -s config.clientSecret=TWITTER_API_SECRET</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a GitHub identity provider</dt>
<dd>
<p>Use <code>github</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from GitHub Developer Application Settings page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=github -s providerId=github -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=GITHUB_CLIENT_ID -s config.clientSecret=GITHUB_CLIENT_SECRET</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a LinkedIn identity provider</dt>
<dd>
<p>Use <code>linkedin</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from LinkedIn Developer Console application page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=linkedin -s providerId=linkedin -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=LINKEDIN_CLIENT_ID -s config.clientSecret=LINKEDIN_CLIENT_SECRET</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a Microsoft Live identity provider</dt>
<dd>
<p>Use <code>microsoft</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code> and <code>clientSecret</code>
as obtained from Microsoft Application Registration Portal page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=microsoft -s providerId=microsoft -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=MICROSOFT_APP_ID -s config.clientSecret=MICROSOFT_PASSWORD</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Configuring a StackOverflow identity provider</dt>
<dd>
<p>Use <code>stackoverflow</code> as <code>providerId</code> when creating a new identity provider instance. Provide <code>config</code> attributes - <code>clientId</code>, <code>clientSecret</code> and <code>key</code>
as obtained from Stack Apps OAuth page for your application.</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create identity-provider/instances -r demorealm -s alias=stackoverflow -s providerId=stackoverflow -s enabled=true  -s &apos;config.useJwksUrl=&quot;true&quot;&apos; -s config.clientId=STACKAPPS_CLIENT_ID -s config.clientSecret=STACKAPPS_CLIENT_SECRET -s config.key=STACKAPPS_KEY</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_storage_providers_operations">Storage Providers operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuring a Kerberos storage provider</dt>
<dd>
<p>Use <code>create</code> against <code>user-federation/instances</code> endpoint. Specify <code>kerberos</code> as a value of <code>providerName</code> attribute.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create user-federation/instances -r demorealm -s providerName=kerberos -s priority=0 -s config.debug=false -s config.allowPasswordAuthentication=true -s &apos;config.editMode=&quot;UNSYNCED&quot;&apos; -s config.updateProfileFirstLogin=true -s config.allowKerberosAuthentication=true -s &apos;config.kerberosRealm=&quot;KEYCLOAK.ORG&quot;&apos; -s &apos;config.keyTab=&quot;http.keytab&quot;&apos; -s &apos;config.serverPrincipal=&quot;HTTP/localhost@KEYCLOAK.ORG&quot;&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuring an LDAP user storage provider</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Specify <code>ldap</code> as a value of <code>providerId</code> attribute, and <code>org.keycloak.storage.UserStorageProvider</code> as value of <code>providerType</code> attribute. Provide realm <code>id</code> as value of <code>parentId</code> attribute.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to create a Kerberos integrated LDAP provider:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=kerberos-ldap-provider -s providerId=ldap -s providerType=org.keycloak.storage.UserStorageProvider -s parentId=3d9c572b-8f33-483f-98a6-8bb421667867  -s &apos;config.priority=[&quot;1&quot;]&apos; -s &apos;config.fullSyncPeriod=[&quot;-1&quot;]&apos; -s &apos;config.changedSyncPeriod=[&quot;-1&quot;]&apos; -s &apos;config.cachePolicy=[&quot;DEFAULT&quot;]&apos; -s config.evictionDay=[] -s config.evictionHour=[] -s config.evictionMinute=[] -s config.maxLifespan=[] -s &apos;config.batchSizeForSync=[&quot;1000&quot;]&apos; -s &apos;config.editMode=[&quot;WRITABLE&quot;]&apos; -s &apos;config.syncRegistrations=[&quot;false&quot;]&apos; -s &apos;config.vendor=[&quot;other&quot;]&apos; -s &apos;config.usernameLDAPAttribute=[&quot;uid&quot;]&apos; -s &apos;config.rdnLDAPAttribute=[&quot;uid&quot;]&apos; -s &apos;config.uuidLDAPAttribute=[&quot;entryUUID&quot;]&apos; -s &apos;config.userObjectClasses=[&quot;inetOrgPerson, organizationalPerson&quot;]&apos; -s &apos;config.connectionUrl=[&quot;ldap://localhost:10389&quot;]&apos;  -s &apos;config.usersDn=[&quot;ou=People,dc=keycloak,dc=org&quot;]&apos; -s &apos;config.authType=[&quot;simple&quot;]&apos; -s &apos;config.bindDn=[&quot;uid=admin,ou=system&quot;]&apos; -s &apos;config.bindCredential=[&quot;secret&quot;]&apos; -s &apos;config.searchScope=[&quot;1&quot;]&apos; -s &apos;config.useTruststoreSpi=[&quot;ldapsOnly&quot;]&apos; -s &apos;config.connectionPooling=[&quot;true&quot;]&apos; -s &apos;config.pagination=[&quot;true&quot;]&apos; -s &apos;config.allowKerberosAuthentication=[&quot;true&quot;]&apos; -s &apos;config.serverPrincipal=[&quot;HTTP/localhost@KEYCLOAK.ORG&quot;]&apos; -s &apos;config.keyTab=[&quot;http.keytab&quot;]&apos; -s &apos;config.kerberosRealm=[&quot;KEYCLOAK.ORG&quot;]&apos; -s &apos;config.debug=[&quot;true&quot;]&apos; -s &apos;config.useKerberosForPasswordAuthentication=[&quot;true&quot;]&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Removing a user storage provider instance</dt>
<dd>
<p>Use storage provider instance&#x2019;s <code>id</code> attribute to compose an endpoint uri - <code>components/ID</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Perform <code>delete</code> operation against this endpoint. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh delete components/3d9c572b-8f33-483f-98a6-8bb421667867 -r demorealm</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Triggering synchronization of all users for specific user storage provider</dt>
<dd>
<p>Use storage provider&#x2019;s <code>id</code> attribute to compose an endpoint uri - user-storage/ID_OF_USER_STORAGE_INSTANCE/sync
Add <code>action=triggerFullSync</code> query parameter and use <code>create</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create user-storage/b7c63d02-b62a-4fc1-977c-947d6a09e1ea/sync?action=triggerFullSync</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Triggering synchronization of changed users for specific user storage provider</dt>
<dd>
<p>Use storage provider&#x2019;s <code>id</code> attribute to compose an endpoint uri - user-storage/ID_OF_USER_STORAGE_INSTANCE/sync
Add <code>action=triggerChangedUsersSync</code> query parameter and use <code>create</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create user-storage/b7c63d02-b62a-4fc1-977c-947d6a09e1ea/sync?action=triggerChangedUsersSync</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Test LDAP user storage connectivity</dt>
<dd>
<p>Perform <code>get</code> operation against <code>testLDAPConnection</code> endpoint. Provide query parameters <code>bindCredential</code>, <code>bindDn</code>, <code>connectionUrl</code>, and <code>useTruststoreSpi</code>, and set <code>action</code> query parameter to <code>testConnection</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get testLDAPConnection --filter action=testConnection --filter bindCredential=secret --filter bindDn=uid=admin,ou=system --filter connectionUrl=ldap://localhost:10389 --filter useTruststoreSpi=ldapsOnly</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Test LDAP user storage authentication</dt>
<dd>
<p>Perform <code>get</code> operation against <code>testLDAPConnection</code> endpoint. Provide query parameters <code>bindCredential</code>, <code>bindDn</code>, <code>connectionUrl</code>, and <code>useTruststoreSpi</code>, and set <code>action</code> query parameter to <code>testAuthentication</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get testLDAPConnection --filter action=testAuthentication --filter bindCredential=secret --filter bindDn=uid=admin,ou=system --filter connectionUrl=ldap://localhost:10389 --filter useTruststoreSpi=ldapsOnly</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_mappers">Adding mappers</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding a hardcoded role LDAP mapper</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Set <code>providerType</code> attribute to <code>org.keycloak.storage.ldap.mappers.LDAPStorageMapper</code>. Set <code>parentId</code> attribute to <code>id</code> of LDAP provider instance.
Set <code>providerId</code> attribute to <code>hardcoded-ldap-role-mapper</code>. Make sure to provide a value of <code>role</code> config parameter.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=hardcoded-ldap-role-mapper -s providerId=hardcoded-ldap-role-mapper -s providerType=org.keycloak.storage.ldap.mappers.LDAPStorageMapper -s parentId=b7c63d02-b62a-4fc1-977c-947d6a09e1ea -s &apos;config.role=[&quot;realm-management.create-client&quot;]&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding a MS Active Directory mapper</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Set <code>providerType</code> attribute to <code>org.keycloak.storage.ldap.mappers.LDAPStorageMapper</code>. Set <code>parentId</code> attribute to <code>id</code> of LDAP provider instance.
Set <code>providerId</code> attribute to <code>msad-user-account-control-mapper</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=msad-user-account-control-mapper -s providerId=msad-user-account-control-mapper -s providerType=org.keycloak.storage.ldap.mappers.LDAPStorageMapper -s parentId=b7c63d02-b62a-4fc1-977c-947d6a09e1ea</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding a user attribute LDAP mapper</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Set <code>providerType</code> attribute to <code>org.keycloak.storage.ldap.mappers.LDAPStorageMapper</code>. Set <code>parentId</code> attribute to <code>id</code> of LDAP provider instance.
Set <code>providerId</code> attribute to <code>user-attribute-ldap-mapper</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=user-attribute-ldap-mapper -s providerId=user-attribute-ldap-mapper -s providerType=org.keycloak.storage.ldap.mappers.LDAPStorageMapper -s parentId=b7c63d02-b62a-4fc1-977c-947d6a09e1ea -s &apos;config.user.model.attribute=[&quot;email&quot;]&apos; -s &apos;config.ldap.attribute=[&quot;mail&quot;]&apos; -s &apos;config.read.only=[&quot;false&quot;]&apos; -s &apos;config.always.read.value.from.ldap=[&quot;false&quot;]&apos; -s &apos;config.is.mandatory.in.ldap=[&quot;false&quot;]&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding a group LDAP mapper</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Set <code>providerType</code> attribute to <code>org.keycloak.storage.ldap.mappers.LDAPStorageMapper</code>. Set <code>parentId</code> attribute to <code>id</code> of LDAP provider instance.
Set <code>providerId</code> attribute to <code>group-ldap-mapper</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=group-ldap-mapper -s providerId=group-ldap-mapper -s providerType=org.keycloak.storage.ldap.mappers.LDAPStorageMapper -s parentId=b7c63d02-b62a-4fc1-977c-947d6a09e1ea -s config.groups.dn=[] -s &apos;config.group.name.ldap.attribute=[&quot;cn&quot;]&apos; -s &apos;config.group.object.classes=[&quot;groupOfNames&quot;]&apos; -s &apos;config.preserve.group.inheritance=[&quot;true&quot;]&apos; -s &apos;config.membership.ldap.attribute=[&quot;member&quot;]&apos; -s &apos;config.membership.attribute.type=[&quot;DN&quot;]&apos; -s &apos;config.groups.ldap.filter=[]&apos; -s &apos;config.mode=[&quot;LDAP_ONLY&quot;]&apos; -s &apos;config.user.roles.retrieve.strategy=[&quot;LOAD_GROUPS_BY_MEMBER_ATTRIBUTE&quot;]&apos; -s &apos;config.mapped.group.attributes=[&quot;admins-group&quot;]&apos; -s &apos;config.drop.non.existing.groups.during.sync=[&quot;false&quot;]&apos; -s &apos;config.roles=[&quot;admins&quot;]&apos; -s &apos;config.groups=[&quot;admins-group&quot;]&apos; -s &apos;config.group=[]&apos; -s &apos;config.preserve=[&quot;true&quot;]&apos; -s &apos;config.membership=[&quot;member&quot;]&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Adding a full name LDAP mapper</dt>
<dd>
<p>Use <code>create</code> against <code>components</code> endpoint. Set <code>providerType</code> attribute to <code>org.keycloak.storage.ldap.mappers.LDAPStorageMapper</code>. Set <code>parentId</code> attribute to <code>id</code> of LDAP provider instance.
Set <code>providerId</code> attribute to <code>full-name-ldap-mapper</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh create components -r demorealm -s name=full-name-ldap-mapper -s providerId=full-name-ldap-mapper -s providerType=org.keycloak.storage.ldap.mappers.LDAPStorageMapper -s parentId=b7c63d02-b62a-4fc1-977c-947d6a09e1ea -s &apos;config.ldap.full.name.attribute=[&quot;cn&quot;]&apos; -s &apos;config.read.only=[&quot;false&quot;]&apos; -s &apos;config.write.only=[&quot;true&quot;]&apos;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authentication_operations">Authentication operations</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Setting a password policy</dt>
<dd>
<p>Set realm&#x2019;s <code>passwordPolicy</code> attribute to an enumeration expression including specific policy provider id, and an optional configuration:</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to set password policy to 20000 hash iterations, requiring at least one special character, at least one uppercase character,
at least one digit character, not be equal to user&#x2019;s <code>username</code>, and be at least 8 characters long you would use the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update realms/demorealm -s &apos;passwordPolicy=&quot;hashIterations and specialChars and upperCase and digits and notUsername and length&quot;&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>If you want want to use values different from defaults, pass configuration in brackets.</p>
</div>
<div class="paragraph">
<p>For example, to set password policy to 25000 hash iterations, requiring at least two special characters, at least two uppercase characters, at least two lowercase characters, at least two digits, be at least nine characters long, not be equal to user&#x2019;s username, and not repeat for at least four changes back:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh update realms/demorealm -s &apos;passwordPolicy=&quot;hashIterations(25000) and specialChars(2) and upperCase(2) and lowerCase(2) and digits(2) and length(9) and notUsername and passwordHistory(4)&quot;&apos;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Getting the current password policy</dt>
<dd>
<p>Get current realm configuration and filter out everything but <code>passwordPolicy</code> attribute.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to display <code>passwordPolicy</code> for demorealm:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get realms/demorealm --fields passwordPolicy</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Listing authentication flows</dt>
<dd>
<p>Use <code>get</code> operation against <code>authentication/flows</code> endpoint. For example:</p>
<div class="literalblock">
<div class="content">
<pre>$ kcadm.sh get authentication/flows -r demorealm</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../topics/threat/sql.html" class="navigation navigation-prev " aria-label="Previous page: SQL Injection Attacks"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../topics/MigrationFromOlderVersions.html" class="navigation navigation-next " aria-label="Next page: Migration from older versions"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Server Administration Guide -->
</html>
