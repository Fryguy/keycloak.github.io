<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Server Installation and Configuration Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>HTTPS/SSL Setup | Server Installation and Configuration Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../topics/network/outgoing.html" />
    
    
    <link rel="prev" href="../../topics/network/ports.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="8.3"
        data-chapter-title="HTTPS/SSL Setup"
        data-filepath="topics/network/https.adoc"
        data-basepath="../.."
        data-revision="Wed Feb 08 2017 07:51:12 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview.html">
            
                
                    <a href="../../topics/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/recommended-reading.html">
            
                
                    <a href="../../topics/overview/recommended-reading.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Recommended Reading
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/installation.html">
            
                
                    <a href="../../topics/installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Installation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/installation/system-requirements.html">
            
                
                    <a href="../../topics/installation/system-requirements.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        System Requirements
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topics/installation/distribution-files-community.html">
            
                
                    <a href="../../topics/installation/distribution-files-community.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Installing Distribution Files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="topics/installation/distribution-files-product.html">
            
                
                    <a href="../../topics/installation/distribution-files-product.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Installing Distribution Files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="topics/installation/directory-structure.html">
            
                
                    <a href="../../topics/installation/directory-structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Distribution Directory Structure
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/operating-mode.html">
            
                
                    <a href="../../topics/operating-mode.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Choosing an Operating Mode
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/operating-mode/standalone.html">
            
                
                    <a href="../../topics/operating-mode/standalone.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Standalone Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/operating-mode/standalone-ha.html">
            
                
                    <a href="../../topics/operating-mode/standalone-ha.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Standalone Clustered Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="topics/operating-mode/domain.html">
            
                
                    <a href="../../topics/operating-mode/domain.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Domain Clustered Mode
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/config-subsystem.html">
            
                
                    <a href="../../topics/config-subsystem.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Managing Configuration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/config-subsystem/configure-spi-providers.html">
            
                
                    <a href="../../topics/config-subsystem/configure-spi-providers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Configure SPI Providers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="topics/config-subsystem/start-cli.html">
            
                
                    <a href="../../topics/config-subsystem/start-cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Start CLI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="topics/config-subsystem/cli-recipes.html">
            
                
                    <a href="../../topics/config-subsystem/cli-recipes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        CLI Recipes
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/profiles.html">
            
                
                    <a href="../../topics/profiles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Profiles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/database.html">
            
                
                    <a href="../../topics/database.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Relational Database Setup
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="topics/database/checklist.html">
            
                
                    <a href="../../topics/database/checklist.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Setup Checklist
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="topics/database/jdbc.html">
            
                
                    <a href="../../topics/database/jdbc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        JDBC Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="topics/database/datasource.html">
            
                
                    <a href="../../topics/database/datasource.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Datasource Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="topics/database/hibernate.html">
            
                
                    <a href="../../topics/database/hibernate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Database Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="topics/database/unicode-considerations.html">
            
                
                    <a href="../../topics/database/unicode-considerations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Unicode considerations
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/mongo.html">
            
                
                    <a href="../../topics/mongo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Mongo DB Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/network.html">
            
                
                    <a href="../../topics/network.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Network Setup
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="topics/network/bind-address.html">
            
                
                    <a href="../../topics/network/bind-address.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Bind Addresses
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="topics/network/ports.html">
            
                
                    <a href="../../topics/network/ports.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Socket Port Bindings
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="8.3" data-path="topics/network/https.html">
            
                
                    <a href="../../topics/network/https.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        HTTPS/SSL Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="topics/network/outgoing.html">
            
                
                    <a href="../../topics/network/outgoing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Outgoing HTTP Requests
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/clustering.html">
            
                
                    <a href="../../topics/clustering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Clustering
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/clustering/recommended.html">
            
                
                    <a href="../../topics/clustering/recommended.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Recommended Network Architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="topics/clustering/example.html">
            
                
                    <a href="../../topics/clustering/example.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Cluster Example
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="topics/clustering/load-balancer.html">
            
                
                    <a href="../../topics/clustering/load-balancer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Setting Up a Load Balancer or Proxy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="topics/clustering/multicast.html">
            
                
                    <a href="../../topics/clustering/multicast.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Multicast Network Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="topics/clustering/serialized.html">
            
                
                    <a href="../../topics/clustering/serialized.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Serialized Cluster Startup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="topics/clustering/booting.html">
            
                
                    <a href="../../topics/clustering/booting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.6.</b>
                        
                        Booting the Cluster
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="topics/clustering/troubleshooting.html">
            
                
                    <a href="../../topics/clustering/troubleshooting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.7.</b>
                        
                        Troubleshooting
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="topics/cache.html">
            
                
                    <a href="../../topics/cache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Server Cache Configuration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="topics/cache/eviction.html">
            
                
                    <a href="../../topics/cache/eviction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Eviction Policy and Max Entries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="topics/cache/replication.html">
            
                
                    <a href="../../topics/cache/replication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Replication and Failover
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="topics/cache/disable.html">
            
                
                    <a href="../../topics/cache/disable.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Disabling Caching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="topics/cache/clear.html">
            
                
                    <a href="../../topics/cache/clear.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                        Clearing Caches at Runtime
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="topics/proxy.html">
            
                
                    <a href="../../topics/proxy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Keycloak Security Proxy
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Server Installation and Configuration Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect2">
<h3 id="_setting_up_https_ssl">Setting up HTTPS/SSL</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Keycloak is not set up by default to handle SSL/HTTPS.
          It is highly recommended that you either enable SSL on the Keycloak server itself or on a reverse proxy in front of the Keycloak server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This default behavior is defined by the SSL/HTTPS mode of each Keycloak realm.  This is discussed in more detail in the
<a href="https://keycloak.gitbooks.io/server-adminstration-guide/content/" target="_blank">Server Administration Guide</a>, but let&#x2019;s give some context and a brief overview of these modes.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">external requests</dt>
<dd>
<p>Keycloak can run out of the box without SSL so long as you stick to private IP addresses like <code>localhost</code>, <code>127.0.0.1</code>, <code>10.0.x.x</code>, <code>192.168.x.x</code>, and <code>172..16.x.x</code>.
If you don&#x2019;t have SSL/HTTPS configured on the server or you try to access Keycloak over HTTP from a non-private IP adress you will get an error.</p>
</dd>
<dt class="hdlist1">none</dt>
<dd>
<p>Keycloak does not require SSL.  This should really only be used in development when you are playing around with things.</p>
</dd>
<dt class="hdlist1">all requests</dt>
<dd>
<p>Keycloak requires SSL for all IP addresses.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The SSL mode for each realm can be configured in the Keycloak admin console.</p>
</div>
<div class="sect3">
<h4 id="_enabling_ssl_https_for_the_keycloak_server">Enabling SSL/HTTPS for the Keycloak Server</h4>
<div class="paragraph">
<p>If you are not using a reverse proxy or load balancer to handle HTTPS traffic for you, you&#x2019;ll need to enable HTTPS
for the Keycloak server.  This involves</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtaining or generating a keystore that contains the private key and certificate for SSL/HTTP traffic</p>
</li>
<li>
<p>Configuring the Keycloak server to use this keypair and certificate.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_creating_the_certificate_and_java_keystore">Creating the Certificate and Java Keystore</h5>
<div class="paragraph">
<p>In order to allow HTTPS connections, you need to obtain a self signed or third-party signed certificate and import it into a Java keystore before you can enable HTTPS in the web container you are deploying the Keycloak Server to.</p>
</div>
<div class="sect5">
<h6 id="_self_signed_certificate">Self Signed Certificate</h6>
<div class="paragraph">
<p>In development, you will probably not have a third party signed certificate available to test a Keycloak deployment so you&#x2019;ll need to generate a self-signed one
using the <code>keytool</code> utility that comes with the Java JDK.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ keytool -genkey -alias localhost -keyalg RSA -keystore keycloak.jks -validity 10950
    Enter keystore password: secret
    Re-enter new password: secret
    What is your first and last name?
    [Unknown]:  localhost
    What is the name of your organizational unit?
    [Unknown]:  Keycloak
    What is the name of your organization?
    [Unknown]:  Red Hat
    What is the name of your City or Locality?
    [Unknown]:  Westford
    What is the name of your State or Province?
    [Unknown]:  MA
    What is the two-letter country code for this unit?
    [Unknown]:  US
    Is CN=localhost, OU=Keycloak, O=Test, L=Westford, ST=MA, C=US correct?
    [no]:  yes</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should answer <code>What is your first and last name ?</code> question with the DNS name of the machine you&#x2019;re installing the server on.
For testing purposes, <code>localhost</code> should be used.
After executing this command, the <code>keycloak.jks</code> file will be generated in the same directory as you executed the <code>keytool</code> command in.</p>
</div>
<div class="paragraph">
<p>If you want a third-party signed certificate, but don&#x2019;t have one, you can obtain one for free at <a href="http://cacert.org" target="_blank">cacert.org</a>.
You&#x2019;ll have to do a little set up first before doing this though.</p>
</div>
<div class="paragraph">
<p>The first thing to do is generate a Certificate Request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ keytool -certreq -alias yourdomain -keystore keycloak.jks &gt; keycloak.careq</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>yourdomain</code> is a DNS name for which this certificate is generated for.
Keytool generates the request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>-----BEGIN NEW CERTIFICATE REQUEST-----
MIIC2jCCAcICAQAwZTELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAk1BMREwDwYDVQQHEwhXZXN0Zm9y
ZDEQMA4GA1UEChMHUmVkIEhhdDEQMA4GA1UECxMHUmVkIEhhdDESMBAGA1UEAxMJbG9jYWxob3N0
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr7kck2TaavlEOGbcpi9c0rncY4HhdzmY
Ax2nZfq1eZEaIPqI5aTxwQZzzLDK9qbeAd8Ji79HzSqnRDxNYaZu7mAYhFKHgixsolE3o5Yfzbw1
29RvyeUVe+WZxv5oo9wolVVpdSINIMEL2LaFhtX/c1dqiqYVpfnvFshZQaIg2nL8juzZcBjj4as
H98gIS7khql/dkZKsw9NLvyxgJvp7PaXurX29fNf3ihG+oFrL22oFyV54BWWxXCKU/GPn61EGZGw
Ft2qSIGLdctpMD1aJR2bcnlhEjZKDksjQZoQ5YMXaAGkcYkG6QkgrocDE2YXDbi7GIdf9MegVJ35
2DQMpwIDAQABoDAwLgYJKoZIhvcNAQkOMSEwHzAdBgNVHQ4EFgQUQwlZJBA+fjiDdiVzaO9vrE/i
n2swDQYJKoZIhvcNAQELBQADggEBAC5FRvMkhal3q86tHPBYWBuTtmcSjs4qUm6V6f63frhveWHf
PzRrI1xH272XUIeBk0gtzWo0nNZnf0mMCtUBbHhhDcG82xolikfqibZijoQZCiGiedVjHJFtniDQ
9bMDUOXEMQ7gHZg5q6mJfNG9MbMpQaUVEEFvfGEQQxbiFK7hRWU8S23/d80e8nExgQxdJWJ6vd0X
MzzFK6j4Dj55bJVuM7GFmfdNC52pNOD5vYe47Aqh8oajHX9XTycVtPXl45rrWAH33ftbrS8SrZ2S
vqIFQeuLL3BaHwpl3t7j2lMWcK1p80laAxEASib/fAwrRHpLHBXRcq6uALUOZl4Alt8=
-----END NEW CERTIFICATE REQUEST-----</code></pre>
</div>
</div>
<div class="paragraph">
<p>Send this ca request to your CA.
The CA will issue you a signed certificate and send it to you.
Before you import your new cert, you must obtain and import the root certificate of the CA.
You can download the cert from CA (ie.: root.crt) and import as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ keytool -import -keystore keycloak.jks -file root.crt -alias root</code></pre>
</div>
</div>
<div class="paragraph">
<p>Last step is to import your new CA generated certificate to your keystore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ keytool -import -alias yourdomain -keystore keycloak.jks -file your-certificate.cer</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_configure_keycloak_to_use_the_keystore">Configure Keycloak to Use the Keystore</h5>
<div class="paragraph">
<p>Now that you have a Java keystore with the appropriate certificates, you need to configure your Keycloak installation to use it.
First step is to move the keystore file to the <em>configuration/</em> directory of your deployment and to edit the <em>standalone.xml</em>, <em>standalone-ha.xml</em> or <em>domain.xml</em> file to use
the keystore and enable HTTPS.  (See <a href="../operating-mode.html#_operating-mode">operating mode</a>).</p>
</div>
<div class="paragraph">
<p>In the standalone or domain configuration file, search for the <code>security-realms</code> element and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;security-realm name=&quot;UndertowRealm&quot;&gt;
    &lt;server-identities&gt;
        &lt;ssl&gt;
            &lt;keystore path=&quot;keycloak.jks&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;secret&quot; /&gt;
        &lt;/ssl&gt;
    &lt;/server-identities&gt;
&lt;/security-realm&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find the element <code>server name=&quot;default-server&quot;</code> (it&#x2019;s a child element of <code>subsystem xmlns=&quot;urn:jboss:domain:undertow:</code>) and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:undertow:3.0&quot;&gt;
   &lt;buffer-cache name=&quot;default&quot;/&gt;
   &lt;server name=&quot;default-server&quot;&gt;
      &lt;https-listener name=&quot;https&quot; socket-binding=&quot;https&quot; security-realm=&quot;UndertowRealm&quot;/&gt;
   ...
&lt;/subsystem&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../topics/network/ports.html" class="navigation navigation-prev " aria-label="Previous page: Socket Port Bindings"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../topics/network/outgoing.html" class="navigation navigation-next " aria-label="Next page: Outgoing HTTP Requests"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Server Installation and Configuration Guide -->
</html>
