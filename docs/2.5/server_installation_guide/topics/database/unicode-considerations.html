<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Server Installation and Configuration Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Unicode considerations | Server Installation and Configuration Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../topics/mongo.html" />
    
    
    <link rel="prev" href="../../topics/database/hibernate.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="6.5"
        data-chapter-title="Unicode considerations"
        data-filepath="topics/database/unicode-considerations.adoc"
        data-basepath="../.."
        data-revision="Wed Feb 08 2017 07:51:12 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview.html">
            
                
                    <a href="../../topics/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/recommended-reading.html">
            
                
                    <a href="../../topics/overview/recommended-reading.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Recommended Reading
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/installation.html">
            
                
                    <a href="../../topics/installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Installation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/installation/system-requirements.html">
            
                
                    <a href="../../topics/installation/system-requirements.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        System Requirements
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topics/installation/distribution-files-community.html">
            
                
                    <a href="../../topics/installation/distribution-files-community.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Installing Distribution Files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="topics/installation/distribution-files-product.html">
            
                
                    <a href="../../topics/installation/distribution-files-product.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Installing Distribution Files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="topics/installation/directory-structure.html">
            
                
                    <a href="../../topics/installation/directory-structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Distribution Directory Structure
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/operating-mode.html">
            
                
                    <a href="../../topics/operating-mode.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Choosing an Operating Mode
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/operating-mode/standalone.html">
            
                
                    <a href="../../topics/operating-mode/standalone.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Standalone Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/operating-mode/standalone-ha.html">
            
                
                    <a href="../../topics/operating-mode/standalone-ha.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Standalone Clustered Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="topics/operating-mode/domain.html">
            
                
                    <a href="../../topics/operating-mode/domain.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Domain Clustered Mode
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/config-subsystem.html">
            
                
                    <a href="../../topics/config-subsystem.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Managing Configuration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/config-subsystem/configure-spi-providers.html">
            
                
                    <a href="../../topics/config-subsystem/configure-spi-providers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Configure SPI Providers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="topics/config-subsystem/start-cli.html">
            
                
                    <a href="../../topics/config-subsystem/start-cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Start CLI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="topics/config-subsystem/cli-recipes.html">
            
                
                    <a href="../../topics/config-subsystem/cli-recipes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        CLI Recipes
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/profiles.html">
            
                
                    <a href="../../topics/profiles.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Profiles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/database.html">
            
                
                    <a href="../../topics/database.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Relational Database Setup
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="topics/database/checklist.html">
            
                
                    <a href="../../topics/database/checklist.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Setup Checklist
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="topics/database/jdbc.html">
            
                
                    <a href="../../topics/database/jdbc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        JDBC Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="topics/database/datasource.html">
            
                
                    <a href="../../topics/database/datasource.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Datasource Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="topics/database/hibernate.html">
            
                
                    <a href="../../topics/database/hibernate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Database Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="6.5" data-path="topics/database/unicode-considerations.html">
            
                
                    <a href="../../topics/database/unicode-considerations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Unicode considerations
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/mongo.html">
            
                
                    <a href="../../topics/mongo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Mongo DB Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/network.html">
            
                
                    <a href="../../topics/network.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Network Setup
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="topics/network/bind-address.html">
            
                
                    <a href="../../topics/network/bind-address.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Bind Addresses
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="topics/network/ports.html">
            
                
                    <a href="../../topics/network/ports.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Socket Port Bindings
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="topics/network/https.html">
            
                
                    <a href="../../topics/network/https.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        HTTPS/SSL Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="topics/network/outgoing.html">
            
                
                    <a href="../../topics/network/outgoing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Outgoing HTTP Requests
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/clustering.html">
            
                
                    <a href="../../topics/clustering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Clustering
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/clustering/recommended.html">
            
                
                    <a href="../../topics/clustering/recommended.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Recommended Network Architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="topics/clustering/example.html">
            
                
                    <a href="../../topics/clustering/example.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Cluster Example
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="topics/clustering/load-balancer.html">
            
                
                    <a href="../../topics/clustering/load-balancer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Setting Up a Load Balancer or Proxy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="topics/clustering/multicast.html">
            
                
                    <a href="../../topics/clustering/multicast.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Multicast Network Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="topics/clustering/serialized.html">
            
                
                    <a href="../../topics/clustering/serialized.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Serialized Cluster Startup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="topics/clustering/booting.html">
            
                
                    <a href="../../topics/clustering/booting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.6.</b>
                        
                        Booting the Cluster
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="topics/clustering/troubleshooting.html">
            
                
                    <a href="../../topics/clustering/troubleshooting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.7.</b>
                        
                        Troubleshooting
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="topics/cache.html">
            
                
                    <a href="../../topics/cache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Server Cache Configuration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="topics/cache/eviction.html">
            
                
                    <a href="../../topics/cache/eviction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Eviction Policy and Max Entries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="topics/cache/replication.html">
            
                
                    <a href="../../topics/cache/replication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Replication and Failover
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="topics/cache/disable.html">
            
                
                    <a href="../../topics/cache/disable.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Disabling Caching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="topics/cache/clear.html">
            
                
                    <a href="../../topics/cache/clear.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                        Clearing Caches at Runtime
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="topics/proxy.html">
            
                
                    <a href="../../topics/proxy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Keycloak Security Proxy
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Server Installation and Configuration Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect2">
<h3 id="_unicode_considerations_for_databases">Unicode Considerations for Databases</h3>
<div class="paragraph">
<p>Database schema in Keycloak only accounts for Unicode strings in the following special fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Realms: display name, HTML display name</p>
</li>
<li>
<p>Federation Providers: display name</p>
</li>
<li>
<p>Users: username, given name, last name, attribute names and values</p>
</li>
<li>
<p>Groups: name, attribute names and values</p>
</li>
<li>
<p>Roles: name</p>
</li>
<li>
<p>Descriptions of objects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise, characters are limited to those contained in database encoding which is often 8-bit. However, for some
database systems, it is possible to enable UTF-8 encoding of Unicode characters and use full Unicode character set in all
text fields. Often, this is counterbalanced by shorter maximum length of the strings than in case of 8-bit encodings.</p>
</div>
<div class="paragraph">
<p>Some of the databases require special settings to database and/or JDBC driver to be able to handle Unicode characters.
Please find the settings for your database below. Note that if a database is listed here, it can still work properly
provided it handles UTF-8 encoding properly both on the level of database and JDBC driver.</p>
</div>
<div class="paragraph">
<p>Technically, the key criterion for Unicode support for all fields is whether the database allows setting of Unicode
character set for <code>VARCHAR</code> and <code>CHAR</code> fields. If yes, there is a high chance that Unicode will be plausible, usually at
the expense of field length. If it only supports Unicode in <code>NVARCHAR</code> and <code>NCHAR</code> fields, Unicode support for all text
fields is unlikely as Keycloak schema uses <code>VARCHAR</code> and <code>CHAR</code> fields extensively.</p>
</div>
<div class="sect3">
<h4 id="_oracle_database">Oracle Database</h4>
<div class="paragraph">
<p>Unicode characters are properly handled provided the database was created with Unicode support in <code>VARCHAR</code> and <code>CHAR</code>
fields (e.g. by using <code>AL32UTF8</code> character set as the database character set). No special settings is needed for JDBC
driver.</p>
</div>
<div class="paragraph">
<p>If the database character set is not Unicode, then to use Unicode characters in the special fields, the JDBC driver needs
to be configured with the connection property <code>oracle.jdbc.defaultNChar</code> set to <code>true</code>. It might be wise, though not
strictly necessary, to also set the <code>oracle.jdbc.convertNcharLiterals</code> connection property to <code>true</code>. These properties
can be set either as system properties or as connection properties. Please note that setting <code>oracle.jdbc.defaultNChar</code>
may have negative impact on performance. For details, please refer to Oracle JDBC driver configuration documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_microsoft_sql_server_database">Microsoft SQL Server Database</h4>
<div class="paragraph">
<p>Unicode characters are properly handled only for the special fields. No special settings of JDBC driver or database is
necessary.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ibm_db2_database">IBM DB2 Database</h4>
<div class="paragraph">
<p>Unicode characters are properly handled for all fields, length reduction applies to non-special fields. No special
settings of JDBC driver or database is necessary.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mysql_database">MySQL Database</h4>
<div class="paragraph">
<p>Unicode characters are properly handled provided the database was created with Unicode support in <code>VARCHAR</code> and <code>CHAR</code>
fields in the <code>CREATE DATABASE</code> command (e.g. by using <code>utf8</code> character set as the default database character set in
MySQL 5.5. Please note that <code>utf8mb4</code> character set does not work due to different storage requirements to <code>utf8</code>
character set <span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span>). Note that in this case, length
restriction to non-special fields does not apply because columns are created to accomodate given amount of characters,
not bytes. If the database default character set does not allow storing Unicode, only the special fields allow storing
Unicode values.</p>
</div>
<div class="paragraph">
<p>At the side of JDBC driver settings, it is necessary to add a connection property <code>characterEncoding=UTF-8</code> to the JDBC
connection settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="_postgresql_database">PostgreSQL Database</h4>
<div class="paragraph">
<p>Unicode is supported when the database character set is <code>UTF8</code>. In that case, Unicode characters can be used in any
field, there is no reduction of field length for non-special fields. No special settings of JDBC driver is necessary.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a> Tracked as <a href="https://issues.jboss.org/browse/KEYCLOAK-3873" class="bare" target="_blank">https://issues.jboss.org/browse/KEYCLOAK-3873</a>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../topics/database/hibernate.html" class="navigation navigation-prev " aria-label="Previous page: Database Configuration"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../topics/mongo.html" class="navigation navigation-next " aria-label="Next page: Mongo DB Setup"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Server Installation and Configuration Guide -->
</html>
