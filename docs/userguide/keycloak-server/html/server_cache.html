<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 26. Server Cache</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link rel="home" href="index.html" title="Keycloak Reference Guide"/><link rel="up" href="index.html" title="Keycloak Reference Guide"/><link rel="prev" href="export-import.html" title="Chapter 25. Export and Import"/><link rel="next" href="saml.html" title="Chapter 27. SAML SSO"/></head><body><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="export-import.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="saml.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="server_cache"/>Chapter 26. Server Cache</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="server_cache.html#d4e3117">26.1. Eviction and Expiration</a></span></dt><dt><span class="section"><a href="server_cache.html#d4e3125">26.2. Disabling Caches</a></span></dt><dt><span class="section"><a href="server_cache.html#d4e3133">26.3. Clear Caches</a></span></dt></dl></div>
    
    <p>
        By default, Keycloak caches realm metadata and users.  There are two separate caches, one for realm metadata
        (realm, application, client, roles, etc...) and one for users.  These caches greatly improves the performance of the server.
    </p>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e3117"/>26.1. Eviction and Expiration</h2></div></div></div>
        

        <p>
            By default the user cache contains a maximum of 10000 entries. This is not 10000 users, but 10000 entries in the cache. You can change the maximum
            number of entries by editing the server configuration <code class="literal">standalone.xml</code> or <code class="literal">standalone-ha.xml</code>.
            Locate the element <code class="literal">cache-container name="keycloak"</code> and change the eviction policy for the <code class="literal">users</code> cache. For
            more information see <a class="ulink" href="https://docs.jboss.org/author/display/WFLY10/Infinispan+Subsystem">Infinispan Subsystem documentation</a>.
        </p>
    </div>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e3125"/>26.2. Disabling Caches</h2></div></div></div>
        
        <p>
            To disable the realm or user cache, you must edit the <code class="literal">keycloak-server.json</code> file
            in your distribution. Here's what the config looks like initially.
        </p>
        <p>
            </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    "userCache": {
        "infinispan" : {
            "enabled": true
        }
    },

    "realmCache": {
        "infinispan" : {
            "enabled": true
        }
    },
</pre><p>
        </p>
        <p>To disable the cache set the enabled field to false for the cache you want to disable:
            </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
    "userCache": {
        "infinispan" : {
            "enabled": false
        }
    },

    "realmCache": {
        "infinispan" : {
            "enabled": false
        }
    },
</pre><p>
        </p>
    </div>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e3133"/>26.3. Clear Caches</h2></div></div></div>
        
        <p>
            To clear the realm or user cache, go to the Keycloak admin console Realm Settings-&gt;Cache Config page. On this page you can clear the realm cache
            or the user cache. This will clear the caches for all realms and not only the selected realm.
        </p>
    </div>
</div><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="export-import.html"><strong>Prev</strong>Chapter 25. Export and Import</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="saml.html"><strong>Next</strong>Chapter 27. SAML SSO</a></li></ul></body></html>