<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 3. Installation and Configuration of Keycloak Server</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link rel="home" href="index.html" title="Keycloak Reference Guide"/><link rel="up" href="index.html" title="Keycloak Reference Guide"/><link rel="prev" href="Overview.html" title="Chapter 2. Overview"/><link rel="next" href="providers.html" title="Chapter 4. Providers and SPIs"/></head><body><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="Overview.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="providers.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="server-installation"/>Chapter 3. Installation and Configuration of Keycloak Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="server-installation.html#d4e70">3.1. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="server-installation.html#server_install">3.1.1. Install Standalone Server</a></span></dt><dt><span class="section"><a href="server-installation.html#overlay_install">3.1.2. Install on existing WildFly 10.0.0.Final or JBoss EAP 7.0.0.Beta</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e97">3.1.3. Install Development Bundle</a></span></dt></dl></dd><dt><span class="section"><a href="server-installation.html#d4e109">3.2. Configuring the Server</a></span></dt><dd><dl><dt><span class="section"><a href="server-installation.html#d4e116">3.2.1. Admin User</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e123">3.2.2. Relational Database Configuration</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e210">3.2.3. MongoDB based model</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e246">3.2.4. Outgoing Server HTTP Requests</a></span></dt><dt><span class="section"><a href="server-installation.html#truststore">3.2.5. Securing Outgoing Server HTTP Requests</a></span></dt><dt><span class="section"><a href="server-installation.html#ssl_modes">3.2.6. SSL/HTTPS Requirement/Modes</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e360">3.2.7. SSL/HTTPS Setup</a></span></dt><dt><span class="section"><a href="server-installation.html#proxy-address-forwarding">3.2.8. Configure reverse proxy for address forwarding</a></span></dt></dl></dd><dt><span class="section"><a href="server-installation.html#d4e494">3.3. Keycloak server in Domain Mode</a></span></dt><dt><span class="section"><a href="server-installation.html#d4e503">3.4. Installing Keycloak Server as Root Context</a></span></dt></dl></div>
    

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e70"/>3.1. Installation</h2></div></div></div>
        
        <p>
            Keycloak Server has three downloadable distributions. To run the Keycloak server you need to have Java 8 already
            installed.
        </p>
        <p>
            </p><div class="itemizedlist"><ul><li>
                    <code class="literal">keycloak-1.9.7.Final.[zip|tar.gz]</code> - Standalone server
                </li><li>
                    <code class="literal">keycloak-overlay-1.9.7.Final.[zip|tar.gz]</code> - Installer for WildFly or JBoss EAP
                </li><li>
                    <code class="literal">keycloak-demo-1.9.7.Final.[zip|tar.gz]</code> - Development bundle including WildFly, Keycloak, examples and documentation
                </li></ul></div><p>
        </p>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="server_install"/>3.1.1. Install Standalone Server</h3></div></div></div>
            
            <p>
                For production and for non-JavaEE developers we recommend using the standalone Keycloak server. All you need to
                do is to download <code class="literal">keycloak-1.9.7.Final.zip</code> or  <code class="literal">keycloak-1.9.7.Final.tar.gz</code>,
                unpackage and start to have a Keycloak server up and running.
            </p>

            <p>
                To install first download either the zip or tar.gz and extract. Then start by running either:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">keycloak-1.9.7.Final/bin/standalone.sh</pre><p>
                or:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">keycloak-1.9.7.Final/bin/standalone.bat</pre><p>
            </p>
        </div>


        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="overlay_install"/>3.1.2. Install on existing WildFly 10.0.0.Final or JBoss EAP 7.0.0.Beta</h3></div></div></div>
            
            <p>
                Keycloak can be installed into an existing installations of WildFly 10.0.0.Final or JBoss EAP 7.0.0.Beta.
                To do this download <code class="literal">keycloak-overlay-1.9.7.Final.zip</code> or <code class="literal">keycloak-overlay-1.9.7.Final.tar.gz</code>.
                Once downloaded extract into the root directory of your installation.
            </p>
            <p>
                To add Keycloak to existing standalone.xml server config run:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
bin/jboss-cli.sh --file=bin/keycloak-install.cli
</pre><p>
                To add Keycloak to existing standalone-ha.xml server config run:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
bin/jboss-cli.sh --file=bin/keycloak-install-ha.cli
</pre><p>
                If you want to add Keycloak to a different server config edit keycloak-install.cli or keycloak-install-ha.cli
                and change the name of the server config.
            </p>
        </div>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e97"/>3.1.3. Install Development Bundle</h3></div></div></div>
            
            <p>
                The demo bundle contains everything you need to get started with Keycloak including documentation and examples.
                To install it first download <code class="literal">keycloak-demo-1.9.7.Final.zip</code> or
                <code class="literal">keycloak-demo-1.9.7.Final.tar.gz</code>. Once downloaded extract it inside
                <code class="literal">keycloak-demo-1.9.7.Final</code> you'll find <code class="literal">keycloak</code> which contains
                a full WildFly 10.0.0.Final server with Keycloak Server and Adapters included. You'll also find <code class="literal">docs</code>
                and <code class="literal">examples</code> which contains everything you need to get started developing applications that use Keycloak.
            </p>
            <p>
                To start WildFly with Keycloak run:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">keycloak-1.9.7.Final/bin/standalone.sh</pre><p>
                or:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">keycloak-1.9.7.Final/bin/standalone.bat</pre><p>
            </p>
        </div>
    </div>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e109"/>3.2. Configuring the Server</h2></div></div></div>
        
        <p>
            Although the Keycloak Server is designed to run out of the box, there's some things you'll need
            to configure before you go into production.  Specifically:
            </p><div class="itemizedlist"><ul><li>
                    Configuring Keycloak to use a production database
                </li><li>
                    Setting up SSL/HTTPS
                </li><li>
                    Enforcing HTTPS connections
                </li></ul></div><p>
        </p>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e116"/>3.2.1. Admin User</h3></div></div></div>
            
            <p>
                To access the admin console to configure Keycloak you need an account to login. There is no built in user,
                instead you have to first create an admin account. This can done either by opening <a class="ulink" href="http://localhost:8080/auth">http://localhost:8080/auth</a>
                (creating a user through the browser can only be done through localhost) or you can use the add-user-keycloak script from
                the command-line.
            </p>
            <p>
                The <code class="literal">add-user-keycloak</code> script creates a temporary file with the details of the user,
                which are imported at startup. To add a user with this script run:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
bin/add-user-keycloak.[sh|bat] -r master -u &lt;username&gt; -p &lt;password&gt;
</pre><p>
                Then restart the server.
            </p>
            </div>

        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e123"/>3.2.2. Relational Database Configuration</h3></div></div></div>
            
            <p>
                You might want to use a better relational database for Keycloak like PostgreSQL or MySQL.  You might also
                want to tweak the configuration settings of the datasource.  Please see the <a class="ulink" href="https://docs.jboss.org/author/display/WFLY8/DataSource+configuration">Wildfly</a>
                documentation on how to do this.
            </p>
            <p>
                Keycloak runs on a Hibernate/JPA backend which is configured in the
                <code class="literal">standalone/configuration/keycloak-server.json</code>.
                By default the setting is like this:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"connectionsJpa": {
    "default": {
        "dataSource": "java:jboss/datasources/KeycloakDS",
        "databaseSchema": "update"
    }
},
</pre><p>
                Possible configuration options are:
                </p><div class="variablelist"><dl><dt><span class="term">dataSource</span></dt><dd>
                            <p>
                                JNDI name of the dataSource
                            </p>
                        </dd><dt><span class="term">jta</span></dt><dd>
                            <p>
                                boolean property to specify if datasource is JTA capable
                            </p>
                        </dd><dt><span class="term">driverDialect</span></dt><dd>
                            <p>
                                Value of Hibernate dialect. In most cases you don't need to specify this property as dialect will be
                                autodetected by Hibernate.
                            </p>
                        </dd><dt><span class="term">databaseSchema</span></dt><dd>
                            <p>
                                Specify if schema should be updated or validated. Valid values are <code class="literal">update</code> and <code class="literal">validate</code>.
                                Value <code class="literal">update</code> is default and means that DB schema will be updated to latest version.
                                Value <code class="literal">validate</code> won't touch database schema, but it will fail to start if schema is not updated to latest version.
                            </p>
                        </dd><dt><span class="term">showSql</span></dt><dd>
                            <p>
                                Specify whether Hibernate should show all SQL commands in the console (false by default)
                            </p>
                        </dd><dt><span class="term">formatSql</span></dt><dd>
                            <p>
                                Specify whether Hibernate should format SQL commands (true by default)
                            </p>
                        </dd><dt><span class="term">globalStatsInterval</span></dt><dd>
                            <p>
                                Will log global statistics from Hibernate about executed DB queries and other things. Statistics are always reported
                                to server log at specified interval (in seconds) and are cleared after each report.
                            </p>
                        </dd><dt><span class="term">schema</span></dt><dd>
                            <p>
                                Specify the database schema to use
                            </p>
                        </dd></dl></div><p>
            </p>
            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e167"/>3.2.2.1. Tested databases</h4></div></div></div>
                
                <p>
                    Here is list of RDBMS databases and corresponding JDBC drivers, which were tested with Keycloak. Note that Hibernate dialect
                    is usually set automatically according to your database, but you have possibility to override if default dialect doesn't work correctly.
                    You can setup dialect by adding property <code class="literal">driverDialect</code>
                    to the <code class="literal">keycloak-server.json</code> into <code class="literal">connectionsJpa</code> section (see above).
                    </p><div class="table"><a id="d4e173"/><p class="title"><b>Table 3.1. Tested databases</b></p><div class="table-contents">
                        <table summary="Tested databases" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th align="left">Database</th><th align="left">JDBC driver</th><th align="left">Hibernate Dialect</th></tr></thead><tbody><tr><td align="left">H2 1.3.161</td><td align="left">H2 1.3.161</td><td align="left">auto</td></tr><tr><td align="left">MySQL 5.5</td><td align="left">MySQL Connector/J 5.1.25</td><td align="left">auto</td></tr><tr><td align="left">PostgreSQL 9.2</td><td align="left">JDBC4 Postgresql Driver, Version 9.3-1100</td><td align="left">auto</td></tr><tr><td align="left">PostgresPlus 9.4</td><td align="left">edb-jdbc17-4.0</td><td align="left">auto</td></tr><tr><td align="left">Oracle 11g R1</td><td align="left">Oracle JDBC Driver v11.1.0.7</td><td align="left">auto</td></tr><tr><td align="left">Microsoft SQL Server 2012</td><td align="left">Microsoft SQL Server JDBC Driver 4.0.2206.100</td><td align="left">auto</td></tr><tr><td align="left">IBM DB2 10.5</td><td align="left">JDBC 4.0 Driver (db2jcc4.jar) 4.19.26</td><td align="left">auto</td></tr></tbody></table>
                    </div></div><p><br class="table-break"/>
                </p>
            </div>
        </div>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e210"/>3.2.3. MongoDB based model</h3></div></div></div>
            
            <p>
                Keycloak provides <a class="ulink" href="http://www.mongodb.com">MongoDB</a> based model implementation, which means that your identity data will be saved
                in MongoDB instead of traditional RDBMS. To configure Keycloak to use Mongo open <code class="literal">standalone/configuration/keycloak-server.json</code>
                in your favourite editor, then change:

</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"eventsStore": {
    "provider": "jpa",
    "jpa": {
        "exclude-events": [ "REFRESH_TOKEN" ]
    }
},

"realm": {
    "provider": "jpa"
},

"user": {
    "provider": "jpa"
},

"userSessionPersister": {
    "provider": "jpa"
},
</pre><p>

                to:

                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"eventsStore": {
    "provider": "mongo",
    "mongo": {
        "exclude-events": [ "REFRESH_TOKEN" ]
    }
},

"realm": {
    "provider": "mongo"
},

"user": {
    "provider": "mongo"
},

"userSessionPersister": {
    "provider": "mongo"
},
</pre><p>

                And at the end of the file add the snippet like this where you can configure details about your Mongo database:
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"connectionsMongo": {
    "default": {
        "host": "127.0.0.1",
        "port": "27017",
        "db": "keycloak",
        "connectionsPerHost": 100,
        "databaseSchema": "update"
    }
}
</pre><p>

                All configuration options are optional. Default values for host and port are localhost and 27017. Default name of database
                is <code class="literal">keycloak</code> . You can also specify properties <code class="literal">user</code> and <code class="literal">password</code>
                if you want authenticate against your MongoDB. If user and password are not specified, Keycloak will connect
                unauthenticated to your MongoDB.
            </p>
            <p>
                Option <code class="literal">databaseSchema</code> specify if mongo database "schema" should be updated or validated. Valid values are <code class="literal">update</code> and <code class="literal">validate</code>.
                Value <code class="literal">update</code> means that DB schema will be updated to latest version.
                Value <code class="literal">validate</code> won't touch database schema, but it will fail to start if schema is not updated to latest version.
            </p>
            <div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>
                Mongo doesn't have real database schema, but 'schema' in this case means to which Keycloak version the data in the Mongo database corresponds.
            </div>
            <p>Finally there is set of optional configuration options, which can be used to specify connection-pooling capabilities of Mongo client. Supported int options are:
                <code class="literal">connectionsPerHost</code>, <code class="literal">threadsAllowedToBlockForConnectionMultiplier</code>, <code class="literal">maxWaitTime</code>, <code class="literal">connectTimeout</code>
                <code class="literal">socketTimeout</code>. Supported boolean options are: <code class="literal">socketKeepAlive</code>, <code class="literal">autoConnectRetry</code>.
                Supported long option is <code class="literal">maxAutoConnectRetryTime</code>. See <a class="ulink" href="http://api.mongodb.org/java/2.11.4/com/mongodb/MongoClientOptions.html">Mongo documentation</a>
                for details about those options and their default values.
            </p>
            <p>
                Alternatively, you can configure MongoDB using a MongoDB <a class="ulink" href="http://docs.mongodb.org/manual/reference/connection-string/">connection URI</a>.
                In this case, you define all information concerning the connection and authentication within the URI, as described in the MongoDB documentation.
                Please note that the database specified within the URI is only used for authentication. To change the database used by keycloak you have to set
                <code class="literal">db</code> property as before. Therefore, a configuration like the
                following
                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"connectionsMongo": {
    "default": {
        "uri": "mongodb://user:password@127.0.0.1/authentication",
        "db": "keycloak",
        "databaseSchema": "update"
    }
}
</pre><p>
                will authenticate the user against the authentication database, but store all keycloak related data in the keycloak database.

            </p>
            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e242"/>3.2.3.1. MongoDB Replica Sets</h4></div></div></div>
                
                <p>
                    In order to use a mongo replica set for Keycloak, one has to use URI based configuration, which supports the
                    definition of replica sets out of the box: <code class="literal">mongodb://host1:27017,host2:27017,host3:27017/</code>.
                </p>
            </div>
        </div>

        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e246"/>3.2.4. Outgoing Server HTTP Requests</h3></div></div></div>
            
            <p>
                Keycloak server needs to invoke on remote HTTP endpoints to do things like backchannel logouts and other
                management functions.  Keycloak maintains a HTTP client connection pool which has various configuration
                settings you can specify before boot time.  This is configured in the
                <code class="literal">standalone/configuration/keycloak-server.json</code>.
                By default the setting is like this:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"connectionsHttpClient": {
    "default": {}
},
</pre><p>
                Possible configuration options are:
                </p><div class="variablelist"><dl><dt><span class="term">establish-connection-timeout-millis</span></dt><dd>
                            <p>
                                Timeout for establishing a socket connection.
                            </p>
                        </dd><dt><span class="term">socket-timeout-millis</span></dt><dd>
                            <p>
                                If an outgoing request does not receive data for this amount of time, timeout the connection.
                            </p>
                        </dd><dt><span class="term">connection-pool-size</span></dt><dd>
                            <p>
                                How many connections can be in the pool (128 by default).
                            </p>
                        </dd><dt><span class="term">max-pooled-per-route</span></dt><dd>
                            <p>
                                How many connections can be pooled per host (64 by default).
                            </p>
                        </dd><dt><span class="term">connection-ttl-millis</span></dt><dd>
                            <p>
                                Maximum connection time to live in milliseconds. Not set by default.
                            </p>
                        </dd><dt><span class="term">max-connection-idle-time-millis</span></dt><dd>
                            <p>
                                Maximum time the connection might stay idle in the connection pool (900 seconds by default). Will start background cleaner thread of Apache HTTP client.
                                Set to -1 to disable this checking and the background thread.
                            </p>
                        </dd><dt><span class="term">disable-cookies</span></dt><dd>
                            <p>
                                <code class="literal">true</code> by default.  When set to true, this will disable any cookie
                                caching.
                            </p>
                        </dd><dt><span class="term">client-keystore</span></dt><dd>
                            <p>
                                This is the file path to a Java keystore file.
                                This keystore contains client certificate for two-way SSL.
                            </p>
                        </dd><dt><span class="term">client-keystore-password</span></dt><dd>
                            <p>
                                Password for the client keystore.
                                This is
                                <span class="emphasis"><em>REQUIRED</em></span>
                                if
                                <code class="literal">client-keystore</code>
                                is set.
                            </p>
                        </dd><dt><span class="term">client-key-password</span></dt><dd>
                            <p>
                                <span class="emphasis"><em>Not supported yet, but we will support in future versions.</em></span>
                                Password for the client's key.
                                This is
                                <span class="emphasis"><em>REQUIRED</em></span>
                                if
                                <code class="literal">client-keystore</code>
                                is set.
                            </p>
                        </dd></dl></div><p>
            </p>
        </div>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="truststore"/>3.2.5. Securing Outgoing Server HTTP Requests</h3></div></div></div>
            
            <p>
            When Keycloak connects out to remote HTTP endpoints over secure https connection, it has to validate the other
            server's certificate in order to ensure it is connecting to a trusted server. That is necessary in order to
            prevent man-in-the-middle attacks.
            </p>
            <p>
            How certificates are validated is configured in the <code class="literal">standalone/configuration/keycloak-server.json</code>.
            By default truststore provider is not configured, and any https connections fall back to standard java truststore
            configuration as described in <a class="ulink" href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html">
            Java's JSSE Reference Guide</a> - using <code class="literal">javax.net.ssl.trustStore system property</code>,
            otherwise <code class="literal">cacerts</code> file that comes with java is used.
            </p>
            <p>
                Truststore is used when connecting securely to identity brokers, LDAP federation providers, when sending emails,
                and for backchannel communication with client applications.

                Some of these facilities may - in case when no trusted certificate is found in your configured truststore -
                fallback to using the JSSE provided truststore.

                The default JavaMail API implementation used to send out emails behaves in this way, for example.
            </p>
            <p>
            You can add your truststore configuration by using the following template:

            </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
"truststore": {
    "file": {
        "file": "path to your .jks file containing public certificates",
        "password": "password",
        "hostname-verification-policy": "WILDCARD",
        "disabled": false
    }
}
</pre><p>

            </p>
            <p>
            Possible configuration options are:

                </p><div class="variablelist"><dl><dt><span class="term">file</span></dt><dd>
                            <p>
                                The value is the file path to a Java keystore file.
                                HTTPS requests need a way to verify the host of the server they are talking to. This is
                                what the trustore does. The keystore contains one or more trusted host certificates or
                                certificate authorities. Truststore file should only contain public certificates of your secured hosts.

                                This is
                                <span class="emphasis"><em>REQUIRED</em></span>
                                if <code class="literal">disabled</code> is not true.
                            </p>
                        </dd><dt><span class="term">password</span></dt><dd>
                            <p>
                                Password for the truststore.
                                This is
                                <span class="emphasis"><em>REQUIRED</em></span>
                                if <code class="literal">disabled</code> is not true.
                            </p>
                        </dd><dt><span class="term">hostname-verification-policy</span></dt><dd>
                            <p>
                                <code class="literal">WILDCARD</code> by default.  For HTTPS requests, this verifies the hostname
                                of the server's certificate.  <code class="literal">ANY</code> means that the hostname is not verified.
                                <code class="literal">WILDCARD</code> Allows wildcards in subdomain names i.e. *.foo.com.
                                <code class="literal">STRICT</code> CN must match hostname exactly.
                            </p>
                        </dd><dt><span class="term">disabled</span></dt><dd>
                            <p>
                                If true (default value), truststore configuration will be ignored, and certificate checking will
                                fall back to JSSE configuration as described. If set to false, you must
                                configure <code class="literal">file</code>, and <code class="literal">password</code> for the truststore.
                            </p>
                        </dd></dl></div><p>
            </p>
            <p>
            You can use <span class="emphasis"><em>keytool</em></span> to create a new truststore file and add trusted host certificates to it:

                </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
$ keytool -import -alias HOSTDOMAIN -keystore truststore.jks -file host-certificate.cer
                </pre><p>
            </p>
        </div>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="ssl_modes"/>3.2.6. SSL/HTTPS Requirement/Modes</h3></div></div></div>
            
            <div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2>
                <p>
                    Keycloak is not set up by default to handle SSL/HTTPS. It is highly recommended that you either enable SSL
                    on the Keycloak server itself or on a reverse proxy in front of the Keycloak server.
                </p>
            </div>
            <p>
                Keycloak can run out of the box without SSL so long as you stick to private IP addresses like
                localhost, 127.0.0.1, 10.0.x.x, 192.168.x.x, and 172..16.x.x.  If you try to access Keycloak from a
                non-IP adress you will get an error.
            </p>
            <p>
                Keycloak has 3 SSL/HTTPS modes which you can set up in the admin console under the Settings-&gt;Login page
                and the <code class="literal">Require SSL</code> select box.  Each adapter config should mirror this server-side
                setting.  See adapter config section for more details.
                </p><div class="variablelist"><dl><dt><span class="term">external</span></dt><dd>
                            <p>
                                Keycloak can run out of the box without SSL so long as you stick to private IP addresses like
                                localhost, 127.0.0.1, 10.0.x.x, 192.168.x.x, and 172..16.x.x.  If you try to access Keycloak from a
                                non-IP adress you will get an error.
                            </p>
                        </dd><dt><span class="term">none</span></dt><dd>
                            <p>
                                Keycloak does not require SSL.
                            </p>
                        </dd><dt><span class="term">all</span></dt><dd>
                            <p>
                                Keycloak requires SSL for all IP addresses.
                            </p>
                        </dd></dl></div><p>
            </p>
        </div>
        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d4e360"/>3.2.7. SSL/HTTPS Setup</h3></div></div></div>
            

            <p>
                First enable SSL on Keycloak or on a reverse proxy in front of Keycloak. Then configure the Keycloak Server to enforce HTTPS connections.
            </p>

            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e363"/>3.2.7.1. Enable SSL on Keycloak</h4></div></div></div>
                
                <p>
                    The following things need to be done
                    </p><div class="itemizedlist"><ul><li>
                            Generate a self signed or third-party signed certificate and import it into a Java keystore
                            using <code class="literal">keytool</code>.
                        </li><li>
                            Enable Wildfly to use this certificate and turn on SSL/HTTPS.
                        </li></ul></div><p>
                </p>
                <div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d4e370"/>3.2.7.1.1. Creating the Certificate and Java Keystore</h5></div></div></div>
                    
                    <p>
                        In order to allow HTTPS connections, you need to obtain a self signed or third-party signed certificate
                        and import it into a Java keystore before you can enable HTTPS in the web container you are deploying
                        the Keycloak Server to.
                    </p>
                    <div class="section" lang="en-US"><div class="titlepage"><div><div><h6 class="title"><a id="d4e373"/>3.2.7.1.1.1. Self Signed Certificate</h6></div></div></div>
                        
                        <p>
                            In development, you will probably not have a third party signed certificate available to test
                            a Keycloak deployment so you'll need to generate a self-signed on.  Generate one is very easy
                            to do with the <code class="literal">keytool</code> utility that comes with the Java jdk.
                        </p>
                        <p>
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
$ keytool -genkey -alias localhost -keyalg RSA -keystore keycloak.jks -validity 10950
    Enter keystore password: secret
    Re-enter new password: secret
    What is your first and last name?
    [Unknown]:  localhost
    What is the name of your organizational unit?
    [Unknown]:  Keycloak
    What is the name of your organization?
    [Unknown]:  Red Hat
    What is the name of your City or Locality?
    [Unknown]:  Westford
    What is the name of your State or Province?
    [Unknown]:  MA
    What is the two-letter country code for this unit?
    [Unknown]:  US
    Is CN=localhost, OU=Keycloak, O=Test, L=Westford, ST=MA, C=US correct?
    [no]:  yes
</pre><p>
                        </p>
                        <p>
                            You should answer <code class="literal">What is your first and last name ?</code> question with
                            the DNS name of the machine you're installing the server on.  For testing purposes,
                            <code class="literal">localhost</code> should be used.  After executing this command, the
                            <code class="literal">keycloak.jks</code> file will be generated in the same directory as you executed
                            the <code class="literal">keytool</code> command in.
                        </p>
                        <p>
                            If you want a third-party signed certificate, but don't have one, you can obtain one for free
                            at <a class="ulink" href="http://cacert.org">cacert.org</a>.  You'll have to do a little set up first
                            before doing this though.
                        </p>
                        <p>
                            The first thing to do is generate a Certificate Request:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
$ keytool -certreq -alias yourdomain -keystore keycloak.jks &gt; keycloak.careq
</pre><p>
                        </p>
                        <p>
                             Where <code class="literal">yourdomain</code> is a DNS name for which this certificate is generated for.
                             Keytool generates the request:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
-----BEGIN NEW CERTIFICATE REQUEST-----
MIIC2jCCAcICAQAwZTELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAk1BMREwDwYDVQQHEwhXZXN0Zm9y
ZDEQMA4GA1UEChMHUmVkIEhhdDEQMA4GA1UECxMHUmVkIEhhdDESMBAGA1UEAxMJbG9jYWxob3N0
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr7kck2TaavlEOGbcpi9c0rncY4HhdzmY
Ax2nZfq1eZEaIPqI5aTxwQZzzLDK9qbeAd8Ji79HzSqnRDxNYaZu7mAYhFKHgixsolE3o5Yfzbw1
29Rvy+eUVe+WZxv5oo9wolVVpdSINIMEL2LaFhtX/c1dqiqYVpfnvFshZQaIg2nL8juzZcBjj4as
H98gIS7khql/dkZKsw9NLvyxgJvp7PaXurX29fNf3ihG+oFrL22oFyV54BWWxXCKU/GPn61EGZGw
Ft2qSIGLdctpMD1aJR2bcnlhEjZKDksjQZoQ5YMXaAGkcYkG6QkgrocDE2YXDbi7GIdf9MegVJ35
2DQMpwIDAQABoDAwLgYJKoZIhvcNAQkOMSEwHzAdBgNVHQ4EFgQUQwlZJBA+fjiDdiVzaO9vrE/i
n2swDQYJKoZIhvcNAQELBQADggEBAC5FRvMkhal3q86tHPBYWBuTtmcSjs4qUm6V6f63frhveWHf
PzRrI1xH272XUIeBk0gtzWo0nNZnf0mMCtUBbHhhDcG82xolikfqibZijoQZCiGiedVjHJFtniDQ
9bMDUOXEMQ7gHZg5q6mJfNG9MbMpQaUVEEFvfGEQQxbiFK7hRWU8S23/d80e8nExgQxdJWJ6vd0X
MzzFK6j4Dj55bJVuM7GFmfdNC52pNOD5vYe47Aqh8oajHX9XTycVtPXl45rrWAH33ftbrS8SrZ2S
vqIFQeuLL3BaHwpl3t7j2lMWcK1p80laAxEASib/fAwrRHpLHBXRcq6uALUOZl4Alt8=
-----END NEW CERTIFICATE REQUEST-----
</pre><p>
                        </p>
                        <p>
                            Send this ca request to your CA.  The CA will issue you a signed certificate and send it to you.
                            Before you import your new cert, you must obtain and import the root certificate of the CA.
                            You can download the cert from CA (ie.: root.crt) and import as follows:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
$ keytool -import -keystore keycloak.jks -file root.crt -alias root
</pre><p>
                        </p>
                        <p>
                            Last step is import your new CA generated certificate to your keystore:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
$ keytool -import -alias yourdomain -keystore keycloak.jks -file your-certificate.cer
</pre><p>
                        </p>
                    </div>
                </div>
                <div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d4e395"/>3.2.7.1.2. Installing the keystore to WildFly</h5></div></div></div>
                    
                    <p>
                        Now that you have a Java keystore with the appropriate certificates, you need to configure your
                        Wildfly installation to use it.  First step is to move the keystore file to a directory
                        you can reference in configuration.  I like to put it in <code class="literal">standalone/configuration</code>.
                        Then you need to edit <code class="literal">standalone/configuration/standalone.xml</code> to enable SSL/HTTPS.
                    </p>
                    <p>
                        To the <code class="literal">security-realms</code> element add:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;security-realm name="UndertowRealm"&gt;
    &lt;server-identities&gt;
        &lt;ssl&gt;
            &lt;keystore path="keycloak.jks" relative-to="jboss.server.config.dir" keystore-password="secret" /&gt;
        &lt;/ssl&gt;
    &lt;/server-identities&gt;
&lt;/security-realm&gt;
</pre><p>
                    </p>
                    <p>
                        Find the element <code class="literal">&lt;server name="default-server"&gt;</code> (it's a child element of <code class="literal">&lt;subsystem xmlns="urn:jboss:domain:undertow:1.0"&gt;</code>) and add:
                        </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">&lt;https-listener name="https" socket-binding="https" security-realm="UndertowRealm"/&gt;</pre><p>
                    </p>
                    <p>
                        Check the <a class="ulink" href="https://docs.jboss.org/author/display/WFLY10/Undertow+subsystem+configuration">Wildfly Undertow</a> documentation for more information on fine tuning the socket connections.
                    </p>
                </div>
            </div>

            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e409"/>3.2.7.2. Enable SSL on a Reverse Proxy</h4></div></div></div>
                
                <p>
                    Follow the documentation for your web server to enable SSL and configure reverse proxy for Keycloak.
                    It is important that you make sure the web server sets the <code class="literal">X-Forwarded-For</code> and
                    <code class="literal">X-Forwarded-Proto</code> headers on the requests made to Keycloak and you enable
                    <code class="literal">proxy-address-forwarding</code> on the Keycloak http connector. This is described in <a class="link" href="server-installation.html#proxy-address-forwarding" title="3.2.8. Configure reverse proxy for address forwarding">next section</a>, so
                    here we will focus just on SSL setup.
                </p>
                <p>
                    Assuming that your reverse proxy doesn't use port 8443 for SSL you also need to configure what port http traffic is redirected to.
                </p>

                <div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d4e417"/>3.2.7.2.1. Configure WildFly</h5></div></div></div>
                    

                    <p>
                        Open <code class="literal">standalone/configuration/standalone.xml</code> in your favorite editor.
                    </p>

                    <p>
                        First add <code class="literal">redirect-socket</code> to
                        the <code class="literal">http-listener</code> element:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">&lt;subsystem xmlns="urn:jboss:domain:undertow:1.1"&gt;
    ...
    &lt;http-listener name="default" socket-binding="http" redirect-socket="proxy-https"/&gt;
    ...
&lt;/subsystem&gt;
</pre><p>
                    </p>
                    <p>
                        Then add a new <code class="literal">socket-binding</code> element to the <code class="literal">socket-binding-group</code> element:
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;socket-binding-group name="standard-sockets" default-interface="public"
    port-offset="${jboss.socket.binding.port-offset:0}"&gt;
    ...
    &lt;socket-binding name="proxy-https" port="443"/&gt;
    ...
&lt;/socket-binding-group&gt;
</pre><p>
                    </p>
                    <p>
                        Check the <a class="ulink" href="https://docs.jboss.org/author/display/WFLY10/Undertow+subsystem+configuration">WildFly</a> documentation for more information.
                    </p>
                </div>
            </div>

        </div>

        <div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="proxy-address-forwarding"/>3.2.8. Configure reverse proxy for address forwarding</h3></div></div></div>
            
            <p>
                Keycloak needs to know the original request URL as this is needed for example to set the correct issuer in tokens as well as redirects, links, etc.
                This requires the reverse proxy to pass the original <code class="literal">Host</code> header.
            </p>
            <p>
                Keycloak has some functionalities (for example <a class="link" href="events.html" title="Chapter 22. Events">Events</a> or <a class="link" href="security_vulnerabilities.html#brute-force-attacks" title="28.7. Password guess: brute force attacks">Brute Force protector</a>)
                that relies on the fact, that remote address of the HTTP connection is the real IP address of the client machine. This may be a bit tricky when you have setup
                with reverse proxy or loadbalancer.
            </p>
            <p>
                Assume you have setup when users send requests to the "Frontend" server (reverse proxy), which then forwards them to the
                "backend" server (Keycloak) on private network. Then with default setup of Wildfly Undertow subsystem, Keycloak will see <code class="literal">request.getRemoteAddress()</code> to be
                resolved to the IP address of reverse proxy instead of real IP of client.
            </p>
            <p>
                To address this issue and see the real IP address of client, you need 2 things:
                </p><div class="itemizedlist"><ul><li>
                        <p>Configure your reverse proxy (loadbalancer) to properly set <code class="literal">X-Forwarded-For</code> and <code class="literal">X-Forwarded-Proto</code> HTTP headers.</p>
                    </li><li>
                        <p>Configure Wildfly undertow subsystem on Keycloak server's side to read the client's IP address from <code class="literal">X-Forwarded-For</code> header.</p>
                    </li></ul></div><p>
                More details for setup both things.
            </p>
            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e449"/>3.2.8.1. Configure your reverse proxy to set X-Forwarded-For</h4></div></div></div>
                
                <p>
                    Consult the documentation of your reverse proxy implementation on how to do it.
                </p>
                <p>
                    Note that when your reverse proxy receives requests from the users on public network, you also need to ensure that <code class="literal">X-Forwarded-For</code>
                    is always overwritten by proxy with the IP address of client machine. If it's not overwritten, but just forwarded, the
                    "evil" user can manually set the <code class="literal">X-Forwarded-For</code> header to the false IP address to trick Keycloak.
                </p>
                <p>
                    For example imagine that evil user connects from IP address <code class="literal">20.20.20.20</code> but he manually sets the <code class="literal">X-Forwarded-For</code> header to
                    value <code class="literal">30.30.30.30</code>. If reverse proxy "forwards" the header, it will append the old value set by evil user with the IP address user connected from.
                    So <code class="literal">X-Forwarded-For</code> header will be incorrectly set to <code class="literal">30.30.30.30 , 20.20.20.20</code>. Then Keycloak will see incorrect IP
                    address <code class="literal">30.30.30.30</code>. So in this case, reverse proxy must overwrite the old value of header and just set the real IP
                    of the user machine to <code class="literal">20.20.20.20</code>. On the other hand, when you have more reverse proxies chained together, you need to configure
                    "overwriting" just for the first proxy in the chain.
                </p>
                <p>
                    Some example setups:
                    </p><div class="variablelist"><dl><dt><span class="term">user (IP address: 20.20.20.20) -&gt; load balancer (IP Address: 30.30.30.30 ) -&gt; Keycloak</span></dt><dd>
                                <p>
                                    For this setup, loadbalancer receives the IP from the end user, so it must overwrite the header. So Keycloak will correctly see
                                    <code class="literal">X-Forwarded-For: 20.20.20.20</code> .
                                </p>
                            </dd><dt><span class="term">internet (IP address: 20.20.20.20) -&gt; reverse proxy (IP Address: 30.30.30.30 ) -&gt; load balancer (IP Address: 40.40.40.40 ) -&gt; keycloak</span></dt><dd>
                                <p>
                                    For this setup, just the first reverse proxy is supposed to overwrite <code class="literal">X-Forwarded-For</code> but second (load balancer) should just forwards it.
                                    So Keycloak will correctly see <code class="literal">X-Forwarded-For: 20.20.20.20,30.30.30.30</code>, hence in the second step, it will be able to correctly see
                                    client's remote IP address <code class="literal">20.20.20.20</code>.
                                </p>
                            </dd></dl></div><p>
                </p>
            </div>
            <div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d4e477"/>3.2.8.2. Configure Wildfly undertow subsystem</h4></div></div></div>
                
                <p>
                    This is needed, so the wildfly undertow subsystem will read the client's IP address from the <code class="literal">X-Forwarded-For</code> header rather than from the IP of network packet, which
                    came from loadbalancer and hence it's set to the IP of loadbalancer.
                </p>
                <p>
                    If your proxy sends requests to the HTTP connector, it can be configured easily by add attribute <code class="literal">proxy-address-forwarding</code> to the
                    <code class="literal">http-listener</code> subelement of undertow subsystem.
                    For example:
                    </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;http-listener name="default" socket-binding="http"
    redirect-socket="https" proxy-address-forwarding="true" /&gt;
</pre><p>
                </p>
                <p>
                    If you use AJP connector, which is common setup for loadbalancers, the proxy-address-forwarding is not available, hence you need to do slightly more configurations.
                    First add <code class="literal">filter</code> subelement of <code class="literal">filters</code> element with the value like this:
                    </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;filter name="proxy-peer"
    class-name="io.undertow.server.handlers.ProxyPeerAddressHandler"
    module="io.undertow.core" /&gt;
</pre><p>
                    Then reference it from the <code class="literal">host</code> element:
                    </p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;filter-ref name="proxy-peer"/&gt;
</pre><p>
                    If you want to check address is correctly set, you can enable <a class="link" href="events.html" title="Chapter 22. Events">events</a> and verify the IP address really points to the IP address of client machine.
                </p>
                <p>
                    Check the <a class="ulink" href="https://docs.jboss.org/author/display/WFLY10/Undertow+subsystem+configuration">WildFly</a> documentation for more information.
                </p>
            </div>
        </div>

    </div>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e494"/>3.3. Keycloak server in Domain Mode</h2></div></div></div>
        
        <p>
            In domain mode, you start the server with the "domain" command instead of the "standalone" command.  In this case, the Keycloak subsystem is
            defined in domain/configuration/domain.xml instead of standalone/configuration.standalone.xml.  Inside domain.xml, you will see more than one
            profile.  The Keycloak subsystem is defined for all initial profiles.
        </p>
        <p>
            THe server is also added to server profiles. By default two servers are started
            in the main-server-group which uses the full profile.
        </p>
        <p>
            You need to make sure <code class="literal">domain/servers/&lt;SERVER NAME&gt;/configuration</code> is identical
            for all servers in a group.
        </p>
        <p>
            To deploy custom providers and themes you should deploys these as modules and make sure the modules are
            available to all servers in the group. See <a class="link" href="providers.html" title="Chapter 4. Providers and SPIs">Providers</a> and
            <a class="link" href="themes.html" title="Chapter 11. Themes">Themes</a> sections for more information on how to do this.
        </p>
    </div>

    <div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d4e503"/>3.4. Installing Keycloak Server as Root Context</h2></div></div></div>
        
        <p>
            The Keycloak server can be installed as the default web application.  In doing so, the server can be referenced at <code class="literal">http://mydomain.com/</code> instead of <code class="literal">http://mydomain.com/auth</code>.
        </p>
        <p>
            To do this, add the <code class="literal">default-web-module</code> attribute in the Undertow subystem in standalone.xml.
</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
&lt;subsystem xmlns="urn:jboss:domain:undertow:2.0"&gt;
    &lt;server name="default-server"&gt;
        &lt;host name="default-host" alias="localhost" default-web-module="keycloak-server.war"&gt;
            &lt;location name="/" handler="welcome-content"/&gt;
        &lt;/host&gt;
</pre><p>
        </p>
        <p>
            <code class="literal">keycloak-server.war</code> is the runtime name of the Keycloak server application. Note that the WAR file does not exist as a file. If its name changes (ie. <code class="literal">keycloak-server.war</code>) in the future, find its new name from the Keycloak log entry with <code class="literal">runtime-name:</code>.
        </p>
        <p>
             </p><div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2>
                 If you have run your server before altering the root context, your database
                 will contain references to the old /auth context. Your clients may also have incorrect
                 references.  To fix this on the server side, you will need to <a class="link" href="export-import.html" title="Chapter 25. Export and Import">export
                 your database to json, make corrections, and then import.</a>  Client-side keycloak.json
                 files will need to be updated manually as well.
             </div><p>
        </p>

    </div>
</div><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="Overview.html"><strong>Prev</strong>Chapter 2. Overview</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="providers.html"><strong>Next</strong>Chapter 4. Providers and SPIs</a></li></ul></body></html>