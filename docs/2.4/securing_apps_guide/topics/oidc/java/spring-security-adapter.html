<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Securing Applications and Services Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Spring Security Adapter | Securing Applications and Services Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../../topics/oidc/java/servlet-filter-adapter.html" />
    
    
    <link rel="prev" href="../../../topics/oidc/java/spring-boot-adapter.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="2.1.8"
        data-chapter-title="Spring Security Adapter"
        data-filepath="topics/oidc/java/spring-security-adapter.adoc"
        data-basepath="../../.."
        data-revision="Wed Feb 08 2017 07:51:19 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview/overview.html">
            
                
                    <a href="../../../topics/overview/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/what-are-client-adapters.html">
            
                
                    <a href="../../../topics/overview/what-are-client-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        What are Client Adapters?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="topics/overview/supported-platforms.html">
            
                
                    <a href="../../../topics/overview/supported-platforms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Supported Platforms
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="topics/overview/supported-protocols.html">
            
                
                    <a href="../../../topics/overview/supported-protocols.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Supported Protocols
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/oidc/oidc-overview.html">
            
                
                    <a href="../../../topics/oidc/oidc-overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        OpenID Connect
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/oidc/java/java-adapters.html">
            
                
                    <a href="../../../topics/oidc/java/java-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Java Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="topics/oidc/java/java-adapter-config.html">
            
                
                    <a href="../../../topics/oidc/java/java-adapter-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Java Adapters Config
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="topics/oidc/java/jboss-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jboss-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        JBoss EAP/Wildfly Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="topics/oidc/java/fuse-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/fuse-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        JBoss Fuse Adapter
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.3.1" data-path="topics/oidc/java/fuse/install-feature.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/install-feature.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.1.</b>
                        
                        Install Feature
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.2" data-path="topics/oidc/java/fuse/classic-war.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/classic-war.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.2.</b>
                        
                        Classic WAR application
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.3" data-path="topics/oidc/java/fuse/servlet-whiteboard.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/servlet-whiteboard.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.3.</b>
                        
                        Servlet Deployed as OSGI Service
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.4" data-path="topics/oidc/java/fuse/camel.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/camel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.4.</b>
                        
                        Apache Camel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.5" data-path="topics/oidc/java/fuse/cxf-separate.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/cxf-separate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.5.</b>
                        
                        Apache CXF on Separate Jetty
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.6" data-path="topics/oidc/java/fuse/cxf-builtin.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/cxf-builtin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.6.</b>
                        
                        Apache CXF on default Jetty
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.7" data-path="topics/oidc/java/fuse/fuse-admin.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/fuse-admin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.7.</b>
                        
                        Fuse Admin Services
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="topics/oidc/java/tomcat-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/tomcat-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.4.</b>
                        
                        Tomcat 6, 7 and 8 Adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="topics/oidc/java/jetty9-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jetty9-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.5.</b>
                        
                        Jetty 9.x Adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="topics/oidc/java/jetty8-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jetty8-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.6.</b>
                        
                        Jetty 8.1.x Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="topics/oidc/java/spring-boot-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/spring-boot-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.7.</b>
                        
                        Spring Boot Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.1.8" data-path="topics/oidc/java/spring-security-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/spring-security-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.8.</b>
                        
                        Spring Security Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="topics/oidc/java/servlet-filter-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/servlet-filter-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.9.</b>
                        
                        Java Servlet Filter Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="topics/oidc/java/jaas.html">
            
                
                    <a href="../../../topics/oidc/java/jaas.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.10.</b>
                        
                        JAAS plugin
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.11" data-path="topics/oidc/java/adapter-context.html">
            
                
                    <a href="../../../topics/oidc/java/adapter-context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.11.</b>
                        
                        Security Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.12" data-path="topics/oidc/java/adapter_error_handling.html">
            
                
                    <a href="../../../topics/oidc/java/adapter_error_handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.12.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.13" data-path="topics/oidc/java/logout.html">
            
                
                    <a href="../../../topics/oidc/java/logout.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.13.</b>
                        
                        Logout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.14" data-path="topics/oidc/java/params_forwarding.html">
            
                
                    <a href="../../../topics/oidc/java/params_forwarding.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.14.</b>
                        
                        Parameters Forwarding
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.15" data-path="topics/oidc/java/client-authentication.html">
            
                
                    <a href="../../../topics/oidc/java/client-authentication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.15.</b>
                        
                        Client Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.16" data-path="topics/oidc/java/multi-tenancy.html">
            
                
                    <a href="../../../topics/oidc/java/multi-tenancy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.16.</b>
                        
                        Multi Tenancy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.17" data-path="topics/oidc/java/application-clustering.html">
            
                
                    <a href="../../../topics/oidc/java/application-clustering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.17.</b>
                        
                        Application Clustering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topics/oidc/javascript-adapter.html">
            
                
                    <a href="../../../topics/oidc/javascript-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        JavaScript Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="topics/oidc/nodejs-adapter.html">
            
                
                    <a href="../../../topics/oidc/nodejs-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Node.js Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="topics/oidc/oidc-generic.html">
            
                
                    <a href="../../../topics/oidc/oidc-generic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Other OpenID Connect libraries
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="topics/oidc/mod-auth-openidc.html">
            
                
                    <a href="../../../topics/oidc/mod-auth-openidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.1.</b>
                        
                        mod_auth_oidc Apache HTTPD Module
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/saml/saml-overview.html">
            
                
                    <a href="../../../topics/saml/saml-overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        SAML
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/saml/java/java-adapters.html">
            
                
                    <a href="../../../topics/saml/java/java-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Java Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="topics/saml/java/general-config.html">
            
                
                    <a href="../../../topics/saml/java/general-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                        General Adapter Config
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="topics/saml/java/general-config/sp_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.1.</b>
                        
                        SP Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.2" data-path="topics/saml/java/general-config/sp-keys.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.</b>
                        
                        SP Keys and Key elements
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.2.1" data-path="topics/saml/java/general-config/sp-keys/keystore_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys/keystore_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.1.</b>
                        
                        KeyStore Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.2.2" data-path="topics/saml/java/general-config/sp-keys/key_pems.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys/key_pems.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.2.</b>
                        
                        Key PEMS
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.3" data-path="topics/saml/java/general-config/sp_principalname_mapping_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp_principalname_mapping_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.3.</b>
                        
                        SP PrincipalNameMapping element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.4" data-path="topics/saml/java/general-config/roleidentifiers_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/roleidentifiers_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.4.</b>
                        
                        RoleIdentifiers element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.5" data-path="topics/saml/java/general-config/idp_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.5.</b>
                        
                        IDP Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.6" data-path="topics/saml/java/general-config/idp_singlesignonservice_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_singlesignonservice_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.6.</b>
                        
                        IDP SingleSignOnService sub element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.7" data-path="topics/saml/java/general-config/idp_singlelogoutservice_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_singlelogoutservice_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.7.</b>
                        
                        IDP SingleLogoutService sub element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.8" data-path="topics/saml/java/general-config/idp_keys_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_keys_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.8.</b>
                        
                        IDP Keys subelement
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.9" data-path="topics/saml/java/general-config/idp_httpclient_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_httpclient_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.9.</b>
                        
                        IDP HttpClient subelement
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="topics/saml/java/jboss-adapter.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                        JBoss EAP/Wildfly Adapter
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="topics/saml/java/jboss-adapter/jboss_adapter_installation.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/jboss_adapter_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.1.</b>
                        
                        Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="topics/saml/java/jboss-adapter/required_per_war_configuration.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/required_per_war_configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.2.</b>
                        
                        Per WAR Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="topics/saml/java/jboss-adapter/securing_wars.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/securing_wars.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.3.</b>
                        
                        Securing WARs via SAML Subsystem
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="topics/saml/java/tomcat-adapter.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.</b>
                        
                        Tomcat SAML adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="topics/saml/java/tomcat-adapter/tomcat_adapter_installation.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter/tomcat_adapter_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.1.</b>
                        
                        Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="topics/saml/java/tomcat-adapter/tomcat_adapter_per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter/tomcat_adapter_per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.2.</b>
                        
                        Per WAR Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="topics/saml/java/jetty-adapter.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.</b>
                        
                        Jetty SAML Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.4.1" data-path="topics/saml/java/jetty-adapter/jetty9_installation.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty9_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.1.</b>
                        
                        Jetty 9 Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.2" data-path="topics/saml/java/jetty-adapter/jetty9_per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty9_per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.2.</b>
                        
                        Jetty 9 Per WAR Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.3" data-path="topics/saml/java/jetty-adapter/jetty8-installation.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty8-installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.3.</b>
                        
                        Jetty 8 Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.4" data-path="topics/saml/java/jetty-adapter/jetty8-per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty8-per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.4.</b>
                        
                        Jetty 8 Per WAR Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="topics/saml/java/servlet-filter-adapter.html">
            
                
                    <a href="../../../topics/saml/java/servlet-filter-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.5.</b>
                        
                        Java Servlet Filter Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="topics/saml/java/idp-registration.html">
            
                
                    <a href="../../../topics/saml/java/idp-registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.6.</b>
                        
                        Registering with an IDP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="topics/saml/java/logout.html">
            
                
                    <a href="../../../topics/saml/java/logout.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.7.</b>
                        
                        Logout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="topics/saml/java/assertion-api.html">
            
                
                    <a href="../../../topics/saml/java/assertion-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.8.</b>
                        
                        Obtaining Assertion Attributes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="topics/saml/java/error_handling.html">
            
                
                    <a href="../../../topics/saml/java/error_handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.9.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="topics/saml/java/debugging.html">
            
                
                    <a href="../../../topics/saml/java/debugging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.10.</b>
                        
                        Troubleshooting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.11" data-path="topics/saml/java/MigrationFromOlderVersions.html">
            
                
                    <a href="../../../topics/saml/java/MigrationFromOlderVersions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.11.</b>
                        
                        Migration from older versions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/saml/mod-auth-mellon.html">
            
                
                    <a href="../../../topics/saml/mod-auth-mellon.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        mod_auth_mellon Apache HTTPD Module
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/client-registration.html">
            
                
                    <a href="../../../topics/client-registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Client Registration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/client-registration/client-registration-cli.html">
            
                
                    <a href="../../../topics/client-registration/client-registration-cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Client Registration CLI
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >Securing Applications and Services Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect3">
<h4 id="_spring_security_adapter">Spring Security Adapter</h4>
<div class="paragraph">
<p>To secure an application with Spring Security and Keycloak, add this adapter as a dependency to your project.
You then have to provide some extra beans in your Spring Security configuration file and add the Keycloak security filter to your pipeline.</p>
</div>
<div class="paragraph">
<p>Unlike the other Keycloak Adapters, you should not configure your security in web.xml.
However, keycloak.json is still required.</p>
</div>
<div class="sect4">
<h5 id="_adapter_installation">Adapter Installation</h5>
<div class="paragraph">
<p>Add Keycloak Spring Security adapter as a dependency to your Maven POM or Gradle build.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.keycloak<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>keycloak-spring-security-adapter<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>2.4.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spring_security_configuration">Spring Security Configuration</h5>
<div class="paragraph">
<p>The Keycloak Spring Security adapter takes advantage of Spring Security&#x2019;s flexible security configuration syntax.</p>
</div>
<div class="sect5">
<h6 id="_java_configuration">Java Configuration</h6>
<div class="paragraph">
<p>Keycloak provides a KeycloakWebSecurityConfigurerAdapter as a convenient base class for creating a <a href="http://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/config/annotation/web/WebSecurityConfigurer.html" target="_blank">WebSecurityConfigurer</a>                instance.
The implementation allows customization by overriding methods.
While its use is not required, it greatly simplifies your security context configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@Configuration
@EnableWebSecurity
@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)
public class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter
{
    /**
     * Registers the KeycloakAuthenticationProvider with the authentication manager.
     */
    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.authenticationProvider(keycloakAuthenticationProvider());
    }

    /**
     * Defines the session authentication strategy.
     */
    @Bean
    @Override
    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {
        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception
    {
        super.configure(http);
        http
                .authorizeRequests()
                .antMatchers(&quot;/customers*&quot;).hasRole(&quot;USER&quot;)
                .antMatchers(&quot;/admin*&quot;).hasRole(&quot;ADMIN&quot;)
                .anyRequest().permitAll();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You must provide a session authentication strategy bean which should be of type <code>RegisterSessionAuthenticationStrategy</code> for public or confidential applications and <code>NullAuthenticatedSessionStrategy</code> for bearer-only applications.</p>
</div>
<div class="paragraph">
<p>Spring Security&#x2019;s <code>SessionFixationProtectionStrategy</code> is currently not supported because it changes the session identifier after login via Keycloak.
If the session identifier changes, universal log out will not work because Keycloak is unaware of the new session identifier.</p>
</div>
</div>
<div class="sect5">
<h6 id="_xml_configuration">XML Configuration</h6>
<div class="paragraph">
<p>While Spring Security&#x2019;s XML namespace simplifies configuration, customizing the configuration can be a bit verbose.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:security=&quot;http://www.springframework.org/schema/security&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;org.keycloak.adapters.springsecurity&quot; /&gt;

    &lt;security:authentication-manager alias=&quot;authenticationManager&quot;&gt;
        &lt;security:authentication-provider ref=&quot;keycloakAuthenticationProvider&quot; /&gt;
    &lt;/security:authentication-manager&gt;

    &lt;bean id=&quot;adapterDeploymentContext&quot; class=&quot;org.keycloak.adapters.springsecurity.AdapterDeploymentContextFactoryBean&quot;&gt;
        &lt;constructor-arg value=&quot;/WEB-INF/keycloak.json&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;keycloakAuthenticationEntryPoint&quot; class=&quot;org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationEntryPoint&quot; /&gt;
    &lt;bean id=&quot;keycloakAuthenticationProvider&quot; class=&quot;org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider&quot; /&gt;
    &lt;bean id=&quot;keycloakPreAuthActionsFilter&quot; class=&quot;org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter&quot; /&gt;
    &lt;bean id=&quot;keycloakAuthenticationProcessingFilter&quot; class=&quot;org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter&quot;&gt;
        &lt;constructor-arg name=&quot;authenticationManager&quot; ref=&quot;authenticationManager&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;keycloakLogoutHandler&quot; class=&quot;org.keycloak.adapters.springsecurity.authentication.KeycloakLogoutHandler&quot;&gt;
        &lt;constructor-arg ref=&quot;adapterDeploymentContext&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;logoutFilter&quot; class=&quot;org.springframework.security.web.authentication.logout.LogoutFilter&quot;&gt;
        &lt;constructor-arg name=&quot;logoutSuccessUrl&quot; value=&quot;/&quot; /&gt;
        &lt;constructor-arg name=&quot;handlers&quot;&gt;
            &lt;list&gt;
                &lt;ref bean=&quot;keycloakLogoutHandler&quot; /&gt;
                &lt;bean class=&quot;org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler&quot; /&gt;
            &lt;/list&gt;
        &lt;/constructor-arg&gt;
        &lt;property name=&quot;logoutRequestMatcher&quot;&gt;
            &lt;bean class=&quot;org.springframework.security.web.util.matcher.AntPathRequestMatcher&quot;&gt;
                &lt;constructor-arg name=&quot;pattern&quot; value=&quot;/sso/logout**&quot; /&gt;
                &lt;constructor-arg name=&quot;httpMethod&quot; value=&quot;GET&quot; /&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;security:http auto-config=&quot;false&quot; entry-point-ref=&quot;keycloakAuthenticationEntryPoint&quot;&gt;
        &lt;security:custom-filter ref=&quot;keycloakPreAuthActionsFilter&quot; before=&quot;LOGOUT_FILTER&quot; /&gt;
        &lt;security:custom-filter ref=&quot;keycloakAuthenticationProcessingFilter&quot; before=&quot;FORM_LOGIN_FILTER&quot; /&gt;
        &lt;security:intercept-url pattern=&quot;/customers**&quot; access=&quot;ROLE_USER&quot; /&gt;
        &lt;security:intercept-url pattern=&quot;/admin**&quot; access=&quot;ROLE_ADMIN&quot; /&gt;
        &lt;security:custom-filter ref=&quot;logoutFilter&quot; position=&quot;LOGOUT_FILTER&quot; /&gt;
    &lt;/security:http&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_multi_tenancy">Multi Tenancy</h5>
<div class="paragraph">
<p>The Keycloak Spring Security adapter also supports multi tenancy.
Instead of injecting <code>AdapterDeploymentContextFactoryBean</code> with the path to <code>keycloak.json</code> you can inject an implementation of the <code>KeycloakConfigResolver</code> interface.
More details on how to implement the <code>KeycloakConfigResolver</code> can be found in <a href="multi-tenancy.html#_multi_tenancy">Multi Tenancy</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_naming_security_roles">Naming Security Roles</h5>
<div class="paragraph">
<p>Spring Security, when using role-based authentication, requires that role names start with <code>ROLE_</code>.
For example, an administrator role must be declared in Keycloak as <code>ROLE_ADMIN</code> or similar, not simply <code>ADMIN</code>.</p>
</div>
<div class="paragraph">
<p>The class <code>org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider</code>            supports an optional <code>org.springframework.security.core.authority.mapping.GrantedAuthoritiesMapper</code>            which can be used to map roles coming from Keycloak to roles recognized by Spring Security.
Use, for example, <code>org.springframework.security.core.authority.mapping.SimpleAuthorityMapper</code> to insert the <code>ROLE_</code> prefix and convert the role name to upper case.
The class is part of Spring Security Core module.</p>
</div>
</div>
<div class="sect4">
<h5 id="_client_to_client_support">Client to Client Support</h5>
<div class="paragraph">
<p>To simplify communication between clients, Keycloak provides an extension of Spring&#x2019;s <code>RestTemplate</code> that handles bearer token authentication for you.
To enable this feature your security configuration must add the <code>KeycloakRestTemplate</code> bean.
Note that it must be scoped as a prototype to function correctly.</p>
</div>
<div class="paragraph">
<p>For Java configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@Configuration
@EnableWebSecurity
@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)
public class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter {

    ...

    @Autowired
    public KeycloakClientRequestFactory keycloakClientRequestFactory;

    @Bean
    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)
    public KeycloakRestTemplate keycloakRestTemplate() {
        return new KeycloakRestTemplate(keycloakClientRequestFactory);
    }

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For XML configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;bean id=&quot;keycloakRestTemplate&quot; class=&quot;org.keycloak.adapters.springsecurity.client.KeycloakRestTemplate&quot; scope=&quot;prototype&quot;&gt;
    &lt;constructor-arg name=&quot;factory&quot; ref=&quot;keycloakClientRequestFactory&quot; /&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your application code can then use <code>KeycloakRestTemplate</code> any time it needs to make a call to another client.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@Service
public class RemoteProductService implements ProductService {

    @Autowired
    private KeycloakRestTemplate template;

    private String endpoint;

    @Override
    public List&lt;String&gt; getProducts() {
        ResponseEntity&lt;String[]&gt; response = template.getForEntity(endpoint, String[].class);
        return Arrays.asList(response.getBody());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spring_boot_configuration">Spring Boot Configuration</h5>
<div class="paragraph">
<p>Spring Boot attempts to eagerly register filter beans with the web application context.
Therefore, when running the Keycloak Spring Security adapter in a Spring Boot environment, it may be necessary to add two <code>FilterRegistrationBean</code>s to your security configuration to prevent the Keycloak filters from being registered twice.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@Configuration
@EnableWebSecurity
public class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter
{
    ...

    @Bean
    public FilterRegistrationBean keycloakAuthenticationProcessingFilterRegistrationBean(
            KeycloakAuthenticationProcessingFilter filter) {
        FilterRegistrationBean registrationBean = new FilterRegistrationBean(filter);
        registrationBean.setEnabled(false);
        return registrationBean;
    }

    @Bean
    public FilterRegistrationBean keycloakPreAuthActionsFilterRegistrationBean(
            KeycloakPreAuthActionsFilter filter) {
        FilterRegistrationBean registrationBean = new FilterRegistrationBean(filter);
        registrationBean.setEnabled(false);
        return registrationBean;
    }

    ...
}</code></pre>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../topics/oidc/java/spring-boot-adapter.html" class="navigation navigation-prev " aria-label="Previous page: Spring Boot Adapter"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../topics/oidc/java/servlet-filter-adapter.html" class="navigation navigation-next " aria-label="Next page: Java Servlet Filter Adapter"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

    
    <script src="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Securing Applications and Services Guide -->
</html>
