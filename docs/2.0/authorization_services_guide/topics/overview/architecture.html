<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book  -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Architecture | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../topics/overview/terminology.html" />
    
    
    <link rel="prev" href="../../topics/overview/overview.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="1.1"
        data-chapter-title="Architecture"
        data-filepath="topics/overview/architecture.adoc"
        data-basepath="../.."
        data-revision="Wed Feb 08 2017 07:52:19 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview/overview.html">
            
                
                    <a href="../../topics/overview/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="topics/overview/architecture.html">
            
                
                    <a href="../../topics/overview/architecture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="topics/overview/terminology.html">
            
                
                    <a href="../../topics/overview/terminology.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Terminology
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/getting-started/overview.html">
            
                
                    <a href="../../topics/getting-started/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Getting Started
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/getting-started/hello-world/overview.html">
            
                
                    <a href="../../topics/getting-started/hello-world/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Securing a Servlet Application
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="topics/getting-started/hello-world/create-realm.html">
            
                
                    <a href="../../topics/getting-started/hello-world/create-realm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Creating a Realm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="topics/getting-started/hello-world/create-resource-server.html">
            
                
                    <a href="../../topics/getting-started/hello-world/create-resource-server.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Enabling Authorization Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="topics/getting-started/hello-world/deploy.html">
            
                
                    <a href="../../topics/getting-started/hello-world/deploy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Build, Deploy and Test
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/resource-server/overview.html">
            
                
                    <a href="../../topics/resource-server/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Managing Resource Servers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/resource-server/create-client.html">
            
                
                    <a href="../../topics/resource-server/create-client.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Creating a Client Application
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/resource-server/enable-authorization.html">
            
                
                    <a href="../../topics/resource-server/enable-authorization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Enabling Authorization Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="topics/resource-server/default-config.html">
            
                
                    <a href="../../topics/resource-server/default-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Default Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="topics/resource-server/import-config.html">
            
                
                    <a href="../../topics/resource-server/import-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Exporting and Importing Authorization Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/resource/overview.html">
            
                
                    <a href="../../topics/resource/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Managing Resources
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/resource/view.html">
            
                
                    <a href="../../topics/resource/view.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Viewing Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="topics/resource/create.html">
            
                
                    <a href="../../topics/resource/create.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Creating Resources
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/policy/overview.html">
            
                
                    <a href="../../topics/policy/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Managing Policies
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="topics/policy/user-policy.html">
            
                
                    <a href="../../topics/policy/user-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        User-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="topics/policy/role-policy.html">
            
                
                    <a href="../../topics/policy/role-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Role-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="topics/policy/js-policy.html">
            
                
                    <a href="../../topics/policy/js-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        JavaScript-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="topics/policy/drools-policy.html">
            
                
                    <a href="../../topics/policy/drools-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Drools-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="topics/policy/time-policy.html">
            
                
                    <a href="../../topics/policy/time-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Time-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="topics/policy/aggregated-policy.html">
            
                
                    <a href="../../topics/policy/aggregated-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Aggregated Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="topics/policy/logic.html">
            
                
                    <a href="../../topics/policy/logic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Positive and Negative Logic
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="topics/policy/evaluation-api.html">
            
                
                    <a href="../../topics/policy/evaluation-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Policy Evaluation API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/permission/overview.html">
            
                
                    <a href="../../topics/permission/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Managing Permissions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="topics/permission/create-resource.html">
            
                
                    <a href="../../topics/permission/create-resource.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Creating Resource-based Permissions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="topics/permission/create-scope.html">
            
                
                    <a href="../../topics/permission/create-scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Creating Scope-based Permissions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="topics/permission/decision-strategy.html">
            
                
                    <a href="../../topics/permission/decision-strategy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Policy Decision Strategies
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/policy-evaluation-tool/overview.html">
            
                
                    <a href="../../topics/policy-evaluation-tool/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Evaluating and Testing Policies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/service/overview.html">
            
                
                    <a href="../../topics/service/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Authorization Services
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="topics/service/protection/protection-api.html">
            
                
                    <a href="../../topics/service/protection/protection-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Protection API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="topics/service/protection/whatis-obtain-pat.html">
            
                
                    <a href="../../topics/service/protection/whatis-obtain-pat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                        What is a PAT and How to Obtain It
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="topics/service/protection/resources-api-papi.html">
            
                
                    <a href="../../topics/service/protection/resources-api-papi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.2.</b>
                        
                        Managing Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="topics/service/protection/permission-api-papi.html">
            
                
                    <a href="../../topics/service/protection/permission-api-papi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.3.</b>
                        
                        Managing Permission Requests
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="topics/service/authorization/authorization-api.html">
            
                
                    <a href="../../topics/service/authorization/authorization-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Authorization API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="topics/service/authorization/whatis-obtain-aat.html">
            
                
                    <a href="../../topics/service/authorization/whatis-obtain-aat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                        What is a AAT and How to Obtain It
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="topics/service/authorization/authorization-api-aapi.html">
            
                
                    <a href="../../topics/service/authorization/authorization-api-aapi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                        Requesting Authorization Data and Token
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="topics/service/entitlement/entitlement-api.html">
            
                
                    <a href="../../topics/service/entitlement/entitlement-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Entitlement API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="topics/service/entitlement/entitlement-api-aapi.html">
            
                
                    <a href="../../topics/service/entitlement/entitlement-api-aapi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.1.</b>
                        
                        Requesting Entitlements
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="topics/service/protection/token-introspection.html">
            
                
                    <a href="../../topics/service/protection/token-introspection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Introspecting a Requesting Party Token
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="topics/service/client-api.html">
            
                
                    <a href="../../topics/service/client-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Authorization Client Java API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/enforcer/overview.html">
            
                
                    <a href="../../topics/enforcer/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Policy Enforcers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/enforcer/keycloak-enforcement-filter.html">
            
                
                    <a href="../../topics/enforcer/keycloak-enforcement-filter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Keycloak Adapter Policy Enforcer
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="topics/enforcer/keycloak-enforcement-bearer.html">
            
                
                    <a href="../../topics/enforcer/keycloak-enforcement-bearer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.1.</b>
                        
                        Protecting a Stateless Service Using a Bearer Token
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.1.2" data-path="topics/enforcer/authorization-context.html">
            
                
                    <a href="../../topics/enforcer/authorization-context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.2.</b>
                        
                        Obtaining the Authorization Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.1.3" data-path="topics/enforcer/js-adapter.html">
            
                
                    <a href="../../topics/enforcer/js-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.3.</b>
                        
                        JavaScript Integration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="topics/example/overview.html">
            
                
                    <a href="../../topics/example/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Examples
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="../../images/authz-arch-overview.png" alt="Keycloak AuthZ Architecture Overview"></span></p>
</div>
<div class="paragraph">
<p>From a design perspective, the Authorization Services are based on a well defined set of authorization patterns providing a:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Policy Administration Point (PAP)</strong></p>
<div class="paragraph">
<p>Provides a set of UIs based on Keycloak Administration Console to manage resource servers, resources, scopes, permissions and policies.
Part of this also accomplished remotely through the use of the <a href="../service/protection-api.html">Protection API</a>.</p>
</div>
</li>
<li>
<p><strong>Policy Decision Point (PDP)</strong></p>
<div class="paragraph">
<p>Provides a distributable policy decision point to where authorization requests are sent and policies are evaluated accordingly with the permissions being requested. Part of this also accomplished remotely through the use of the
<a href="../service/authorization-api.html">Authorization</a> and <a href="../service/entitlement-api.html">Entitlement</a> APIs.</p>
</div>
</li>
<li>
<p><strong>Policy Enforcement Point (PEP)</strong></p>
<div class="paragraph">
<p>Provides implementations for different environments to actually enforce authorization decisions at the resource server side.
Keycloak provides some built-in <a href="../enforcer/overview.html">Policy Enforcers</a>.</p>
</div>
</li>
<li>
<p><strong>Policy Information Point (PIP)</strong></p>
<div class="paragraph">
<p>Being based on Keycloak Authentication Server, you can obtain attributes from identities and runtime environment during the evaluation of authorization policies.</p>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_authorization_process">The Authorization Process</h3>
<div class="paragraph">
<p>Three main processes define the necessary steps to understand how to use KC to enable fine-grained authorization to your applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource Management</strong></p>
</li>
<li>
<p><strong>Permission and Policy Management</strong></p>
</li>
<li>
<p><strong>Policy Enforcement</strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_resource_management">Resource Management</h4>
<div class="paragraph">
<p><strong>Resource Management</strong> involves all the necessary steps to define what is being protected.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/resource-mgmt-process.png" alt="Resource Management Overview"></span></p>
</div>
<div class="paragraph">
<p>First, you need to tell to Keycloak what are you looking to protect, which usually represents a web application or a set of one or more services. See <a href="terminology.html">Terminology</a> for more information about
Resource Servers.</p>
</div>
<div class="paragraph">
<p>Resource Servers are managed using the Keycloak Administration Console. There you can enable any registered client application as a resource server and start managing the resources and scopes you want to protect.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/rs-r-scopes.png" alt="Resource Server Overview"></span></p>
</div>
<div class="paragraph">
<p>A Resource can be a web page, a RESTFul resource, a file in your filesystem, an EJB, etc. They can represent a group of resources (just like a Class in Java) or they can represent a single and specific resource.</p>
</div>
<div class="paragraph">
<p>For instance, you may have a <em>Bank Account</em> resource that represents all banking accounts and use it to define the authorization policies that are common to all banking accounts. However,
you may want to define specific policies for <em>Alice Account</em> (a resource instance that belongs to a customer), where only the owner is allowed to access some information or perform an operation.</p>
</div>
<div class="paragraph">
<p>Resources can be managed using Keycloak Administration Console or the <a href="../service/protection-api.html">Protection API</a>. In the latter case, resource servers are able to
manage their resources remotely.</p>
</div>
<div class="paragraph">
<p>Scopes usually represent the actions that can be performed on a resource, but they are not limited to that. You can also use scopes to represent a single or multiple attributes within a resource.</p>
</div>
</div>
<div class="sect3">
<h4 id="_permission_and_policy_management">Permission and Policy Management</h4>
<div class="paragraph">
<p>Once you have defined your resource server and all the resources you want to protect, you can start working with the fun part: <strong>Permission and Policy Management</strong>.</p>
</div>
<div class="paragraph">
<p>This process involves all the necessary steps to actually define the security and access requirements that govern your resources.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/policy-mgmt-process.png" alt="Permission and Policy Management Overview"></span></p>
</div>
<div class="paragraph">
<p>Policies define the conditions that must be satisfied to access or perform operations on something (resource or scope), but they are not tied with what they are protecting. They are generic and can be reused
to build permissions or even more complex policies.</p>
</div>
<div class="paragraph">
<p>For instance, we may want to allow access to a group of resources only for users granted with a role &quot;User Premium&quot;. For that, we can just define a simple RBAC (Role-based Access Control).</p>
</div>
<div class="paragraph">
<p>Keycloak provides a few built-in policy types(and their respective policy providers) covering the most common access control mechanisms. You can even create policies based on rules written using JavaScript or JBoss Drools.</p>
</div>
<div class="paragraph">
<p>Once you have your policies defined, you can start defining your permissions. Differently than policies, permissions are tied coupled with the resource they are protecting. Here you specify
what you want to protect (resource or scope) and the policies that must be satisfied in order to <em>GRANT</em> or <em>DENY</em> that permission to someone asking for it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_policy_enforcement">Policy Enforcement</h4>
<div class="paragraph">
<p><strong>Policy Enforcement</strong> involves the necessary steps to actually enforce authorization decisions to a resource server. This is achieved by enabling a <strong>Policy Enforcement Point</strong> or PEP at the
resource server that is capable of communication with the authorization server, ask for authorization data and control access to protected resources based on the decisions and permissions returned
 by the server.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/pep-pattern-diagram.png" alt="PEP Overview"></span></p>
</div>
<div class="paragraph">
<p>Keycloak provides some built-in <a href="../enforcer/overview.html">Policy Enforcers</a> implementations that you can use to protect your applications depending on the platform they are running on.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authorization_services">Authorization Services</h3>
<div class="paragraph">
<p>Authorization Services consist of the following RESTFul APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Protection API</strong></p>
</li>
<li>
<p><strong>Authorization API</strong></p>
</li>
<li>
<p><strong>Entitlement API</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these services provide a specific API covering the different steps involved in the authorization process.</p>
</div>
<div class="sect3">
<h4 id="_protection_api">Protection API</h4>
<div class="paragraph">
<p>The <strong>Protection API</strong> is a <a href="https://docs.kantarainitiative.org/uma/rec-uma-core.html" target="_blank">UMA-compliant</a> endpoint providing a small set of operations
for resource servers in order help them managing their resources and scopes. Only resource servers are allowed to access this API, which also requires a
<strong>uma_protection</strong> scope.</p>
</div>
<div class="paragraph">
<p>The operations provided by the Protection API can be organized in two main groups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource Management</strong></p>
<div class="ulist">
<ul>
<li>
<p>Create Resource</p>
</li>
<li>
<p>Delete Resource</p>
</li>
<li>
<p>Find by Id</p>
</li>
<li>
<p>Find All</p>
</li>
<li>
<p>Find with filters (eg.: search by name, type or URI)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Permission Management</strong></p>
<div class="ulist">
<ul>
<li>
<p>Issue Permission Tickets</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By default, Remote Resource Management is enabled. You can change that using the Keycloak Administration Console and only allow resource management through the console.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When using the UMA protocol, the issuance of Permission Tickets by the Protection API is an important part of the whole authorization process. As we&#x2019;ll see later, they represent the permissions
being requested by client and that are sent to the server in order to obtain a final token with all permissions granted during the evaluation of the permissions and policies
associated with the resources and scopes being requested.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="../service/protection-api.html">Protection API</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_authorization_api">Authorization API</h4>
<div class="paragraph">
<p>The <strong>Authorization API</strong> is also a <a href="https://docs.kantarainitiative.org/uma/rec-uma-core.html" target="_blank">UMA-compliant</a> endpoint providing a single operation that exchanges an ID Token and <em>Permission Ticket</em>
with a <strong>Requesting Party Token</strong> or <strong>RPT</strong>.</p>
</div>
<div class="paragraph">
<p>The RPT holds all permissions granted to a client and can be used to call a resource server in order to get access to its protected resources.</p>
</div>
<div class="paragraph">
<p>When asking a RPT you can also provide a previously issued RPT. In this case, the resulting RPT will consist of the union of the permissions from the previously RPT and the new ones
within a permission ticket.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/authz-calls.png" alt="Authorization API Overview"></span></p>
</div>
<div class="paragraph">
<p>For more information, see <a href="../service/authorization-api.html">Authorization API</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_entitlement_api">Entitlement API</h3>
<div class="paragraph">
<p>The <strong>Entitlement API</strong> provides a 1-legged protocol to issue RPTs. Unlike the_Authorization API_, the Entitlement API only expects an ID Token.</p>
</div>
<div class="paragraph">
<p>From this API you can obtain all the entitlements or permissions for an user (based on the resources managed by a given resource server) or just the entitlements for a set of
one or more resources.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../images/entitlement-calls.png" alt="Entitlement API Overview"></span></p>
</div>
<div class="paragraph">
<p>For more informationm, see <a href="../service/entitlement-api.html">Entitlement API</a>.</p>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../topics/overview/overview.html" class="navigation navigation-prev " aria-label="Previous page: Overview"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../topics/overview/terminology.html" class="navigation navigation-next " aria-label="Next page: Terminology"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book  -->
</html>
