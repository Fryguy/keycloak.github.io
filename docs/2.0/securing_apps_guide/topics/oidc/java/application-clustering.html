<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Securing Applications and Services Guide -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Application Clustering | Securing Applications and Services Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../../topics/oidc/javascript-adapter.html" />
    
    
    <link rel="prev" href="../../../topics/oidc/java/multi-tenancy.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="2.1.15"
        data-chapter-title="Application Clustering"
        data-filepath="topics/oidc/java/application-clustering.adoc"
        data-basepath="../../.."
        data-revision="Wed Feb 08 2017 07:52:23 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview/overview.html">
            
                
                    <a href="../../../topics/overview/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/what-are-client-adapters.html">
            
                
                    <a href="../../../topics/overview/what-are-client-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        What are Client Adapters?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="topics/overview/supported-platforms.html">
            
                
                    <a href="../../../topics/overview/supported-platforms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Supported Platforms
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="topics/overview/supported-protocols.html">
            
                
                    <a href="../../../topics/overview/supported-protocols.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Supported Protocols
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/oidc/oidc-overview.html">
            
                
                    <a href="../../../topics/oidc/oidc-overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        OpenID Connect
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/oidc/java/java-adapters.html">
            
                
                    <a href="../../../topics/oidc/java/java-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Java Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="topics/oidc/java/java-adapter-config.html">
            
                
                    <a href="../../../topics/oidc/java/java-adapter-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Java Adapters Config
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="topics/oidc/java/jboss-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jboss-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        JBoss EAP/Wildfly Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="topics/oidc/java/fuse-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/fuse-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        JBoss Fuse Adapter
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.3.1" data-path="topics/oidc/java/fuse/classic-war.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/classic-war.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.1.</b>
                        
                        Classic WAR application
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.2" data-path="topics/oidc/java/fuse/servlet-whiteboard.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/servlet-whiteboard.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.2.</b>
                        
                        Servlet Deployed as OSGI Service
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.3" data-path="topics/oidc/java/fuse/camel.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/camel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.3.</b>
                        
                        Apache Camel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.4" data-path="topics/oidc/java/fuse/cxf-separate.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/cxf-separate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.4.</b>
                        
                        Apache CXF on Separate Jetty
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.5" data-path="topics/oidc/java/fuse/cxf-builtin.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/cxf-builtin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.5.</b>
                        
                        Apache CXF on default Jetty
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3.6" data-path="topics/oidc/java/fuse/fuse-admin.html">
            
                
                    <a href="../../../topics/oidc/java/fuse/fuse-admin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.6.</b>
                        
                        Fuse Admin Services
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="topics/oidc/java/tomcat-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/tomcat-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.4.</b>
                        
                        Tomcat 6, 7 and 8 Adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="topics/oidc/java/jetty9-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jetty9-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.5.</b>
                        
                        Jetty 9.x Adapters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="topics/oidc/java/jetty8-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/jetty8-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.6.</b>
                        
                        Jetty 8.1.x Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="topics/oidc/java/spring-boot-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/spring-boot-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.7.</b>
                        
                        Spring Boot Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.8" data-path="topics/oidc/java/spring-security-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/spring-security-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.8.</b>
                        
                        Spring Security Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="topics/oidc/java/servlet-filter-adapter.html">
            
                
                    <a href="../../../topics/oidc/java/servlet-filter-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.9.</b>
                        
                        Java Servlet Filter Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="topics/oidc/java/jaas.html">
            
                
                    <a href="../../../topics/oidc/java/jaas.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.10.</b>
                        
                        JAAS plugin
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.11" data-path="topics/oidc/java/adapter-context.html">
            
                
                    <a href="../../../topics/oidc/java/adapter-context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.11.</b>
                        
                        Security Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.12" data-path="topics/oidc/java/adapter_error_handling.html">
            
                
                    <a href="../../../topics/oidc/java/adapter_error_handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.12.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.13" data-path="topics/oidc/java/logout.html">
            
                
                    <a href="../../../topics/oidc/java/logout.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.13.</b>
                        
                        Logout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.14" data-path="topics/oidc/java/multi-tenancy.html">
            
                
                    <a href="../../../topics/oidc/java/multi-tenancy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.14.</b>
                        
                        Multi Tenancy
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.1.15" data-path="topics/oidc/java/application-clustering.html">
            
                
                    <a href="../../../topics/oidc/java/application-clustering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.15.</b>
                        
                        Application Clustering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topics/oidc/javascript-adapter.html">
            
                
                    <a href="../../../topics/oidc/javascript-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        JavaScript Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="topics/oidc/oidc-generic.html">
            
                
                    <a href="../../../topics/oidc/oidc-generic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Other OpenID Connect libraries
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="topics/oidc/mod-auth-openidc.html">
            
                
                    <a href="../../../topics/oidc/mod-auth-openidc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.1.</b>
                        
                        mod_auth_oidc Apache HTTPD Module
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/saml/saml-overview.html">
            
                
                    <a href="../../../topics/saml/saml-overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        SAML
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/saml/java/java-adapters.html">
            
                
                    <a href="../../../topics/saml/java/java-adapters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Java Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="topics/saml/java/general-config.html">
            
                
                    <a href="../../../topics/saml/java/general-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                        General Adapter Config
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="topics/saml/java/general-config/sp_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.1.</b>
                        
                        SP Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.2" data-path="topics/saml/java/general-config/sp-keys.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.</b>
                        
                        SP Keys and Key elements
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.2.1" data-path="topics/saml/java/general-config/sp-keys/keystore_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys/keystore_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.1.</b>
                        
                        KeyStore Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.2.2" data-path="topics/saml/java/general-config/sp-keys/key_pems.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp-keys/key_pems.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.2.</b>
                        
                        Key PEMS
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.3" data-path="topics/saml/java/general-config/sp_principalname_mapping_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/sp_principalname_mapping_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.3.</b>
                        
                        SP PrincipalNameMapping element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.4" data-path="topics/saml/java/general-config/roleidentifiers_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/roleidentifiers_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.4.</b>
                        
                        RoleIdentifiers element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.5" data-path="topics/saml/java/general-config/idp_element.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_element.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.5.</b>
                        
                        IDP Element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.6" data-path="topics/saml/java/general-config/idp_singlesignonservice_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_singlesignonservice_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.6.</b>
                        
                        IDP SingleSignOnService sub element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.7" data-path="topics/saml/java/general-config/idp_singlelogoutservice_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_singlelogoutservice_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.7.</b>
                        
                        IDP SingleLogoutService sub element
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.1.8" data-path="topics/saml/java/general-config/idp_keys_subelement.html">
            
                
                    <a href="../../../topics/saml/java/general-config/idp_keys_subelement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.8.</b>
                        
                        IDP Keys subelement
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="topics/saml/java/jboss-adapter.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                        JBoss EAP/Wildfly Adapter
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="topics/saml/java/jboss-adapter/jboss_adapter_installation.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/jboss_adapter_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.1.</b>
                        
                        Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="topics/saml/java/jboss-adapter/required_per_war_configuration.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/required_per_war_configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.2.</b>
                        
                        Per WAR Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="topics/saml/java/jboss-adapter/securing_wars.html">
            
                
                    <a href="../../../topics/saml/java/jboss-adapter/securing_wars.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.3.</b>
                        
                        Securing WARs via SAML Subsystem
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="topics/saml/java/tomcat-adapter.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.</b>
                        
                        Tomcat SAML adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="topics/saml/java/tomcat-adapter/tomcat_adapter_installation.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter/tomcat_adapter_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.1.</b>
                        
                        Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="topics/saml/java/tomcat-adapter/tomcat_adapter_per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/tomcat-adapter/tomcat_adapter_per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.2.</b>
                        
                        Per WAR Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="topics/saml/java/jetty-adapter.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.</b>
                        
                        Jetty SAML Adapters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.4.1" data-path="topics/saml/java/jetty-adapter/jetty9_installation.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty9_installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.1.</b>
                        
                        Jetty 9 Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.2" data-path="topics/saml/java/jetty-adapter/jetty9_per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty9_per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.2.</b>
                        
                        Jetty 9 Per WAR Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.3" data-path="topics/saml/java/jetty-adapter/jetty8-installation.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty8-installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.3.</b>
                        
                        Jetty 8 Adapter Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.4.4" data-path="topics/saml/java/jetty-adapter/jetty8-per_war_config.html">
            
                
                    <a href="../../../topics/saml/java/jetty-adapter/jetty8-per_war_config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.4.4.</b>
                        
                        Jetty 8 Per WAR Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="topics/saml/java/servlet-filter-adapter.html">
            
                
                    <a href="../../../topics/saml/java/servlet-filter-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.5.</b>
                        
                        Java Servlet Filter Adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="topics/saml/java/idp-registration.html">
            
                
                    <a href="../../../topics/saml/java/idp-registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.6.</b>
                        
                        Registering with an IDP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="topics/saml/java/logout.html">
            
                
                    <a href="../../../topics/saml/java/logout.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.7.</b>
                        
                        Logout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="topics/saml/java/assertion-api.html">
            
                
                    <a href="../../../topics/saml/java/assertion-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.8.</b>
                        
                        Obtaining Assertion Attributes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="topics/saml/java/error_handling.html">
            
                
                    <a href="../../../topics/saml/java/error_handling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.9.</b>
                        
                        Error Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="topics/saml/java/debugging.html">
            
                
                    <a href="../../../topics/saml/java/debugging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.10.</b>
                        
                        Troubleshooting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.11" data-path="topics/saml/java/MigrationFromOlderVersions.html">
            
                
                    <a href="../../../topics/saml/java/MigrationFromOlderVersions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.11.</b>
                        
                        Migration from older versions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/saml/mod-auth-mellon.html">
            
                
                    <a href="../../../topics/saml/mod-auth-mellon.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        mod_auth_mellon Apache HTTPD Module
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/client-registration.html">
            
                
                    <a href="../../../topics/client-registration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Client Registration
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >Securing Applications and Services Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect3">
<h4 id="_applicationclustering">Application Clustering</h4>
<div class="paragraph">
<p>This chapter is related to supporting clustered applications deployed to JBoss EAP, WildFly and JBoss AS.</p>
</div>
<div class="paragraph">
<p>There are a few options available depending on whether your application is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stateless or stateful</p>
</li>
<li>
<p>Distributable (replicated http session) or non-distributable</p>
</li>
<li>
<p>Relying on sticky sessions provided by load balancer</p>
</li>
<li>
<p>Hosted on same domain as Keycloak</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dealing with clustering is not quite as simple as for a regular application. Mainly due to the fact that both the browser and the server-side application
sends requests to Keycloak, so it&#x2019;s not as simple as enabling sticky sessions on your load balancer.</p>
</div>
<div class="sect4">
<h5 id="_stateless_token_store">Stateless token store</h5>
<div class="paragraph">
<p>By default, the web application secured by Keycloak uses the HTTP session to store security context. This means that you either have to
enable sticky sessions or replicate the HTTP session.</p>
</div>
<div class="paragraph">
<p>As an alternative to storing the security context in the HTTP session the adapter can be configured to store this in a cookie instead. This is useful if you want
to make your application stateless or if you don&#x2019;t want to store the security context in the HTTP session.</p>
</div>
<div class="paragraph">
<p>To use the cookie store for saving the security context, edit your applications <code>WEB-INF/keycloak.json</code> and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"><span class="hljs-string">&quot;token-store&quot;</span>: <span class="hljs-string">&quot;cookie&quot;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The default value for <code>token-store</code> is <code>session</code>, which stores the security context in the HTTP session.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One limitation of using the cookie store is that the whole security context is passed in the cookie for every HTTP request. This may impact performance.</p>
</div>
<div class="paragraph">
<p>Another small limitation is limited support for Single-Sign Out. It works without issues if you init servlet logout (HttpServletRequest.logout) from the
application itself as the adapter will delete the KEYCLOAK_ADAPTER_STATE cookie. However, back-channel logout initialized from a different application isn&#x2019;t
propagated by Keycloak to applications using cookie store. Hence it&#x2019;s recommended to use a short value for the access token timeout (for example 1 minute).</p>
</div>
</div>
<div class="sect4">
<h5 id="_relative_uri_optimization">Relative URI optimization</h5>
<div class="paragraph">
<p>In deployment scenarios where Keycloak and the application is hosted on the same domain (through a reverse proxy or load balancer) it can be
convenient to use relative URI options in your client configuration.</p>
</div>
<div class="paragraph">
<p>With relative URIs the URI is resolved as relative to the URL of the URL used to access Keycloak.</p>
</div>
<div class="paragraph">
<p>For example if the URL to your application is <code>https://acme.org/myapp</code> and the URL to Keycloak is <code>https://acme.org/auth</code>, then you can use
the redirect-uri <code>/myapp</code> instead of <code>https://acme.org/myapp</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_admin_url_configuration">Admin URL configuration</h5>
<div class="paragraph">
<p>Admin URL for a particular client can be configured in the Keycloak Administration Console.
It&#x2019;s used by the Keycloak server to send backend requests to the application for various tasks, like logout users or push revocation policies.</p>
</div>
<div class="paragraph">
<p>For example the way backchannel logout works is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User sends logout request from one application</p>
</li>
<li>
<p>The application sends logout request to Keycloak</p>
</li>
<li>
<p>The Keycloak server invalidates the user session</p>
</li>
<li>
<p>The Keycloak server then sends a backchannel request to application with an admin url that are associated with the session</p>
</li>
<li>
<p>When an application receives the logout request it invalidates the corresponding HTTP session</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If admin URL contains <code>${application.session.host}</code> it will be replaced with the URL to the node associated with the HTTP session.</p>
</div>
</div>
<div class="sect4">
<h5 id="_registration_app_nodes">Registration of application nodes</h5>
<div class="paragraph">
<p>The previous section describes how Keycloak can send logout request to node associated with a specific HTTP session.
However, in some cases admin may want to propagate admin tasks to all registered cluster nodes, not just one of them.
For example to push a new not before policy to the application or to logout all users from the application.</p>
</div>
<div class="paragraph">
<p>In this case Keycloak needs to be aware of all application cluster nodes, so it can send the event to all of them.
To achieve this, we support auto-discovery mechanism:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When a new application node joins the cluster, it sends a registration request to the Keycloak server</p>
</li>
<li>
<p>The request may be re-sent to Keycloak in configured periodic intervals</p>
</li>
<li>
<p>If the Keycloak server doesn&#x2019;t receive a re-registration request within a specified timeout then it automatically unregisters the specific node</p>
</li>
<li>
<p>The node is also unregistered in Keycloak when it sends an unregistration request, which is usually during node shutdown or application undeployment.
This may not work properly for forced shutdown when undeployment listeners are not invoked, which results in the need for automatic unregistration</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Sending startup registrations and periodic re-registration is disabled by default as it&#x2019;s only required for some clustered applications.</p>
</div>
<div class="paragraph">
<p>To enable the feature edit the <code>WEB-INF/keycloak.json</code> file for your application and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&quot;register-node-at-startup&quot;: true,
&quot;register-node-period&quot;: 600,</code></pre>
</div>
</div>
<div class="paragraph">
<p>This means the adapter will send the registration request on startup and re-register every 10 minutes.</p>
</div>
<div class="paragraph">
<p>In the Keycloak Administration Console you can specify the maximum node re-registration timeout (should be larger than <em>register-node-period</em> from
the adapter configuration). You can also manually add and remove cluster nodes in through the Adminstration Console, which is useful if you don&#x2019;t want to rely
on the automatic registration feature or if you want to remove stale application nodes in the event your not using the automatic unregistration feature.</p>
</div>
</div>
<div class="sect4">
<h5 id="_refresh_token_each_req">Refresh token in each request</h5>
<div class="paragraph">
<p>By default the application adapter will only refresh the access token when it&#x2019;s expired. However, you can also configure the adapter to refresh the token on every
request. This may have a performance impact as your application will send more requests to the Keycloak server.</p>
</div>
<div class="paragraph">
<p>To enable the feature edit the <code>WEB-INF/keycloak.json</code> file for your application and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&quot;always-refresh-token&quot;: true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This may have a significant impact on performance. Only enable this feature if you can&#x2019;t rely on backchannel messages to propagate logout and not before
    policies. Another thing to consider is that by default access tokens has a short expiration so even if logout is not propagated the token will expire within
    minutes of the logout.
</td>
</tr>
</table>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../topics/oidc/java/multi-tenancy.html" class="navigation navigation-prev " aria-label="Previous page: Multi Tenancy"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../topics/oidc/javascript-adapter.html" class="navigation navigation-next " aria-label="Next page: JavaScript Adapter"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

    
    <script src="../../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Securing Applications and Services Guide -->
</html>
