<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book  -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Authorization Client Java API | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../topics/enforcer/overview.html" />
    
    
    <link rel="prev" href="../../topics/service/protection/token-introspection.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <!-- body:start -->
        
    <div class="book"
        data-level="8.5"
        data-chapter-title="Authorization Client Java API"
        data-filepath="topics/service/client-api.adoc"
        data-basepath="../.."
        data-revision="Wed Feb 08 2017 07:52:03 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="topics/overview/overview.html">
            
                
                    <a href="../../topics/overview/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Overview
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="topics/overview/architecture.html">
            
                
                    <a href="../../topics/overview/architecture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="topics/overview/terminology.html">
            
                
                    <a href="../../topics/overview/terminology.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Terminology
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="topics/getting-started/overview.html">
            
                
                    <a href="../../topics/getting-started/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Getting Started
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="topics/getting-started/hello-world/overview.html">
            
                
                    <a href="../../topics/getting-started/hello-world/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Securing a Servlet Application
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="topics/getting-started/hello-world/create-realm.html">
            
                
                    <a href="../../topics/getting-started/hello-world/create-realm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Creating a Realm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="topics/getting-started/hello-world/create-resource-server.html">
            
                
                    <a href="../../topics/getting-started/hello-world/create-resource-server.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Enabling Authorization Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="topics/getting-started/hello-world/deploy.html">
            
                
                    <a href="../../topics/getting-started/hello-world/deploy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Build, Deploy and Test
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topics/example/overview.html">
            
                
                    <a href="../../topics/example/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Examples
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="topics/resource-server/overview.html">
            
                
                    <a href="../../topics/resource-server/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Managing Resource Servers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="topics/resource-server/create-client.html">
            
                
                    <a href="../../topics/resource-server/create-client.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Creating a Client Application
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="topics/resource-server/enable-authorization.html">
            
                
                    <a href="../../topics/resource-server/enable-authorization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Enabling Authorization Services
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="topics/resource-server/default-config.html">
            
                
                    <a href="../../topics/resource-server/default-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Default Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="topics/resource-server/import-config.html">
            
                
                    <a href="../../topics/resource-server/import-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Exporting and Importing Authorization Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="topics/resource/overview.html">
            
                
                    <a href="../../topics/resource/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Managing Resources
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="topics/resource/view.html">
            
                
                    <a href="../../topics/resource/view.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Viewing Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="topics/resource/create.html">
            
                
                    <a href="../../topics/resource/create.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Creating Resources
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="topics/policy/overview.html">
            
                
                    <a href="../../topics/policy/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Managing Policies
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="topics/policy/user-policy.html">
            
                
                    <a href="../../topics/policy/user-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        User-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="topics/policy/role-policy.html">
            
                
                    <a href="../../topics/policy/role-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Role-Based Policy
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="topics/policy/role-policy-required-role.html">
            
                
                    <a href="../../topics/policy/role-policy-required-role.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.1.</b>
                        
                        Defining a Role as Required
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="topics/policy/js-policy.html">
            
                
                    <a href="../../topics/policy/js-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        JavaScript-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="topics/policy/drools-policy.html">
            
                
                    <a href="../../topics/policy/drools-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Drools-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="topics/policy/time-policy.html">
            
                
                    <a href="../../topics/policy/time-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Time-Based Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="topics/policy/aggregated-policy.html">
            
                
                    <a href="../../topics/policy/aggregated-policy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Aggregated Policy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="topics/policy/logic.html">
            
                
                    <a href="../../topics/policy/logic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Positive and Negative Logic
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="topics/policy/evaluation-api.html">
            
                
                    <a href="../../topics/policy/evaluation-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Policy Evaluation API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="topics/permission/overview.html">
            
                
                    <a href="../../topics/permission/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Managing Permissions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="topics/permission/create-resource.html">
            
                
                    <a href="../../topics/permission/create-resource.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Creating Resource-based Permissions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="topics/permission/typed-resource-permission.html">
            
                
                    <a href="../../topics/permission/typed-resource-permission.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.1.</b>
                        
                        Typed Resource Permissions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="topics/permission/create-scope.html">
            
                
                    <a href="../../topics/permission/create-scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Creating Scope-based Permissions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="topics/permission/decision-strategy.html">
            
                
                    <a href="../../topics/permission/decision-strategy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Policy Decision Strategies
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="topics/policy-evaluation-tool/overview.html">
            
                
                    <a href="../../topics/policy-evaluation-tool/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Evaluating and Testing Policies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="topics/service/overview.html">
            
                
                    <a href="../../topics/service/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Authorization Services
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="topics/service/protection/protection-api.html">
            
                
                    <a href="../../topics/service/protection/protection-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Protection API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="topics/service/protection/whatis-obtain-pat.html">
            
                
                    <a href="../../topics/service/protection/whatis-obtain-pat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                        What is a PAT and How to Obtain It
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="topics/service/protection/resources-api-papi.html">
            
                
                    <a href="../../topics/service/protection/resources-api-papi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.2.</b>
                        
                        Managing Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="topics/service/protection/permission-api-papi.html">
            
                
                    <a href="../../topics/service/protection/permission-api-papi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.3.</b>
                        
                        Managing Permission Requests
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="topics/service/authorization/authorization-api.html">
            
                
                    <a href="../../topics/service/authorization/authorization-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Authorization API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="topics/service/authorization/whatis-obtain-aat.html">
            
                
                    <a href="../../topics/service/authorization/whatis-obtain-aat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                        What is a AAT and How to Obtain It
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="topics/service/authorization/authorization-api-aapi.html">
            
                
                    <a href="../../topics/service/authorization/authorization-api-aapi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                        Requesting Authorization Data and Token
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="topics/service/entitlement/entitlement-api.html">
            
                
                    <a href="../../topics/service/entitlement/entitlement-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Entitlement API
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="topics/service/entitlement/entitlement-api-aapi.html">
            
                
                    <a href="../../topics/service/entitlement/entitlement-api-aapi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.1.</b>
                        
                        Requesting Entitlements
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="topics/service/protection/token-introspection.html">
            
                
                    <a href="../../topics/service/protection/token-introspection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Introspecting a Requesting Party Token
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="8.5" data-path="topics/service/client-api.html">
            
                
                    <a href="../../topics/service/client-api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Authorization Client Java API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="topics/enforcer/overview.html">
            
                
                    <a href="../../topics/enforcer/overview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Policy Enforcers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="topics/enforcer/keycloak-enforcement-filter.html">
            
                
                    <a href="../../topics/enforcer/keycloak-enforcement-filter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Keycloak Adapter Policy Enforcer
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="topics/enforcer/keycloak-enforcement-bearer.html">
            
                
                    <a href="../../topics/enforcer/keycloak-enforcement-bearer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.1.</b>
                        
                        Protecting a Stateless Service Using a Bearer Token
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.1.2" data-path="topics/enforcer/authorization-context.html">
            
                
                    <a href="../../topics/enforcer/authorization-context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.2.</b>
                        
                        Obtaining the Authorization Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.1.3" data-path="topics/enforcer/js-adapter.html">
            
                
                    <a href="../../topics/enforcer/js-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.3.</b>
                        
                        JavaScript Integration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <div class="sect1">
<h2 id="_authorization_client_api">Authorization Client API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using Java you can access all Keycloak Authorization Services using a client API.</p>
</div>
<div class="sect2">
<h3 id="_maven_dependency">Maven Dependency</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.keycloak<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>keycloak-authz-client<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${KEYCLOAK_VERSION}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">Configuration</h3>
<div class="paragraph">
<p>The client configuration is defined in a JSON file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  <span class="hljs-string">&quot;realm&quot;</span>: <span class="hljs-string">&quot;hello-world-authz&quot;</span>,
  <span class="hljs-string">&quot;auth-server-url&quot;</span> : <span class="hljs-string">&quot;http://localhost:8080/auth&quot;</span>,
  <span class="hljs-string">&quot;resource&quot;</span> : <span class="hljs-string">&quot;hello-world-authz-service&quot;</span>,
  <span class="hljs-string">&quot;credentials&quot;</span>: {
    <span class="hljs-string">&quot;secret&quot;</span>: <span class="hljs-string">&quot;secret&quot;</span>
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>realm</strong></p>
<div class="paragraph">
<p>Name of the realm. This is REQUIRED.</p>
</div>
</li>
<li>
<p><strong>auth-server-url</strong></p>
<div class="paragraph">
<p>The base URL of the Keycloak server. All other Keycloak pages and REST service endpoints are derived from this. It is usually of the form <a href="https://host:port/auth" class="bare" target="_blank">https://host:port/auth</a>. This is REQUIRED.</p>
</div>
</li>
<li>
<p><strong>resource</strong></p>
<div class="paragraph">
<p>The client-id of the application. Each application has a client-id that is used to identify the application. This is REQUIRED.</p>
</div>
</li>
<li>
<p><strong>credentials</strong>
Specify the credentials of the application. This is an object notation where the key is the credential type and the value is the value of the credential type. Currently only secret/password is supported. This is REQUIRED.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_obtaining_user_entitlements">Obtaining User Entitlements</h3>
<div class="paragraph">
<p>Here is an example about how to obtain user entitlements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-comment">// create a new instance based on the configuration define at keycloak-authz.json</span>
AuthzClient authzClient = AuthzClient.create();

<span class="hljs-comment">// obtian a Entitlement API Token in order to get access to the Entitlement API.</span>
<span class="hljs-comment">// this token is just an access token issued to a client on behalf of an user with a scope kc_entitlement</span>
String eat = getEntitlementAPIToken(authzClient);

<span class="hljs-comment">// send the entitlement request to the server in order to obtain a RPT with all permissions granted to the user</span>
EntitlementResponse response = authzClient.entitlement(eat).getAll(<span class="hljs-string">&quot;hello-world-authz-service&quot;</span>);
String rpt = response.getRpt();

System.out.println(<span class="hljs-string">&quot;You got a RPT: &quot;</span> + rpt);

<span class="hljs-comment">// now you can use the RPT to access protected resources on the resource server</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example about how to obtain user entitlements given a set of one or more resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-comment">// create a new instance based on the configuration define at keycloak-authz.json</span>
AuthzClient authzClient = AuthzClient.create();

<span class="hljs-comment">// obtian a Entitlement API Token in order to get access to the Entitlement API.</span>
<span class="hljs-comment">// this token is just an access token issued to a client on behalf of an user with a scope kc_entitlement</span>
String eat = getEntitlementAPIToken(authzClient);

<span class="hljs-comment">// create an entitlement request</span>
EntitlementRequest request = <span class="hljs-keyword">new</span> EntitlementRequest();
PermissionRequest permission = <span class="hljs-keyword">new</span> PermissionRequest();

permission.setResourceSetName(<span class="hljs-string">&quot;Hello World Resource&quot;</span>);

request.addPermission(permission);

<span class="hljs-comment">// send the entitlement request to the server in order to obtain a RPT with all permissions granted to the user</span>
EntitlementResponse response = authzClient.entitlement(eat).get(<span class="hljs-string">&quot;hello-world-authz-service&quot;</span>, request);
String rpt = response.getRpt();

System.out.println(<span class="hljs-string">&quot;You got a RPT: &quot;</span> + rpt);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_resource_using_the_protection_api">Creating a Resource Using the Protection API</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-comment">// create a new instance based on the configuration define at keycloak-authz.json</span>
AuthzClient authzClient = AuthzClient.create();

<span class="hljs-comment">// create a new resource representation with the information we want</span>
ResourceRepresentation newResource = <span class="hljs-keyword">new</span> ResourceRepresentation();

newResource.setName(<span class="hljs-string">&quot;New Resource&quot;</span>);
newResource.setType(<span class="hljs-string">&quot;urn:hello-world-authz:resources:example&quot;</span>);

newResource.addScope(<span class="hljs-keyword">new</span> ScopeRepresentation(<span class="hljs-string">&quot;urn:hello-world-authz:scopes:view&quot;</span>));

ProtectedResource resourceClient = authzClient.protection().resource();
Set&lt;String&gt; existingResource = resourceClient.findByFilter(<span class="hljs-string">&quot;name=&quot;</span> + newResource.getName());

<span class="hljs-keyword">if</span> (!existingResource.isEmpty()) {
    resourceClient.delete(existingResource.iterator().next());
}

<span class="hljs-comment">// create the resource on the server</span>
RegistrationResponse response = resourceClient.create(newResource);
String resourceId = response.getId();

<span class="hljs-comment">// query the resource using its newly generated id</span>
ResourceRepresentation resource = resourceClient.findById(resourceId).getResourceDescription();</code></pre>
</div>
</div>
</div>
</div>
</div>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../topics/service/protection/token-introspection.html" class="navigation navigation-prev " aria-label="Previous page: Introspecting a Requesting Party Token"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../topics/enforcer/overview.html" class="navigation navigation-next " aria-label="Next page: Policy Enforcers"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-ungrey/ungrey.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"toggle-chapters":{},"ungrey":{},"splitter":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book  -->
</html>
